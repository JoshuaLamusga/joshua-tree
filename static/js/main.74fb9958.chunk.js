(this["webpackJsonpjoshua-tree"]=this["webpackJsonpjoshua-tree"]||[]).push([[0],{103:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return z}));var r=n(55),i=n(20),s=n(10),o=n(13),a=n(32),u=n(31),l=n(4),c=n(0),h=n(104),f=n(18),d=n(24),p=n(42),v=n(9),m=n(17),g=n(75),b=n(7),y=n(111),O=n(39),w=n(108),k=n(15),x=n(28),j=n(26),I=n(5),F=Number.MIN_SAFE_INTEGER,E=/\s+/gm,S=/^[0-9|a-f]+$/g,T=/[0-9]/g,M=/\\at|\\lb|\\rb|\\n|\\s/g,C=/\\at|\\n|\\s/g,N=new w.a,P=function(t){Object(a.a)(c,t);var n=Object(u.a)(c);function c(e){var t;return Object(s.a)(this,c),(t=n.call(this,e)).actions=[],t.content=[],t.entries={},t.errorMessage="",t.fork="",t.log=[],t.options=[],t.stopEvaluation=!1,t.textboxHidden=!0,t.timers=[],t.variables={},t.variablesPrev={},t.defaultDarkThemeStyle={styleInput:Object(v.m)(m.a.dark.theme),styleOptions:Object(v.o)(m.a.dark.theme),styleOptionsHighlight:Object(v.n)(m.a.dark.theme),styleOutput:Object(v.p)(m.a.dark.theme),styleRunner:Object(v.q)(m.a.dark.theme)},t.defaultLightThemeStyle={styleInput:Object(v.m)(m.a.light.theme),styleOptions:Object(v.o)(m.a.light.theme),styleOptionsHighlight:Object(v.n)(m.a.light.theme),styleOutput:Object(v.p)(m.a.light.theme),styleRunner:Object(v.q)(m.a.light.theme)},t.defaultCustomization={discreteInlineLinks:!1,preserveOldOutput:!0,random:new h.a(null),restartOptionDisabled:!1,restartOptionText:"restart",showErrors:!0},t.customization={},t.getRestartLink=function(){return t.addOption(t.customization.restartOptionText,t.restartGame,f.h)},t.onTextboxKeyPress=function(e){13===e.charCode&&(t.actions.forEach((function(t){t(e.currentTarget.value)})),e.currentTarget.value="")},t.restartGame=function(){t.refreshInterpreter();var e=Object.keys(t.entries);t.setFork(e[0])},t.refreshInterpreter(),t.props.showErrors&&(t.customization.showErrors=t.props.showErrors),t.props.random&&(t.customization.random=t.props.random),t}return Object(o.a)(c,[{key:"addInput",value:function(e){return Object(l.jsx)("p",{style:this.customization.styles.styleInput,children:e},"".concat(f.d,"-").concat(F++))}},{key:"addOption",value:function(e,t,n){var r=this,s=this.customization.styles,o="function"===typeof t?t:function(){r.customization.preserveOldOutput&&r.content.push(r.addInput(e)),r.setFork(t)};return Object(l.jsx)(g.a,{onClick:o,styles:{root:Object(i.a)(Object(i.a)({},s.styleOptions),{},{display:"block",height:"32px"}),rootFocused:Object(i.a)({},s.styleOptionsHighlight),rootHovered:Object(i.a)({},s.styleOptionsHighlight)},text:e},n||"".concat(f.g,"-").concat(F++))}},{key:"addOutput",value:function(e){return Object(l.jsx)("p",{style:this.customization.styles.styleOutput,children:e},"".concat(f.j,"-").concat(F++))}},{key:"loadFile",value:function(){}},{key:"loadFork",value:function(){var e;if(this.updateLog(),this.content=[],this.options=[],this.textboxHidden=!0,this.timers.forEach((function(e){clearTimeout(e)})),this.timers=[],this.actions=[],void 0!==(e=this.entries[this.fork])){this.variablesPrev={};for(var t=Object.keys(this.variables),n=0;n<t.length;n++)this.variablesPrev[t[n]]=this.variables[t[n]];this.preorderProcess(e,""),this.stopEvaluation||(this.visitFork(),this.refreshInterpreterGui())}else this.setErrorMessage("Interpreter: fork '"+this.fork+"' not found.")}},{key:"processHeaderOptions",value:function(e){this.refreshInterpreter();for(var t=e.split("\n"),n=0;n<t.length;n++){for(var r=t[n],i=r.split(" "),s="",o=1;o<i.length;o++)s+=i[o]+" ";if(s=s.trim(),r.startsWith("link-style-text"))this.customization.discreteInlineLinks=!0;else if(r.startsWith("option-default-text"))this.customization.restartOptionText=s;else if(r.startsWith("option-default-disable"))this.customization.restartOptionDisabled=!0;else if(r.startsWith("option-color")||r.startsWith("option-hover-color")||r.startsWith("background-color")){var a="";S.test(s)?6!==s.length&&3!==s.length?this.setErrorMessage("Interpreter: In the line '"+r+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):3!==s.length&&6!==s.length||(a=s.substring(0,s.length)):this.setErrorMessage("Interpreter: In the line '"+r+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),r.startsWith("option-color")?this.customization.styles.styleOptions.color=a:r.startsWith("option-hover-color")?this.customization.styles.styleOptionsHighlight.color=a:r.startsWith("background-color")&&(this.customization.styles.styleRunner.backgroundColor=a)}else if(r.startsWith("output-font-size")||r.startsWith("option-font-size")){if(!O.a.test(s)){this.setErrorMessage("Interpreter: In line '"+r+"', a number must be specified after the option.");continue}var u=parseFloat(s);if(u<=0){this.setErrorMessage("Interpreter: In line '"+r+"', numbers must be greater than zero.");continue}(r.startsWith("output-font-size")||r.startsWith("option-font-size"))&&(this.customization.styles.styleOutput.fontSize=u)}else r.startsWith("option-font")?this.customization.styles.styleOptions.fontFamily=s+"; "+v.g:r.startsWith("output-font")&&(this.customization.styles.styleOutput.fontFamily=s+"; "+v.g)}}},{key:"setErrorMessage",value:function(e){this.errorMessage=null!==e&&void 0!==e?e:"",this.refreshInterpreterGui()}},{key:"refreshInterpreterGui",value:function(){var e=document.getElementById(f.k);e&&this.customization.styles.styleRunner.backgroundColor&&(e.style.backgroundColor=this.customization.styles.styleRunner.backgroundColor),this.refreshInterpreterGuiStyles(),this.props.dispatchRerenderStory()}},{key:"refreshInterpreterGuiStyles",value:function(){var e=this.props.theme.localizedName===m.a.light.localizedName?this.defaultLightThemeStyle:this.defaultDarkThemeStyle;this.customization.styles={styleInput:Object(i.a)({},e.styleInput),styleOptions:Object(i.a)({},e.styleOptions),styleOptionsHighlight:Object(i.a)({},e.styleOptionsHighlight),styleOutput:Object(i.a)({},e.styleOutput),styleRunner:Object(i.a)({},e.styleRunner)}}},{key:"render",value:function(){var e=0!==this.options.length||this.customization.restartOptionDisabled?void 0:this.getRestartLink(),t=[Object(l.jsx)("div",{id:f.f,children:this.log},f.f),Object(l.jsx)("div",{id:f.c,children:this.content},f.c),Object(l.jsxs)("div",{id:f.i,children:[this.options,e]},f.i)],n=this.customization.showErrors&&""!==this.errorMessage?Object(l.jsx)(y.a,{messageBarType:b.a.error,children:this.errorMessage}):void 0,r=this.textboxHidden?void 0:Object(l.jsx)("input",{autoComplete:"nah",name:"textfield",id:f.e,onKeyPress:this.onTextboxKeyPress,style:Object(v.r)(this.props.theme.theme),type:"text"},f.e);return Object(l.jsxs)("div",{className:v.t,children:[Object(l.jsx)("div",{className:v.s,children:t}),n,r]})}},{key:"saveFile",value:function(){}},{key:"setEntries",value:function(e){this.entries=e}},{key:"setEntriesWithFork",value:function(e,t){this.content=[],this.log=[],this.options=[],this.entries=e,this.errorMessage="";var n=Object.keys(this.entries);0===n.length?this.setErrorMessage("Interpreter: cannot play story. It contains no forks. Use @ at the beginning of a line to denote an fork."):""!==t&&n.includes(t)?this.setFork(t):this.setFork(n[0])}},{key:"setFork",value:function(e){this.fork=e,this.stopEvaluation=!1,this.loadFork()}},{key:"escapeText",value:function(e,t){return t?e.replace(M,(function(e){switch(e){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\";case"\\lb":return"{";case"\\rb":return"}"}return e})):e.replace(C,(function(e){switch(e){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\"}return e}))}},{key:"preorderProcess",value:function(e,t){if(this.processIf(e,t)){this.processText(e);for(var n=0;n<e.children.length;n++){if(this.stopEvaluation)return;this.preorderProcess(e.children[n],t)}}}},{key:"processIf",value:function(t,n){var r=this;if(""===t.condition.trim())return!0;var i=t.condition.substring(2).trim(),s=i.split(" ");if(0===s.length)return this.setErrorMessage("The line if '"+i+"' is incorrectly formatted."),!1;if(s.length>1&&"timer"===s[0]&&"is"===s[1]){if(s.length<2)return this.setErrorMessage("The timer must be set with a time specified in seconds."),!1;if(!O.a.test(s[2]))return this.setErrorMessage("Interpreter: In line '"+i+"', the third word must be numeric."),!1;var o=parseFloat(s[2]);if(isNaN(o)||!isFinite(o))return this.setErrorMessage("Interpreter: In line '"+i+"', the time must be numeric and not too large."),!1;if(o<=0)return this.setErrorMessage("Interpreter: In line '"+i+"', the time must be positive and non-zero."),!1;var a=e.setTimeout((function(){r.processText(t);for(var e=0;e<t.children.length;e++)r.preorderProcess(t.children[e],n)}),1e3*o);return this.timers.push(a),!1}if(s.length>1&&"text"===s[0]&&("is"===s[1]||"!is"===s[1]||"has"===s[1]||"!has"===s[1]||"pick"===s[1])){this.textboxHidden=!1;for(var u="",l=2;l<s.length;l++)u+=s[l]+" ";if(""===(u=this.escapeText(u.toLowerCase().trim(),!0))&&this.setErrorMessage("Interpreter: In the line 'if "+i+"', at least one word to look for must be specified after 'pick'."),"pick"===s[1]){for(var c=u.split(","),h=0;h<c.length;h++)c[h]=c[h].replace("\\c",",").trim();if(""===n)this.actions.push((function(e){e=e.toLowerCase().trim();for(var n=!1,i=0;i<c.length;i++){new RegExp("\\b"+c[i]+"\\b").test(e)&&(n=!0)}if(n){r.customization.preserveOldOutput&&r.content.push(r.addInput(e)),r.processText(t);for(var s=0;s<t.children.length;s++)r.preorderProcess(t.children[s],e);r.refreshInterpreterGui()}}));else{n=n.toLowerCase().trim();for(var f=!1,d=0;d<c.length;d++){new RegExp("\\b"+c[d]+"\\b").test(n)&&(f=!0)}if(!f)return!1;this.processText(t);for(var p=0;p<t.children.length;p++)this.preorderProcess(t.children[p],n)}}else if(s[1].endsWith("is")){if(""===n)this.actions.push((function(e){if(e=e.toLowerCase().trim(),"is"===s[1]&&e===u||"!is"===s[1]&&e!==u){r.customization.preserveOldOutput&&r.content.push(r.addInput(e)),r.processText(t);for(var n=0;n<t.children.length;n++)r.preorderProcess(t.children[n],e)}r.refreshInterpreterGui()}));else if("is"===s[1]&&n===u||"!is"===s[1]&&n!==u){this.processText(t);for(var v=0;v<t.children.length;v++)this.preorderProcess(t.children[v],n)}}else if(s[1].endsWith("has")){for(var m=u.split(","),g=0;g<m.length;g++)m[g]=m[g].replace("\\c",",").trim();if(""===n)this.actions.push((function(e){e=e.toLowerCase().trim();for(var n=0;n<m.length;n++){var i=new RegExp("\\b"+m[n]+"\\b").test(e);if("has"===s[1]&&!i||"!has"===s[1]&&i)return}r.customization.preserveOldOutput&&r.content.push(r.addInput(e)),r.processText(t);for(var o=0;o<t.children.length;o++)r.preorderProcess(t.children[o],e);r.refreshInterpreterGui()}));else{for(var b=0;b<m.length;b++){var y=new RegExp("\\b"+m[b]+"\\b").test(n);if("has"===s[1]&&!y||"!has"===s[1]&&y)return!1}this.processText(t);for(var w=0;w<t.children.length;w++)this.preorderProcess(t.children[w],n)}}return!1}N.optIncludeUnknowns=!0,N.resetTokens();var I=Object.keys(this.variables),F=this.variables["visited"+this.fork];N.addIdentifier(new j.a("visited",F));for(var E=0;E<I.length;E++){var S=I[E],T=this.variables[I[E]];N.addIdentifier(new j.a(S,T))}N.addFunction(new x.a("exists",1,(function(e){return e[0]instanceof k.a?e[0]:new k.a(!(e[0]instanceof j.a))})));var M="";try{M=N.eval(s.join(" "))}catch(C){return C instanceof Error?this.setErrorMessage(C.message):this.setErrorMessage(C),!1}return"true"===M||"false"===M?"true"===M:(this.setErrorMessage("Interpreter: In the line 'if "+s.join(" ")+"', the expression must be boolean (true or false), but was null instead."),!1)}},{key:"processText",value:function(e){for(var t=this,n=e.text;n.length>0;){var r=n.indexOf("\n"),i=void 0,s=(i=r>=0?n.substring(0,r):n).split(" ");if(""===i.trim())n=n.substring(r+1);else if(i.includes("@@")){var o=i.substring(i.indexOf("@")+2).replace(E,"").toLowerCase(),a=this.escapeText(i.substring(0,i.indexOf("@")).trim(),!1);""===o?this.setErrorMessage("Interpreter: there was no fork name given to option '"+a+"'."):""===a.trim()?this.setErrorMessage("Interpreter: the option linking to '"+o+"' has no displayable text specified."):void 0===this.entries[o]?this.setErrorMessage("Interpreter: the fork in the option '"+a+"@"+o+"' doesn't exist."):this.options.push(this.addOption(a,o)),n=n.substring(n.indexOf("\n")+1)}else if(i.includes("@")){var u=i.indexOf("@"),l=i.substring(u+1).replace(E,"").toLowerCase(),c=this.escapeText(i.substring(0,u).trim(),!1);""===l?this.setErrorMessage("Interpreter: there was no fork name given to option '"+c+"'."):""===c.trim()?this.setErrorMessage("Interpreter: the option linking to '"+l+"' has no displayable text specified."):this.options.push(this.addOption(c,l)),n=n.substring(n.indexOf("\n")+1)}else if(i.includes("{")){var h=n.indexOf("{"),f=n.indexOf("}"),d=n.substring(h,f+1);if(f<h){this.setErrorMessage("Interpreter: In the line '"+i+"', right braces should follow left braces. "),n=n.substring(n.indexOf("\n")+1);continue}var p=this.customization.styles.styleOutput.fontStyle,v=this.customization.styles.styleOutput.fontWeight;d.includes("***}")?(this.customization.styles.styleOutput.fontStyle="italic",this.customization.styles.styleOutput.fontWeight=600):d.includes("**}")?this.customization.styles.styleOutput.fontWeight=600:d.includes("*}")&&(this.customization.styles.styleOutput.fontStyle="italic"),d=this.escapeText(d.replace("{","").replace("***}","").replace("**}","").replace("*}","").replace("}",""),!0),this.content.push(this.addOutput(d)),this.customization.styles.styleOutput.fontStyle=p,this.customization.styles.styleOutput.fontWeight=v,n=n.substring(0,h)+n.substring(f+1,n.length)}else if(n.startsWith("set")){N.optIncludeUnknowns=!1,N.resetTokens();for(var m=Object.keys(this.variables),g=0;g<m.length;g++){var b=m[g],y=this.variables[m[g]];("number"===typeof y||"boolean"===typeof y)&&N.addIdentifier(new j.a(b,y))}N.addFunction(new x.a("random",1,(function(e){if(e[0]instanceof I.a){var n=e[0];return new I.a(t.customization.random.nextNumber()*n.value+1)}return null})));var w=s.indexOf("=");-1!==w?function(){var e=s.slice(1,w),n=s.slice(w+1),r="",o=null;if(1===e.length){try{r=N.eval(n.join(" "))}catch(a){a instanceof Error?t.setErrorMessage("Interpreter: In the line '"+i+"', "+a.message):t.setErrorMessage("Interpreter: In the line '"+i+", "+a)}"true"===r||"false"===r?o="true"===r:O.a.test(r)?o=parseFloat(r):t.setErrorMessage("Interpreter: In the line '"+i+"', the expression "+n.join(" ")+" should be a number, but "+r+" was computed instead."),m.includes(e[0])?t.variables[e[0]]=o:T.test(e[0][0])||N.getTokens().some((function(t){return t.strForm===e[0]}))?t.setErrorMessage("Interpreter: In the line '"+i+"', the variable '"+e[0]+"' is a name used for math or is a number."):t.variables[e[0]]=o}else t.setErrorMessage("Interpreter: In the line '"+i+", the phrase "+e.join(" ")+" must be a variable name without spaces.")}():function(){var e=s.slice(1),n="",r=null;if(e.length>0)if(1===e.length)if(e[0].startsWith("!")){var o=e[0].substring(1);m.includes(o)?t.variables[o]=!1:e.length>0&&T.test(e[0][0])||N.getTokens().some((function(e){return e.strForm===o}))?t.setErrorMessage("Interpreter: In the line '"+i+"', the variable '"+o+"' is a number or is used for math."):t.variables[o]=!1}else m.includes(e[0])?t.variables[e[0]]=!0:e.length>0&&T.test(e[0][0])||N.getTokens().some((function(t){return t.strForm===e[0]}))?t.setErrorMessage("Interpreter: In the line '"+i+"', the variable '"+e[0]+"' is a number or is used for math."):t.variables[e[0]]=!0;else if(m.includes(e[0])){try{n=N.eval(e.join(" "))}catch(a){a instanceof Error?t.setErrorMessage("Interpreter: In the line '"+i+"', "+a.message):t.setErrorMessage("Interpreter: In the line '"+i+"', "+a)}"true"===n||"false"===n?r="true"===n:O.a.test(n)?r=parseFloat(n):t.setErrorMessage("Interpreter: In the line '"+i+"', the expression "+e.join(" ")+" should be a number, but "+n+" was computed instead."),t.variables[e[0]]=r}else t.setErrorMessage("Interpreter: In the line '"+i+"', the variable "+e[0]+" doesn't exist yet.");else t.setErrorMessage("Interpreter: In the line '"+i+"', you need to provide a variable name to set, using syntax like set a, set !a, or a mathematical expression.")}(),n=r>=0?n.substring(n.indexOf("\n")+1):""}else if(n.startsWith("get"))2===s.length?void 0!==this.variables[s[1]]?this.content.push(this.addOutput(this.variables[s[1]].toString())):this.setErrorMessage("Interpreter: In the line '"+i+"', variable "+s[1]+" does not exist."):this.setErrorMessage("Interpreter: In the line '"+i+"', only one word can follow 'get'."),n=r>=0?n.substring(n.indexOf("\n")+1):"";else if(n.startsWith("goto")){var k=i.substring(4).replace(E,"").toLowerCase();if(void 0!==this.entries[k])return this.visitFork(),this.setFork(k),void(this.stopEvaluation=!0);this.setErrorMessage("Interpreter: In the line '"+n+"', cannot navigate to fork '"+k+"' because it does not exist."),n=r>=0?n.substring(n.indexOf("\n")+1):""}else if(n.startsWith("color")){var F=i.substring(5).trim().toLowerCase();S.test(F)?6!==F.length&&3!==F.length?this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):3===F.length&&(this.customization.styles.styleOutput.color=F.substring(0,3)):this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),n=r>=0?n.substring(n.indexOf("\n")+1):""}else this.setErrorMessage("Interpreter: In the line '"+i+"', unexpected symbols encountered. Ensure all output text is wrapped in single braces and there are no extra braces inside."),n=n.substring(n.indexOf("\n")+1)}}},{key:"refreshInterpreter",value:function(){this.actions=[],this.content=[],this.customization={discreteInlineLinks:this.defaultCustomization.discreteInlineLinks,preserveOldOutput:this.defaultCustomization.preserveOldOutput,random:this.defaultCustomization.random,restartOptionDisabled:this.defaultCustomization.restartOptionDisabled,restartOptionText:this.defaultCustomization.restartOptionText,showErrors:this.defaultCustomization.showErrors,styles:this.customization.styles},this.errorMessage="",this.fork="",this.log=[],this.options=[],this.timers=[],this.variables={},this.variablesPrev={},this.refreshInterpreterGuiStyles()}},{key:"updateLog",value:function(){var e;this.customization.preserveOldOutput?(e=this.log).push.apply(e,Object(r.a)(this.content)):this.log=[]}},{key:"visitFork",value:function(){void 0===this.variables["visited"+this.fork]&&(this.variables["visited"+this.fork]=!0)}}]),c}(c.Component),z=Object(d.b)((function(e){return{renderTrigger:e.viewEdit.storyRerenderToken,theme:e.settings.theme}}),(function(e){return{dispatchRerenderStory:Object(p.a)(e)}}),void 0,{forwardRef:!0})(P)}).call(this,n(64))},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(10),i=n(13),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r.a)(this,e),this.mt=new Array(e.N),this.mti=e.N+1,null==t&&(t=(new Date).getTime()),this.init_genrand(t)}return Object(i.a)(e,[{key:"init_genrand",value:function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<e.N;this.mti++){var n=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&n)>>>16)<<16)+1812433253*(65535&n)+this.mti,this.mt[this.mti]>>>=0}}},{key:"_nextInt32",value:function(){var t,n=[0,e.MATRIX_A];if(this.mti>=e.N){var r;for(this.mti===e.N+1&&this.init_genrand(5489),r=0;r<e.N-e.M;r++)t=this.mt[r]&e.UPPER_MASK|this.mt[r+1]&e.LOWER_MASK,this.mt[r]=this.mt[r+e.M]^t>>>1^n[1&t];for(;r<e.N-1;r++)t=this.mt[r]&e.UPPER_MASK|this.mt[r+1]&e.LOWER_MASK,this.mt[r]=this.mt[r+(e.M-e.N)]^t>>>1^n[1&t];t=this.mt[e.N-1]&e.UPPER_MASK|this.mt[0]&e.LOWER_MASK,this.mt[e.N-1]=this.mt[e.M-1]^t>>>1^n[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0}},{key:"nextInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._nextInt32();return null==e?t:t%(e[1]-e[0])+e[0]}},{key:"nextInt31",value:function(){return this._nextInt32()>>>1}},{key:"nextNumber",value:function(){return this._nextInt32()*(1/4294967295)}},{key:"nextNumber53",value:function(){return(67108864*(this._nextInt32()>>>5)+(this._nextInt32()>>>6))*(1/9007199254740992)}}]),e}();s.N=624,s.M=397,s.MATRIX_A=2567483615,s.UPPER_MASK=2147483648,s.LOWER_MASK=2147483647},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,i,s,o=n(55),a=n(10),u=n(13);(i=r||(r={}))[i.left=0]="left",i[i.right=1]="right",function(e){e[e.left=0]="left",e[e.right=1]="right",e[e.both=2]="both"}(s||(s={}));var l=n(15),c=n(28),h=n(26),f=n(5),d=function(){function e(t,n,r,i,o){Object(a.a)(this,e),this.strForm=void 0,this.placement=void 0,this.assoc=void 0,this.prec=void 0,this.numArgs=void 0,this.function=void 0,this.placement=t,this.assoc=n,this.prec=r,t===s.both?this.numArgs=2:this.numArgs=1,this.strForm=i,this.function=o}return Object(u.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.placement===e.placement&&this.assoc===e.assoc&&this.prec===e.prec&&this.numArgs===e.numArgs&&this.function===e.function}}]),e}(),p=function(){function e(t){Object(a.a)(this,e),this.strForm=void 0,this.strForm=t}return Object(u.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm}}]),e}(),v=n(39),m=function(){function e(){var t=this;Object(a.a)(this,e),this.optRequireRightPars=!1,this.optIncludeUnknowns=!0,this.optUnknownDefault=null,this.Fsin=new c.a("sin",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.sin(t.value))}return null})),this.Fcos=new c.a("cos",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.cos(t.value))}return null})),this.Ftan=new c.a("tan",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.tan(t.value))}return null})),this.Frnd=new c.a("round",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.round(t.value))}return null})),this.Frnd2=new c.a("round",2,(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new f.a(Math.round(t.value/n.value)*n.value)}return null})),this.Add=new d(s.both,r.left,6,"+",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new f.a(t.value+n.value)}return null})),this.Sub=new d(s.both,r.left,6,"-",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new f.a(t.value-n.value)}return null})),this.Mlt=new d(s.both,r.left,7,"*",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new f.a(t.value*n.value)}return null})),this.Div=new d(s.both,r.left,7,"/",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];if(0===n.value)throw new Error("Parser: The expression ".concat(t.strForm," / ").concat(n.strForm," causes division by zero."));return new f.a(t.value/n.value)}return null})),this.Mod=new d(s.both,r.left,7,"%",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];if(0===n.value)throw new Error("Parser: The expression ".concat(t.strForm," % ").concat(n.strForm," causes division by zero."));return new f.a(t.value%n.value)}return null})),this.Neg=new d(s.right,r.right,8,"-",(function(e){if(e[1]instanceof f.a){var t=e[1];return new f.a(-t.value)}return null})),this.Exp=new d(s.both,r.right,8,"^",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new f.a(Math.pow(t.value,n.value))}return null})),this.Fac=new d(s.left,r.left,9,"!",(function(e){if(e[0]instanceof f.a){for(var t=e[0],n=t.value,r=1;t.value>1;)r*=n--;return new f.a(r)}return null})),this.Eq=new d(s.both,r.left,4,"=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value===n.value)}if(e[0]instanceof l.a&&e[1]instanceof l.a){var r=e[0],i=e[1];return new l.a(r.value===i.value)}return null})),this.NotEq=new d(s.both,r.left,4,"!=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value!==n.value)}if(e[0]instanceof l.a&&e[1]instanceof l.a){var r=e[0],i=e[1];return new l.a(r.value!==i.value)}return null})),this.Gt=new d(s.both,r.left,5,">",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value>n.value)}return null})),this.Gte=new d(s.both,r.left,5,">=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value>=n.value)}return null})),this.Lt=new d(s.both,r.left,5,"<",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value<n.value)}return null})),this.Lte=new d(s.both,r.left,5,"<=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],n=e[1];return new l.a(t.value<=n.value)}return null})),this.LogNot=new d(s.right,r.left,3,"!",(function(e){if(e[1]instanceof l.a){var t=e[1];return new l.a(!t.value)}return null})),this.LogAnd=new d(s.both,r.left,1,"&",(function(e){if(e[0]instanceof l.a&&e[1]instanceof l.a){var t=e[0],n=e[1];return new l.a(t.value&&n.value)}return null})),this.LogOr=new d(s.both,r.left,2,"|",(function(e){if(e[0]instanceof l.a&&e[1]instanceof l.a){var t=e[0],n=e[1];return new l.a(t.value||n.value)}return null})),this.varFalse=new h.a("false",!1),this.varTrue=new h.a("true",!0),this.varPi=new h.a("pi",Math.PI),this.lPar=new p("("),this.rPar=new p(")"),this.argSep=new p(","),this.tokens=[],this.evalNoPar=function(e,n){for(var i=t.tokens.filter((function(e){return e instanceof d})),a=[],u="",h=0;h<e.length;h++)u+=e[h].strForm;if(t.optRequireRightPars&&e[0]===t.lPar&&e[e.length-1]!==t.rPar)throw new Error("Parser: The expression '"+u+"' is missing a right parenthesis at the end.");if(e.filter((function(e){return e===t.lPar||e===t.rPar})),0===e.length)throw new Error("Parser: an empty parenthesis group was provided; there is nothing to process within it.");if(null!==n){var p=t.split(e,t.argSep),v=[];if(n.numArgs!==p.length)throw new Error("Parser: In expression '"+u+"', the number of arguments for "+n.strForm+" should be "+n.numArgs+", but "+p.length+" arguments were given.");for(var m=0;m<p.length;m++){var g=t.evalNoPar(p[m],null);if(!(g[0]instanceof f.a||g[0]instanceof l.a))throw new Error("Parser: In expression '"+u+"', a boolean argument was provided instead of a decimal value.");v[m]=g[0]}var b=n.function(v);if(null===b)throw new Error("Parser: In expression '"+u+"', arguments do not match parameter types used.");return a.push(b),a}e[0]===t.Sub&&(e[0]=t.Neg);for(var y=1;y<e.length;y++)(e[y]===t.Sub&&e[y-1]instanceof d&&(e[y-1].numArgs>1||e[y-1]===t.Neg)||e[y-1]instanceof c.a)&&(e[y]=t.Neg);var O=e.filter((function(e){return e instanceof d})),w=0;O.forEach((function(e){e.prec>w&&(w=e.prec)}));for(var k=function(){for(var t=i.some((function(e){return w===e.prec&&e.assoc===r.right})),n=t?e.length-1:0;t&&n>=0||!t&&n<e.length;){if(e[n]instanceof d&&e[n].prec===w){var o,a,l,c=e[n],h=[null!==(o=e[n-1])&&void 0!==o?o:null,null!==(a=e[n+1])&&void 0!==a?a:null];if(null===h[0]&&(c.placement===s.both||c.placement===s.left))throw new Error("Parser: In '"+u+"', the '"+e[n].strForm+"' operator is missing a lefthand operand.");if(null===h[1]&&(c.placement===s.both||c.placement===s.right))throw new Error("Parser: In '"+u+"', the '"+e[n].strForm+"' operator is missing a righthand operand.");if(null===(l=c.function(h)))throw new Error("In expression '"+u+"', operand type(s) do not match operator.");e[n]=l,c.placement===s.left?(e.splice(n-1,1),n+=t?0:-1):c.placement===s.right?(e.splice(n+1,1),n+=t?1:0):c.placement===s.both&&(e.splice(n+1,1),e.splice(n-1,1),n+=t?0:-1)}t?n--:n++}O=e.filter((function(e){return e instanceof d}));var f=0;O.forEach((function(e){e.prec>f&&(f=e.prec)}))};w>0;)k();return a.push.apply(a,Object(o.a)(e)),a},this.resetTokens()}return Object(u.a)(e,[{key:"addFunction",value:function(e){this.tokens.push(new c.a(e.strForm.toLowerCase(),e.numArgs,e.function)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"addIdentifier",value:function(e){this.tokens.push(new h.a(e.strForm.toLowerCase(),e.value)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"addOperator",value:function(e){this.tokens.push(new d(e.placement,e.assoc,e.prec,e.strForm.toLowerCase(),e.function)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"eval",value:function(e){return this.evalTokens(this.tokenize(e))}},{key:"evalTokens",value:function(e){for(var t=this,n=0;n<e.length;n++)if(e[n]instanceof h.a){var r=e[n];if(null!==r.value)"number"===typeof r.value?e[n]=new f.a(r.value):"boolean"===typeof r.value&&(e[n]=new l.a(r.value));else{if(null===this.optUnknownDefault)throw new Error("Parser: The identifier '"+e[n].strForm+"' is unknown and can't be computed.");e[n]=this.optUnknownDefault}}for(var i=this.tokens.filter((function(e){return e instanceof c.a}));;){var s,a,u=e.indexOf(this.rPar)+1,d=u>=1?u:e.length,p=e.slice(0,d).lastIndexOf(this.lPar),v=p>=0?p:0,m=e.slice(0,v),g=e.slice(d,e.length),b=e.slice(v,d),y=null;if(m[m.length-1]instanceof c.a&&function(){var e,n=m[m.length-1];m.splice(m.length-1,1);var r=1;b.forEach((function(e){e===t.argSep&&r++})),y=null!==(e=i.find((function(e){return e.numArgs===r&&e.strForm===n.strForm})))&&void 0!==e?e:null}(),(s=e=m).push.apply(s,Object(o.a)(this.evalNoPar(b,y))),(a=e).push.apply(a,Object(o.a)(g)),0===m.length&&0===g.length){for(var O="",w=0;w<e.length;w++)O+=e[w].strForm;return O}}}},{key:"getTokens",value:function(){return this.tokens}},{key:"removeToken",value:function(e){for(var t=this.tokens.length;t>0;t--)if(e.equals(this.tokens[t]))return this.tokens.splice(t,1),!0;return!1}},{key:"resetTokens",value:function(){this.tokens=[this.Exp,this.Neg,this.Mod,this.Div,this.Mlt,this.Sub,this.Add,this.LogNot,this.LogOr,this.LogAnd,this.Eq,this.Gt,this.Gte,this.Lt,this.Lte,this.NotEq,this.Fsin,this.Fcos,this.Ftan,this.Frnd,this.Frnd2,this.varFalse,this.varTrue,this.varPi,this.lPar,this.rPar,this.argSep],this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"split",value:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++)e[i]===t?n.push([].concat(r)):r.push(e[i]);return r.length>0&&n.push(r),n}},{key:"tokenize",value:function(e){var t=[],n="";if(""===e.trim())throw new Error("Parser: No expression provided.");e=e.replace(/\s/gm,"").toLowerCase();for(var r=null,i=null,s=null,o=0;o<e.length;o++){var a,u;if(n+=e[o],r=this.tokens.filter((function(e){return e.strForm===n}))[0],o!==e.length-1&&(null===(a=r)||void 0===a?void 0:a.strForm.length)>n.length)(null===(u=i=this.tokens.filter((function(e){return e.strForm===n}))[0])||void 0===u?void 0:u.strForm)===n&&(s=i,o===e.length-1&&(t.push(i),n="",s=null));else if(null===r||o===e.length-1&&r.strForm.length!==n.length)if(null!==s)o-=n.length-s.strForm.length,t.push(s),n="",s=null;else if(v.a.test(n)){var l=parseFloat(n);o!==e.length-1&&v.a.test(n+e[o+1])||(t.push(new f.a(l)),n="")}else{if(!this.optIncludeUnknowns)throw new Error("Parser: token '"+n+"' is not a recognized symbol.");t.push(new h.a(n[0].toString(),null)),o-=n.length-1,n=""}else t.push(r),n="",s=null}for(var c=[],m="",g=0;g<t.length;g++){if(g===t.length-1||t[g+1]instanceof d||t[g+1]instanceof p){if(""!==m){if(m+=t[g].strForm,this.optIncludeUnknowns){c.push(new h.a(m,null)),m="";continue}throw new Error("Parser: token '"+m+"' is not a recognized symbol.")}}else if(!(t[g]instanceof d||t[g]instanceof p)&&(""!==m||!(t[g]instanceof f.a))){m+=t[g].strForm;continue}t[g]===this.Neg?c.push(this.Sub):c.push(t[g])}return c}}]),e}()},131:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(0),s=n(50),o=n.n(s),a=(n(131),n(24)),u=n(187),l=n(16),c=n(109),h=n(46),f=n.n(h),d=n(59),p=n(10),v=n(13),m=n(32),g=n(31),b=n(52),y=n(49),O=n(33),w=n(17),k=n(37),x={setLocale:Object(k.a)(),setTheme:Object(k.a)()},j=function(e){return{localeId:e,type:x.setLocale}},I=n(2),F=function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.body.style.backgroundColor=n.theme.semanticColors.bodyBackground,e({theme:{localizedName:n.localizedName,theme:n.theme},type:x.setTheme});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(j(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=Object(O.c)({locale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.b)(),t=arguments.length>1?arguments[1]:void 0;return t.type===x.setLocale?t.localeId:e},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{localizedName:w.a.light.localizedName,theme:Object(I.z)(w.a.light.theme)},t=arguments.length>1?arguments[1]:void 0;return t.type===x.setTheme?t.theme:e}}),T="JoshuaTree",M=function(e){if(e.persistence.userConsentProvided){var t="";Object.keys(w.a).forEach((function(n){w.a[n].localizedName===e.settings.theme.localizedName&&(t=n)}));var n={localeId:e.settings.locale,saveFormatVersion:1,themeName:t};localStorage.setItem(T,JSON.stringify(n))}},C=function(){var e=localStorage.getItem(T);if(null===e)return null;var t={};try{t=JSON.parse(e)}catch(n){return null}return t.localeId&&t.themeName&&t.saveFormatVersion?t:null},N={setCustomizationApplied:Object(k.a)(),setUserConsentProvided:Object(k.a)()},P=function(e){return function(t){e({consentProvided:t,type:N.setUserConsentProvided})}},z=Object(O.c)({customizationApplied:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===N.setCustomizationApplied?t.isApplied:e},userConsentProvided:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===N.setUserConsentProvided?t.consentProvided:e}}),L=n(9),A=n(20),R=n(113),D=n(106),W=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props.dropdown,t=e.styles,n=Object(R.a)(e,["styles"]),i=t;return Object(r.jsx)(D.a,Object(A.a)(Object(A.a)({},n),{},{styles:Object(L.c)(this.props.theme.theme,i)}))}}]),n}(i.Component),B=Object(a.b)((function(e){return{theme:e.settings.theme}}))(W),_=n(42),q=n(107),K=n(112);var U,G=i.createRef(),H=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).applyLocalStorage=function(){var t=C();null!==t&&(t.localeId in y.a&&e.props.setLocale(t.localeId),null!==w.a[t.themeName]&&e.props.setTheme(w.a[t.themeName]))},e.getLocaleDropdownOptionKey=function(e){return"userSettingsLocaleOptions".concat(e)},e.renderLocaleDropdown=function(){var t=[];Object.keys(y.a).forEach((function(n){t.push({data:n,key:e.getLocaleDropdownOptionKey(n),text:y.a[n].LanguageCodeName})}));return Object(r.jsx)(B,{dropdown:{defaultSelectedKey:e.getLocaleDropdownOptionKey(e.props.locale),onRenderTitle:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(K.a,{iconName:"LocaleLanguage",styles:L.i}),Object(r.jsx)("span",{style:{fontSize:"".concat(e.props.wholeTheme.fonts.large)},children:y.a[e.props.locale].LanguageCodeName})]})},options:t,onChange:function(t,n){if(void 0!==n){var r=n.data;e.props.setLocale(r).then((function(){M(e.props.reduxState)}))}}}})},e.getThemeDropdownOptionKey=function(e){return"userSettingsThemeOptions".concat(e)},e.renderThemeDropdown=function(){var t=[];Object.keys(w.a).forEach((function(n){var r=w.a[n];t.push({data:r,key:e.getThemeDropdownOptionKey(r.localizedName),text:r.localizedName})}));return Object(r.jsx)(B,{dropdown:{defaultSelectedKey:e.getThemeDropdownOptionKey(e.props.themeName),onRenderTitle:function(){return Object(r.jsx)("span",{style:{fontSize:"".concat(e.props.wholeTheme.fonts.large)},children:e.props.strings.ThemeDropdownText(e.props.themeName)})},options:t,onChange:function(t,n){if(void 0!==n){var r=n.data;e.props.setTheme(r).then((function(){M(e.props.reduxState)}))}},styles:Object(L.b)(e.props.wholeTheme)}})},e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.userConsentProvided&&this.applyLocalStorage()}},{key:"render",value:function(){var e=this,t=[{className:Object(L.d)(this.props.wholeTheme,!0),data:U.mainMenuFileNew,key:"userSettingsCommandBarFileMenuNew",name:this.props.strings.MenuFileNew,iconProps:{iconName:"FabricNewFolder"},onClick:function(){return $(U.mainMenuFileNew)}},{className:Object(L.d)(this.props.wholeTheme,!0),data:U.mainMenuFileOpen,key:"userSettingsCommandBarFileMenuOpen",name:this.props.strings.MenuFileOpen,iconProps:{iconName:"OpenFolderHorizontal"},onClick:function(){return $(U.mainMenuFileOpen)}},{className:Object(L.d)(this.props.wholeTheme),data:U.mainMenuFileSave,key:"userSettingsCommandBarFileMenuSave",name:this.props.strings.MenuFileSave,iconProps:{iconName:"Save"},onClick:function(){return $(U.mainMenuFileSave)}}],n=[{ariaLabel:this.props.strings.TipTheme,key:"userSettingsCommandBarChosenTheme",onRender:this.renderThemeDropdown,buttonStyles:Object(L.a)()},{ariaLabel:this.props.strings.TipLanguage,key:"userSettingsCommandBarChosenLocale",onRender:this.renderLocaleDropdown}],i=function(){var t=Object(d.a)(f.a.mark((function t(n){var r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=n.target.files)&&((i=new FileReader).onloadend=function(){var t=i.result;e.props.setStory(t)},i.readAsText(r[0]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{className:L.h,onChange:i,ref:G,type:"file"}),Object(r.jsx)(q.a,{ariaLabel:this.props.strings.TipNavigateCommandBar,items:t,farItems:n,styles:L.e})]})}}]),n}(i.Component),J=Object(a.b)((function(e){return{locale:e.settings.locale,reduxState:e,strings:Object(b.a)(e.settings.locale),themeName:e.settings.theme.localizedName,userConsentProvided:e.persistence.userConsentProvided,wholeTheme:Object(I.x)()}}),(function(e){return{setConsent:P(e),setLocale:E(e),setStory:Object(_.c)(e),setTheme:F(e)}}))(H);!function(e){e.mainMenuFileNew="mainMenuFileNew",e.mainMenuFileOpen="mainMenuFileOpen",e.mainMenuFileSave="mainMenuFileSave"}(U||(U={}));var Q={function:function(){!function(){var e;null===(e=G.current)||void 0===e||e.click()}()}},V={function:function(){alert("Invoked file -> save.")}},X={mainMenuFileNew:{functionsToInvoke:[{function:function(){alert("Invoked file -> new.")}}],guid:U.mainMenuFileNew,shortcuts:[{originalSequence:[{key:"N",usesShift:!0}]}]},mainMenuFileOpen:{functionsToInvoke:[Q],guid:U.mainMenuFileOpen,shortcuts:[{originalSequence:[{key:"O",usesShift:!0}]}]},mainMenuFileSave:{functionsToInvoke:[V],guid:U.mainMenuFileSave,shortcuts:[{originalSequence:[{key:"S",usesShift:!0}]}]}},$=function(e,t){var n,r;!0!==X[e].enableWhileTyping&&("textarea"===(null===(n=document.activeElement)||void 0===n?void 0:n.nodeName.toLowerCase())||"input"===(null===(r=document.activeElement)||void 0===r?void 0:r.nodeName.toLowerCase())&&"text"===document.activeElement.getAttribute("type"))||!0!==X[e].disabled&&X[e].functionsToInvoke.forEach((function(e){!0!==e.disabled&&e.function(t)}))},Y=n(18),Z=n(110),ee=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).runStory=function(){var t=document.getElementById(Y.a).value;e.props.saveAndRunStory(t)},e.updateStory=function(t){e.props.story!==t.currentTarget.value&&e.props.setStory(t.currentTarget.value)},e}return Object(v.a)(n,[{key:"componentDidUpdate",value:function(e){var t;this.props.story!==e.story&&(null===(t=document.getElementById(Y.a))||void 0===t||t.setAttribute("value",this.props.story))}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("textarea",{style:Object(L.f)(this.props.theme.theme),id:Y.a,onBlur:this.updateStory}),Object(r.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(r.jsx)(Z.a,{styles:{root:{display:"block"}},text:"play",onClick:this.runStory})})]})}}]),n}(i.Component),te=Object(a.b)((function(e){return{story:e.viewEdit.story,theme:e.settings.theme}}),(function(e){return{saveAndRunStory:Object(_.b)(e),setStory:Object(_.c)(e)}}))(ee),ne=n(103),re=function e(){Object(p.a)(this,e),this.condition=void 0,this.text=void 0,this.parent=void 0,this.children=void 0,this.condition="",this.text="",this.parent=null,this.children=[]},ie=/\/\//g,se=/\bif\b/g,oe=/\bendif\b/g;function ae(e,t){var n=e.substring(0,t).lastIndexOf("\n");-1===n&&(n=0);var r=e.substring(t).indexOf("\n");return-1===r&&(r=e.length-1),r+=t,e.substring(n,r).includes("@")}function ue(e,t){var n=e.substring(0,t),r=n.lastIndexOf("{");return!(r<n.lastIndexOf("}")||-1===r)}var le=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).interpreterRef=void 0,r.interpreterRef=i.createRef(),r}return Object(v.a)(n,[{key:"componentDidUpdate",value:function(){try{!function(e,t,n){var r,i,s={},o={},a=[],u=e.split("\n");0===u.length&&(null===(i=t.current)||void 0===i||i.setEntries({}),t.current&&t.current.setErrorMessage("Parser: Story is blank. The story must not be blank to parse it."));for(var l=0;l<u.length;l++)u[l]=u[l].replace("\r","").trim(),u[l].startsWith("@")&&a.push(l);var c="";if(a.length>0){for(var h,f=0;f<a[0];f++)c+=u[f]+"\n";null===(h=t.current)||void 0===h||h.processHeaderOptions(c)}for(var d=0;d<a.length;d++)if(u[a[d]].length<2)t.current&&t.current.setErrorMessage("Parser: Entry"+u[a[d]]+"must be at least 1 character long.");else{var p=u[a[d]].substring(1),v=[],m="";v=d===a.length-1?u.slice(a[d],u.length):u.slice(a[d],a[d+1]);for(var g=1;g<v.length;g++)m+=v[g]+"\n";void 0!==s[p=p.replace(/\s+/g,"").toLowerCase()]?t.current&&t.current.setErrorMessage("Parser: Entry called '".concat(p,"' already exists.")):s[p]=m}for(var b=Object.keys(s),y=0;y<b.length;y++){var O=void 0,w=s[b[y]];do{O=!0;for(var k=null;null!==(k=ie.exec(w));){var x=k.index;if(!ue(w,x)&&!ae(w,x)){w=w.slice(x,w.substring(x).indexOf("\n")),O=!1;break}}}while(!O);s[b[y]]=w}for(var j=0;j<b.length;j++){for(var I=new re,F=I,E=0,S=s[b[j]],T=[],M=[],C=null,N=[],P=[];null!==(C=se.exec(S));)T.push(C);for(;null!==(C=oe.exec(S));)M.push(C);for(var z=0;z<T.length;z++)ue(S,T[z].index)||ae(S,T[z].index)||N.push(T[z].index);for(var L=0;L<M.length;L++)ue(S,M[L].index)||ae(S,M[L].index)||P.push(M[L].index);N.length!==P.length&&t.current&&t.current.setErrorMessage("Parser: found ".concat(N.length," if tokens, but ").concat(P.length," ")+"endif tokens. Ifs and endifs must match in number.");for(var A=[],R=0;R<N.length;R++)A.push({item1:N[R],item2:0});for(var D=0;D<P.length;D++)A.push({item1:P[D],item2:1});A=A.sort((function(e,t){return e.item1>t.item1?1:-1}));for(var W=0;W<A.length;W++){var B=A[W].item1,_=A[W].item2,q=S.substring(B);q=q.slice(0,q.indexOf("\n"));for(var K=-1,U="",G=W-1;G>=0;G--)if(0===A[G].item2){K=A[G].item1,U=(U=S.substring(K)).slice(0,U.indexOf("\n"));break}for(var H=-1,J="",Q=W-1;Q>=0;Q--)if(1===A[Q].item2){H=A[Q].item1,J=(J=S.substring(H)).slice(0,J.indexOf("\n"));break}var V=H>K?H:K,X=V===H?J:U;if(0===_){if(0!==W&&-1!==K){var $=new re;$.parent=F;var Y=V+X.length;if(B-Y<0){t.current&&t.current.setErrorMessage("Parser: In '".concat(S.substring(V),"', cannot specify multiple if tokens on one line."));continue}$.text+=S.substring(Y,B),0===$.children.length&&""===$.condition.trim()&&""===$.text.trim()||F.children.push($)}else if(B>0){var Z=new re;Z.parent=F,Z.text+=S.substring(0,B),0===Z.children.length&&""===Z.condition.trim()&&""===Z.text.trim()||F.children.push(Z)}var ee=new re;ee.parent=F,ee.condition=q,0===ee.children.length&&""===ee.condition.trim()&&""===ee.text.trim()||F.children.push(ee),F=ee,E++}else if(1===_){var te;if(E<0)return null===(te=t.current)||void 0===te||te.setEntries({}),void(t.current&&t.current.setErrorMessage("Parser: an extra endif token was encountered (if/endif # "+(W+1)+")."));var ne=new re;ne.parent=F;var le,ce=V+X.length;if(B-ce<0){t.current&&t.current.setErrorMessage("Parser: In '"+S.substring(V)+"', cannot specify multiple endif tokens on one line.");continue}if(ne.text+=S.substring(ce,B),0===ne.children.length&&""===ne.condition.trim()&&""===ne.text.trim()||F.children.push(ne),null===F.parent)return null===(le=t.current)||void 0===le||le.setEntries({}),void(t.current&&t.current.setErrorMessage("Parser: an extra endif token was encountered (endif #"+W+")."));F=F.parent}}if(A.length>0){var he=A[A.length-1].item1,fe=S.substring(he).indexOf("\n");if(-1!==fe){var de=new re;de.parent=I,de.text+=S.substring(he+fe),0===de.children.length&&""===de.condition.trim()&&""===de.text.trim()||I.children.push(de)}}else I.text+=S;o[b[j]]=I}null===(r=t.current)||void 0===r||r.setEntriesWithFork(o,null!==n&&void 0!==n?n:"")}(this.props.storyToParse,this.interpreterRef)}catch(e){this.interpreterRef.current&&"string"===typeof e?this.interpreterRef.current.setErrorMessage(e):this.interpreterRef.current&&e instanceof Error?this.interpreterRef.current.setErrorMessage(e.message):(console.error("Reference to interpreter element was undefined. An additional error follows."),console.error(e))}}},{key:"render",value:function(){return Object(r.jsx)(ne.a,{ref:this.interpreterRef})}}]),n}(i.Component),ce=Object(a.b)((function(e){return{storyToParse:e.viewEdit.storyToParse}}))(le),he=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){document.body.style.margin="0px"}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(J,{}),Object(r.jsxs)("div",{className:L.l,children:[Object(r.jsx)("div",{id:Y.b,className:L.j,children:Object(r.jsx)(te,{})}),Object(r.jsx)("div",{id:Y.k,style:Object(L.k)(this.props.theme.theme),children:Object(r.jsx)(ce,{})})]})]})}}]),n}(i.Component),fe=Object(a.b)((function(e){return{theme:e.settings.theme}}))(he),de=n(105),pe=Object(O.c)({persistence:z,settings:S,viewEdit:_.d}),ve=Object(O.d)(pe,void 0,Object(O.a)(de.a));Object(u.a)(),function(){var e=Object.keys(X),t={};e.forEach((function(e){t[e]=X[e].shortcuts.map((function(e){return{shortcut:e,step:0}}))})),window.addEventListener("keypress",(function(n){e.forEach((function(e){for(var r=t[e],i=0;i<r.length;i++){var s=r[i];if(!0!==s.shortcut.disabled){var o=void 0!==s.shortcut.customSequence?s.shortcut.customSequence:s.shortcut.originalSequence;if(0!==o.length)if(o[s.step].key!==n.key.toUpperCase()||Boolean(o[s.step].usesAlt)!==n.altKey||Boolean(o[s.step].usesCtrl)!==n.ctrlKey||Boolean(o[s.step].usesShift)!==n.shiftKey)s.step=0;else{if(s.step===o.length-1)return $(e),void(s.step=0);s.step++}}}}))}))}();var me=Object(r.jsx)(l.c,{children:Object(r.jsx)(l.a,{path:"/",component:fe})});o.a.render(Object(r.jsx)(a.a,{store:ve,children:Object(r.jsx)(c.a,{basename:"/",children:me})}),document.getElementById("root"))},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(10),i=n(13),s=function(){function e(t){Object(r.a)(this,e),this.strForm=void 0,this.value=void 0,this.strForm=t.toString(),this.value=t}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(52),i=n(2),s=Object(r.a)(),o={dark:{localizedName:s.ThemeDark,theme:Object(i.z)({palette:{black:"#ffffff",neutralDark:"#ececec",neutralLight:"#515151",neutralLighter:"#222222",neutralLighterAlt:"#090909",neutralPrimary:"#dcdcdc",neutralPrimaryAlt:"#bbbbbb",neutralQuaternary:"#d0d0d0",neutralQuaternaryAlt:"#dadada",neutralSecondary:"#9f9f9f",neutralTertiary:"#666666",neutralTertiaryAlt:"#ffffff",themeDark:"#ebebeb",themeDarkAlt:"#dbdbdb",themeDarker:"#ffffff",themeLight:"#3f3f3f",themeLighter:"#212121",themeLighterAlt:"#000000",themePrimary:"#bfbfbf",themeSecondary:"#868686",themeTertiary:"#5a5a5a",white:"#000000"}})},light:{localizedName:s.ThemeLight,theme:Object(i.z)({palette:{black:"#000000",neutralDark:"#131313",neutralLight:"#aeaeae",neutralLighter:"#dddddd",neutralLighterAlt:"#f6f6f6",neutralPrimary:"#232323",neutralPrimaryAlt:"#444444",neutralQuaternary:"#2f2f2f",neutralQuaternaryAlt:"#252525",neutralSecondary:"#606060",neutralTertiary:"#999999",neutralTertiaryAlt:"#000000",themeDark:"#141414",themeDarkAlt:"#242424",themeDarker:"#000000",themeLight:"#c0c0c0",themeLighter:"#dedede",themeLighterAlt:"#ffffff",themePrimary:"#404040",themeSecondary:"#797979",themeTertiary:"#a5a5a5",white:"#ffffff"}})}}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return d}));var r="editor-inputfield",i="editor-wrapper",s="runner-content",o="runner-inputfield",a="runner-log",u="runner-options",l="runner-option-restart",c="runner-wrapper",h="runner-input",f="runner-option",d="runner-output"},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(10),i=n(13),s=function(){function e(t,n){Object(r.a)(this,e),this.strForm=void 0,this.value=void 0,this.strForm=t,this.value=n}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(10),i=n(13),s=function(){function e(t,n,i){Object(r.a)(this,e),this.strForm=void 0,this.numArgs=void 0,this.function=void 0,this.strForm=t,this.numArgs=n,this.function=i}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.numArgs===e.numArgs&&this.function===e.function}}]),e}()},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=Number.MIN_SAFE_INTEGER,i=function(){return(++r).toString()}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=/^-?(\d+\.?\d*|\d*\.?\d+)$/g},42:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c}));var r=n(33),i=n(37),s={rerenderStory:Object(i.a)(),saveAndRunStory:Object(i.a)(),updateStory:Object(i.a)()},o={type:s.rerenderStory},a=function(e){return function(t){e(function(e){return{story:e,type:s.updateStory}}(t))}},u=function(e){return function(t){e(function(e){return{story:e,type:s.saveAndRunStory}}(t))}},l=function(e){return function(){e(o)}},c=Object(r.c)({story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===s.updateStory||t.type===s.saveAndRunStory?t.story:e},storyRerenderToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===s.rerenderStory?e+1:e},storyToParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===s.saveAndRunStory?t.story:e}})},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={"en-us":{ApplicationName:"Joshua Tree",ApplicationNameAndVersion:function(e,t){return"".concat(e," version ").concat(t)},LanguageCodeName:"English (United States)",MenuFile:"File",MenuFileNew:"New",MenuFileOpen:"Open",MenuFileSave:"Save",ThemeDark:"Dark",ThemeLight:"Light",ThemeDropdownText:function(e){return"".concat(e," theme")},TipLanguage:"Language",TipNavigateCommandBar:"Use left and right arrow keys to navigate between commands.",TipTheme:"Theme"}}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),i=n(13),s=n(39),o=function(){function e(t){if(Object(r.a)(this,e),this.strForm=void 0,this.value=void 0,"string"===typeof t){if(this.strForm=t,!s.a.test(t))throw new Error("Parser: The expression '"+t+"' is not a valid number.");this.value=parseFloat(t)}else this.strForm=t.toString(),this.value=t}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},52:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var r=n(91),i=n(49),s=function(){var e="en-us";if(void 0!==navigator.languages){var t,n=Object(r.a)(navigator.languages);try{for(n.s();!(t=n.n()).done;){var i=t.value.toLowerCase().split("-"),s=i[0],o=i.length>1?i[1]:"";if("".concat(s,"-").concat(o)in a){e="".concat(s,"-").concat(o);break}if("".concat(s)in a){e="".concat(s);break}}}catch(l){n.e(l)}finally{n.f()}}else{var u=navigator.language.toLowerCase();u in a&&(e=u)}return a[e]},o=function(e){return i.a[a[e||s()]]},a={en:"en-us","en-us":"en-us"}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return m})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return y})),n.d(t,"m",(function(){return O})),n.d(t,"o",(function(){return w})),n.d(t,"n",(function(){return k})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return j}));var r=n(20),i=n(2),s=function(){return{root:{alignSelf:"stretch"}}},o=function(e){return{root:{borderColor:e.semanticColors.bodyText,borderRightStyle:"solid",borderWidth:"1px"}}},a=function(e,t){return{caretDownWrapper:Object(i.B)({alignSelf:"center",position:"relative",right:"20px",width:"0px"},null===t||void 0===t?void 0:t.caretDownWrapper),dropdown:Object(i.B)({display:"flex",height:"100%"},null===t||void 0===t?void 0:t.dropdown),dropdownItem:Object(i.B)(Object(r.a)({},e.fonts.large),null===t||void 0===t?void 0:t.dropdownItem),dropdownItemSelected:Object(i.B)(Object(r.a)({},e.fonts.large),null===t||void 0===t?void 0:t.dropdownItemSelected),root:Object(i.B)({alignSelf:"stretch"},null===t||void 0===t?void 0:t.root),title:Object(i.B)({height:"100%",border:"0",borderRadius:"unset",display:"flex",alignItems:"center"},null===t||void 0===t?void 0:t.title)}},u=function(e,t){return t?Object(i.B)(e.fonts.large,{paddingLeft:"12px",paddingRight:"12px",borderColor:e.semanticColors.bodyText,borderRightStyle:"solid",borderWidth:"1px"}):Object(i.B)(e.fonts.large,{paddingLeft:"12px",paddingRight:"12px"})},l={root:{alignItems:"center",height:"4vh",padding:"0px"},primarySet:{alignSelf:"stretch"},secondarySet:{alignSelf:"stretch"}},c=function(e){return{color:e.semanticColors.bodyText,backgroundColor:e.semanticColors.bodyStandoutBackground,borderColor:e.semanticColors.bodyText,borderStyle:"solid",borderWidth:"1px",height:"90vh",padding:0,resize:"none",width:"100%"}},h="Calibri; Times New Roman; Courier New; sans-serif",f=Object(i.B)({display:"none"}),d={root:{marginRight:"8px"}},p=Object(i.B)({height:"90vh",margin:"0 4px 0 0",width:"50vw"}),v=function(e){return{borderColor:e.semanticColors.bodyText,borderStyle:"solid",borderWidth:"1px",margin:"0 0 0 4px",overflowY:"scroll",width:"50vw"}},m=Object(i.B)({display:"flex",alignItems:"stretch"}),g=function(e){return{backgroundColor:e.semanticColors.bodyBackground,color:e.semanticColors.bodyText,alignSelf:"stretch",flexShrink:1,fontSize:"16px",height:"32px"}},b=Object(i.B)({flexGrow:1,margin:"4px"}),y=Object(i.B)({display:"flex",flexDirection:"column",height:"90vh"}),O=function(e){return{color:e.semanticColors.warningText,fontFamily:h,fontSize:"16px",fontWeight:400}},w=function(e){return{color:e.semanticColors.primaryButtonText,fontFamily:h,fontSize:"16px",fontWeight:400}},k=function(e){return{color:e.semanticColors.primaryButtonTextHovered}},x=function(e){return{color:e.semanticColors.bodyText,fontFamily:h,fontSize:e.fonts.large.fontSize,fontWeight:400}},j=function(e){return{backgroundColor:e.semanticColors.bodyStandoutBackground}}}},[[138,1,2]]]);
//# sourceMappingURL=main.74fb9958.chunk.js.map