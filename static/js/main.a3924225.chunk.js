(this["webpackJsonpjoshua-tree"]=this["webpackJsonpjoshua-tree"]||[]).push([[0],{108:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return q}));var n,i=r(57),o=r(18),a=r(9),s=r(14),u=r(35),l=r(34),c=r(4),h=r(0),f=r(19),d=r(27),p=r(43),g=r(15),y=r(20),m=r(79),v=r(7),b=r(119),S=r(40),O=r(115),k=r(16),j=r(31),w=r(29),x=r(5),L=r(75),T=r(76),I=r(109),F=r(45),E=r(114),D=r(110),A=Number.MIN_SAFE_INTEGER,P=/\s+/gm,M=/^[0-9|a-f]+$/g,R=/[0-9]/g,C=/\\at|\\lb|\\rb|\\n|\\s/g,N=/\\at|\\n|\\s/g,W=new O.a,z=function(e){Object(u.a)(h,e);var r=Object(l.a)(h);function h(t){var e;return Object(a.a)(this,h),(e=r.call(this,t)).actions=[],e.content=[],e.contentCached=[],e.currentOptionStyles={},e.currentOptionHighlightStyles={},e.currentOutputStyles={},e.entries={},e.errorMessage="",e.fork="",e.log=[],e.logCached=[],e.options=[],e.optionsCached=[],e.stopEvaluation=!1,e.textboxHidden=!0,e.timers=[],e.variables={},e.variablesPrev={},e.getRestartLink=function(){return e.addOption(e.props.authorStorySettings.authorStoryStrings.restartLinkText||"restart",e.restartGame,f.h)},e.onTextboxKeyPress=function(t){13===t.charCode&&(e.actions.forEach((function(e){e(t.currentTarget.value)})),t.currentTarget.value="")},e.restartGame=function(){e.refreshInterpreter();var t=Object.keys(e.entries);e.setFork(t[0])},e.refreshInterpreter(),e}return Object(s.a)(h,[{key:"shouldComponentUpdate",value:function(t){var e=t;return n&&e.authorStorySettings.authorStoryRunnerOptions.randomSeed===n.seed||(n=new I.a(e.authorStorySettings.authorStoryRunnerOptions.randomSeed)),this.contentCached=this.content.map((function(t){return t(e)})),this.logCached=this.log.map((function(t){return t(e)})),this.optionsCached=this.options.map((function(t){return t(e)})),!0}},{key:"addInput",value:function(t,e){return function(r){var n=e?r.authorStorySettings.authorStoryStrings.inputOptionPrefixText||"\u2022 ":r.authorStorySettings.authorStoryStrings.inputTextboxPrefixText||"\u2192 ";return Object(c.jsx)("p",{style:Object(F.b)(r.theme,r.debugging?{}:r.playerStorySettings.playerStoryInputStyles,{},r.authorStorySettings.authorStoryInputStyles,F.a.input),children:n+t},"".concat(f.d,"-").concat(A++))}}},{key:"addOption",value:function(t,e,r,n){var i=this,a=Object.assign({},this.currentOptionStyles),s=this.props,u="function"===typeof e?e:function(){s.authorStorySettings.authorStoryRunnerOptions.hideLog||s.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(s.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||i.content.push(i.addInput(t,!0)),i.setFork(e)};return function(e){var i=Object(F.b)(e.theme,e.debugging?{}:e.playerStorySettings.playerStoryOptionStyles,a,e.authorStorySettings.authorStoryOptionStyles,F.a.option),s=Object(F.b)(e.theme,e.debugging?{}:e.playerStorySettings.playerStoryOptionHighlightStyles,a,e.authorStorySettings.authorStoryOptionHighlightStyles,F.a.optionHighlight);return Object(c.jsx)(m.a,{onClick:u,styles:{root:Object(o.a)(Object(o.a)({},i),{},{border:"none",display:n?"inline":"block",fontSize:"16px",height:"unset",marginBottom:n?"0px":"4px",marginTop:n?"0px":"4px",paddingLeft:"0px",marginLeft:"0px"}),rootFocused:Object(o.a)({},s),rootHovered:Object(o.a)({},s),label:{marginLeft:"0px"}},text:t},r||"".concat(f.g,"-").concat(A++))}}},{key:"addOutput",value:function(t){var e=Object.assign({},this.currentOutputStyles);return function(r){var n=Object(F.b)(r.theme,r.debugging?{}:r.playerStorySettings.playerStoryOutputStyles,e,r.authorStorySettings.authorStoryOutputStyles,F.a.output);return Object(c.jsx)("span",{style:n,children:t},"".concat(f.j,"-").concat(A++))}}},{key:"loadFile",value:function(){}},{key:"loadFork",value:function(){var t;if(this.updateLog(),this.content=[],this.options=[],this.textboxHidden=!0,this.timers.forEach((function(t){clearTimeout(t)})),this.timers=[],this.actions=[],void 0!==(t=this.entries[this.fork])){this.variablesPrev={};for(var e=Object.keys(this.variables),r=0;r<e.length;r++)this.variablesPrev[e[r]]=this.variables[e[r]];this.preorderProcess(t,""),this.stopEvaluation||(this.visitFork(),this.refreshInterpreterGui())}else this.setErrorMessage("Interpreter: fork '"+this.fork+"' not found.")}},{key:"processHeaderOptions",value:function(t){var e=this.props;this.refreshInterpreter();for(var r=t.split("\n"),n=0;n<r.length;n++){for(var i=r[n],a=i.split(" "),s="",u=1;u<a.length;u++)s+=a[u]+" ";if(s=s.trim(),i.startsWith("link-style-text"))e.dispatchSetTempStoryRunnerOptions(Object(o.a)(Object(o.a)({},e.currentStorySettings.currentRunnerSettings),{},{discreteInlineLinks:!0}));else if(i.startsWith("option-default-disable"))e.dispatchSetTempStoryRunnerOptions(Object(o.a)(Object(o.a)({},e.currentStorySettings.currentRunnerSettings),{},{hideRestartLink:!0}));else if(i.startsWith("option-color")||i.startsWith("option-hover-color")||i.startsWith("background-color")){var l="";M.test(s)?6!==s.length&&3!==s.length?this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):3!==s.length&&6!==s.length||(l=s.substring(0,s.length)):this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),i.startsWith("option-color")?(this.currentOptionStyles.colorDark=l,this.currentOptionStyles.colorLight=l):i.startsWith("option-color-light")?this.currentOptionStyles.colorLight=l:i.startsWith("option-color-dark")?this.currentOptionStyles.colorDark=l:i.startsWith("option-hover-color")?(this.currentOptionHighlightStyles.colorDark=l,this.currentOptionHighlightStyles.colorLight=l):i.startsWith("option-hover-color-light")?this.currentOptionHighlightStyles.colorLight=l:i.startsWith("option-hover-color-dark")?this.currentOptionHighlightStyles.colorDark=l:i.startsWith("background-color")?e.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},e.authorStorySettings.authorStoryRunnerStyles),{},{colorDark:l,colorLight:l,type:"plain"})}):i.startsWith("background-color-light")?e.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},e.authorStorySettings.authorStoryRunnerStyles),{},{colorLight:l,type:"plain"})}):i.startsWith("background-color-dark")&&e.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},e.authorStorySettings.authorStoryRunnerStyles),{},{colorDark:l,type:"plain"})})}else if(i.startsWith("output-font-size")||i.startsWith("option-font-size")){if(!S.a.test(s)){this.setErrorMessage("Interpreter: In line '"+i+"', a number must be specified after the option.");continue}var c=parseFloat(s);if(c<=0){this.setErrorMessage("Interpreter: In line '"+i+"', numbers must be greater than zero.");continue}i.startsWith("output-font-size")?this.currentOutputStyles.fontSize=c.toString():i.startsWith("option-font-size")&&(this.currentOptionStyles.fontSize=c.toString())}else i.startsWith("option-font")?this.currentOptionStyles.font="".concat(s,"; ").concat(g.g):i.startsWith("output-font")&&(this.currentOutputStyles.font="".concat(s,"; ").concat(g.g))}}},{key:"refreshInterpreterGui",value:function(){this.refreshInterpreterGuiStyles(),this.props.dispatchRerenderStory()}},{key:"render",value:function(){this.refreshInterpreterGuiStyles();var t=this.props,e=0!==this.options.length||t.authorStorySettings.authorStoryRunnerOptions.hideRestartLink?[]:[this.getRestartLink()],r=[Object(c.jsx)("div",{id:f.f,children:this.logCached},f.f),Object(c.jsx)("div",{id:f.c,children:this.contentCached},f.c),Object(c.jsxs)("div",{id:f.i,style:{marginTop:"24px"},children:[this.optionsCached,e]},f.i)],n=this.props.debugging&&""!==this.errorMessage?Object(c.jsx)(b.a,{messageBarType:v.a.error,children:this.errorMessage}):void 0,i=this.textboxHidden?void 0:Object(c.jsx)(E.a,{autoComplete:"nah",name:"textfield",id:f.e,onKeyPress:this.onTextboxKeyPress,type:"text"},f.e);return Object(c.jsxs)("div",{className:g.n,children:[Object(c.jsx)(D.Scrollbars,{children:Object(c.jsx)("div",{className:g.m,children:r})}),n,i]})}},{key:"saveFile",value:function(){}},{key:"setEntries",value:function(t){this.entries=t}},{key:"setEntriesWithFork",value:function(t,e){this.content=[],this.log=[],this.options=[],this.entries=t,this.errorMessage="";var r=Object.keys(this.entries);0===r.length?this.setErrorMessage("Interpreter: cannot play story. It contains no forks. Use @ at the beginning of a line to denote an fork."):""!==e&&r.includes(e)?this.setFork(e):this.setFork(r[0])}},{key:"setErrorMessage",value:function(t){this.errorMessage=null!==t&&void 0!==t?t:"",this.refreshInterpreterGui()}},{key:"setFork",value:function(t){this.fork=t,this.stopEvaluation=!1,this.loadFork()}},{key:"escapeText",value:function(t,e){return e?t.replace(C,(function(t){switch(t){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\";case"\\lb":return"{";case"\\rb":return"}"}return t})):t.replace(N,(function(t){switch(t){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\"}return t}))}},{key:"preorderProcess",value:function(t,e){if(this.processIf(t,e)){this.processText(t);for(var r=0;r<t.children.length;r++){if(this.stopEvaluation)return;this.preorderProcess(t.children[r],e)}}}},{key:"processIf",value:function(e,r){var n=this,i=this.props;if(""===e.condition.trim())return!0;var o=e.condition.substring(2).trim(),a=o.split(" ");if(0===a.length)return this.setErrorMessage("The line if '"+o+"' is incorrectly formatted."),!1;if(a.length>1&&"timer"===a[0]&&"is"===a[1]){if(a.length<2)return this.setErrorMessage("The timer must be set with a time specified in seconds."),!1;if(!S.a.test(a[2]))return this.setErrorMessage("Interpreter: In line '"+o+"', the third word must be numeric."),!1;var s=parseFloat(a[2]);if(isNaN(s)||!isFinite(s))return this.setErrorMessage("Interpreter: In line '"+o+"', the time must be numeric and not too large."),!1;if(s<=0)return this.setErrorMessage("Interpreter: In line '"+o+"', the time must be positive and non-zero."),!1;var u=t.setTimeout((function(){n.processText(e);for(var t=0;t<e.children.length;t++)n.preorderProcess(e.children[t],r)}),1e3*s);return this.timers.push(u),!1}if(a.length>1&&"text"===a[0]&&("is"===a[1]||"!is"===a[1]||"has"===a[1]||"!has"===a[1]||"pick"===a[1])){this.textboxHidden=!1;for(var l="",c=2;c<a.length;c++)l+=a[c]+" ";if(""===(l=this.escapeText(l.toLowerCase().trim(),!0))&&this.setErrorMessage("Interpreter: In the line 'if "+o+"', at least one word to look for must be specified after 'pick'."),"pick"===a[1]){for(var h=l.split(","),f=0;f<h.length;f++)h[f]=h[f].replace("\\c",",").trim();if(""===r)this.actions.push((function(t){for(var r=!1,o=0;o<h.length;o++){new RegExp("\\b"+h[o]+"\\b").test(t.toLowerCase().trim())&&(r=!0)}if(r){i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(t)),n.processText(e);for(var a=0;a<e.children.length;a++)n.preorderProcess(e.children[a],t);n.refreshInterpreterGui()}}));else{for(var d=!1,p=0;p<h.length;p++){new RegExp("\\b"+h[p]+"\\b").test(r.toLowerCase().trim())&&(d=!0)}if(!d)return!1;this.processText(e);for(var g=0;g<e.children.length;g++)this.preorderProcess(e.children[g],r)}}else if(a[1].endsWith("is")){if(""===r)this.actions.push((function(t){var r=t.toLowerCase().trim();if("is"===a[1]&&r===l||"!is"===a[1]&&r!==l){i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(t)),n.processText(e);for(var o=0;o<e.children.length;o++)n.preorderProcess(e.children[o],t)}n.refreshInterpreterGui()}));else if("is"===a[1]&&r===l||"!is"===a[1]&&r!==l){this.processText(e);for(var y=0;y<e.children.length;y++)this.preorderProcess(e.children[y],r)}}else if(a[1].endsWith("has")){for(var m=l.split(","),v=0;v<m.length;v++)m[v]=m[v].replace("\\c",",").trim();if(""===r)this.actions.push((function(t){for(var r=0;r<m.length;r++){var o=new RegExp("\\b"+m[r]+"\\b").test(t.toLowerCase().trim());if("has"===a[1]&&!o||"!has"===a[1]&&o)return}i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(t)),n.processText(e);for(var s=0;s<e.children.length;s++)n.preorderProcess(e.children[s],t);n.refreshInterpreterGui()}));else{for(var b=0;b<m.length;b++){var O=new RegExp("\\b"+m[b]+"\\b").test(r);if("has"===a[1]&&!O||"!has"===a[1]&&O)return!1}this.processText(e);for(var x=0;x<e.children.length;x++)this.preorderProcess(e.children[x],r)}}return!1}W.optIncludeUnknowns=!0,W.resetTokens();var L=Object.keys(this.variables),T=this.variables["visited"+this.fork];W.addIdentifier(new w.a("visited",T));for(var I=0;I<L.length;I++){var F=L[I],E=this.variables[L[I]];W.addIdentifier(new w.a(F,E))}W.addFunction(new j.a("exists",1,(function(t){return t[0]instanceof k.a?t[0]:new k.a(!(t[0]instanceof w.a))})));var D="";try{D=W.eval(a.join(" "))}catch(A){return A instanceof Error?this.setErrorMessage(A.message):this.setErrorMessage(A),!1}return"true"===D||"false"===D?"true"===D:(this.setErrorMessage("Interpreter: In the line 'if "+a.join(" ")+"', the expression must be boolean (true or false), but was null instead."),!1)}},{key:"processText",value:function(t){for(var e=this,r=t.text;r.length>0;){var i=r.indexOf("\n"),o=void 0,a=(o=i>=0?r.substring(0,i):r).split(" ");if(""===o.trim())r=r.substring(i+1);else if(o.includes("@@")){var s=o.substring(o.indexOf("@")+2).replace(P,"").toLowerCase(),u=this.escapeText(o.substring(0,o.indexOf("@")).trim(),!1);""===s?this.setErrorMessage("Interpreter: there was no fork name given to option '"+u+"'."):""===u.trim()?this.setErrorMessage("Interpreter: the option linking to '"+s+"' has no displayable text specified."):void 0===this.entries[s]?this.setErrorMessage("Interpreter: the fork in the option '"+u+"@"+s+"' doesn't exist."):this.content.push(this.addOption(u,s,void 0,!0)),r=r.substring(r.indexOf("\n")+1)}else if(o.includes("@")){var l=o.indexOf("@"),c=o.substring(l+1).replace(P,"").toLowerCase(),h=this.escapeText(o.substring(0,l).trim(),!1);""===c?this.setErrorMessage("Interpreter: there was no fork name given to option '"+h+"'."):""===h.trim()?this.setErrorMessage("Interpreter: the option linking to '"+c+"' has no displayable text specified."):this.options.push(this.addOption(h,c)),r=r.substring(r.indexOf("\n")+1)}else if(o.includes("{")){var f=r.indexOf("{"),d=r.indexOf("}"),p=r.substring(f,d+1);if(d<f){this.setErrorMessage("Interpreter: In the line '"+o+"', right braces should follow left braces. "),r=r.substring(r.indexOf("\n")+1);continue}p.includes("***}")?this.currentOutputStyles.fontStyle="ib":p.includes("**}")?this.currentOutputStyles.fontStyle="b":p.includes("*}")?this.currentOutputStyles.fontStyle="i":this.currentOutputStyles.fontStyle=void 0,p=this.escapeText(p.replace("{","").replace("***}","").replace("**}","").replace("*}","").replace("}",""),!0),this.content.push(this.addOutput(p)),r=r.substring(0,f)+r.substring(d+1,r.length)}else if(r.startsWith("set")){W.optIncludeUnknowns=!1,W.resetTokens();for(var g=Object.keys(this.variables),y=0;y<g.length;y++){var m=g[y],v=this.variables[g[y]];("number"===typeof v||"boolean"===typeof v)&&W.addIdentifier(new w.a(m,v))}W.addFunction(new j.a("random",1,(function(t){if(t[0]instanceof x.a){var e=t[0];return new x.a(n.nextNumber()*e.value+1)}return null})));var b=a.indexOf("=");-1!==b?function(){var t=a.slice(1,b),r=a.slice(b+1),n="",i=null;if(1===t.length){try{n=W.eval(r.join(" "))}catch(s){s instanceof Error?e.setErrorMessage("Interpreter: In the line '"+o+"', "+s.message):e.setErrorMessage("Interpreter: In the line '"+o+", "+s)}"true"===n||"false"===n?i="true"===n:S.a.test(n)?i=parseFloat(n):e.setErrorMessage("Interpreter: In the line '"+o+"', the expression "+r.join(" ")+" should be a number, but "+n+" was computed instead."),g.includes(t[0])?e.variables[t[0]]=i:R.test(t[0][0])||W.getTokens().some((function(e){return e.strForm===t[0]}))?e.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+t[0]+"' is a name used for math or is a number."):e.variables[t[0]]=i}else e.setErrorMessage("Interpreter: In the line '"+o+", the phrase "+t.join(" ")+" must be a variable name without spaces.")}():function(){var t=a.slice(1),r="",n=null;if(t.length>0)if(1===t.length)if(t[0].startsWith("!")){var i=t[0].substring(1);g.includes(i)?e.variables[i]=!1:t.length>0&&R.test(t[0][0])||W.getTokens().some((function(t){return t.strForm===i}))?e.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+i+"' is a number or is used for math."):e.variables[i]=!1}else g.includes(t[0])?e.variables[t[0]]=!0:t.length>0&&R.test(t[0][0])||W.getTokens().some((function(e){return e.strForm===t[0]}))?e.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+t[0]+"' is a number or is used for math."):e.variables[t[0]]=!0;else if(g.includes(t[0])){try{r=W.eval(t.join(" "))}catch(s){s instanceof Error?e.setErrorMessage("Interpreter: In the line '"+o+"', "+s.message):e.setErrorMessage("Interpreter: In the line '"+o+"', "+s)}"true"===r||"false"===r?n="true"===r:S.a.test(r)?n=parseFloat(r):e.setErrorMessage("Interpreter: In the line '"+o+"', the expression "+t.join(" ")+" should be a number, but "+r+" was computed instead."),e.variables[t[0]]=n}else e.setErrorMessage("Interpreter: In the line '"+o+"', the variable "+t[0]+" doesn't exist yet.");else e.setErrorMessage("Interpreter: In the line '"+o+"', you need to provide a variable name to set, using syntax like set a, set !a, or a mathematical expression.")}(),r=i>=0?r.substring(r.indexOf("\n")+1):""}else if(r.startsWith("get"))2===a.length?void 0!==this.variables[a[1]]?this.content.push(this.addOutput(this.variables[a[1]].toString())):this.setErrorMessage("Interpreter: In the line '"+o+"', variable "+a[1]+" does not exist."):this.setErrorMessage("Interpreter: In the line '"+o+"', only one word can follow 'get'."),r=i>=0?r.substring(r.indexOf("\n")+1):"";else if(r.startsWith("goto")){var O=o.substring(4).replace(P,"").toLowerCase();if(void 0!==this.entries[O])return this.visitFork(),this.setFork(O),void(this.stopEvaluation=!0);this.setErrorMessage("Interpreter: In the line '"+r+"', cannot navigate to fork '"+O+"' because it does not exist."),r=i>=0?r.substring(r.indexOf("\n")+1):""}else if(r.startsWith("color")){var k=o.substring(5).trim().toLowerCase();M.test(k)?6!==k.length&&3!==k.length?this.setErrorMessage("Interpreter: In the line '"+o+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):(this.currentOutputStyles.colorDark=k,this.currentOutputStyles.colorLight=k):this.setErrorMessage("Interpreter: In the line '"+o+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),r=i>=0?r.substring(r.indexOf("\n")+1):""}else this.setErrorMessage("Interpreter: In the line '"+o+"', unexpected symbols encountered. Ensure all output text is wrapped in single braces and there are no extra braces inside."),r=r.substring(r.indexOf("\n")+1)}}},{key:"refreshInterpreter",value:function(){this.actions=[],this.content=[],this.currentOptionStyles={},this.currentOptionHighlightStyles={},this.currentOutputStyles={},this.errorMessage="",this.fork="",this.log=[],this.options=[],this.timers=[],this.variables={},this.variablesPrev={},this.refreshInterpreterGuiStyles()}},{key:"refreshInterpreterGuiStyles",value:function(){var t=this.props,e=document.getElementById(f.k);e&&("plain"===t.playerStorySettings.playerStoryRunnerStyles.background.type?e.style.backgroundColor=t.theme.themeType===y.a.Light?t.playerStorySettings.playerStoryRunnerStyles.background.colorLight||t.theme.theme.semanticColors.bodyBackground:t.playerStorySettings.playerStoryRunnerStyles.background.colorDark||t.theme.theme.semanticColors.bodyBackground:"plain"===t.authorStorySettings.authorStoryRunnerStyles.background.type&&(e.style.backgroundColor=t.theme.themeType===y.a.Light?t.authorStorySettings.authorStoryRunnerStyles.background.colorLight||t.theme.theme.semanticColors.bodyBackground:t.authorStorySettings.authorStoryRunnerStyles.background.colorDark||t.theme.theme.semanticColors.bodyBackground))}},{key:"updateLog",value:function(){var t,e=this.props;e.authorStorySettings.authorStoryRunnerOptions.hideLog||0===e.authorStorySettings.authorStoryRunnerOptions.logLimit?this.log=[]:(t=this.log).push.apply(t,Object(i.a)(this.content))}},{key:"visitFork",value:function(){void 0===this.variables["visited"+this.fork]&&(this.variables["visited"+this.fork]=!0)}}]),h}(h.Component),q=Object(d.b)((function(t){return{authorStorySettings:t.authorStorySettings,currentStorySettings:t.currentRunnerSettings,playerStorySettings:t.playerStorySettings,renderTrigger:t.viewEdit.storyRerenderToken,theme:t.settings.theme}}),(function(t){return{dispatchRerenderStory:Object(p.a)(t),dispatchSetAuthorStoryRunnerStyles:Object(T.b)(t),dispatchSetTempStoryRunnerOptions:Object(L.b)(t)}}),void 0,{forwardRef:!0})(z)}).call(this,r(61))},109:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(9),i=r(14),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(n.a)(this,t),this.mt=new Array(t.N),this.mti=t.N+1,this.seed=null,this.seed=null==e?(new Date).getTime():e,this.init_genrand(this.seed)}return Object(i.a)(t,[{key:"init_genrand",value:function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<t.N;this.mti++){var r=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&r)>>>16)<<16)+1812433253*(65535&r)+this.mti,this.mt[this.mti]>>>=0}}},{key:"_nextInt32",value:function(){var e,r=[0,t.MATRIX_A];if(this.mti>=t.N){var n;for(this.mti===t.N+1&&this.init_genrand(5489),n=0;n<t.N-t.M;n++)e=this.mt[n]&t.UPPER_MASK|this.mt[n+1]&t.LOWER_MASK,this.mt[n]=this.mt[n+t.M]^e>>>1^r[1&e];for(;n<t.N-1;n++)e=this.mt[n]&t.UPPER_MASK|this.mt[n+1]&t.LOWER_MASK,this.mt[n]=this.mt[n+(t.M-t.N)]^e>>>1^r[1&e];e=this.mt[t.N-1]&t.UPPER_MASK|this.mt[0]&t.LOWER_MASK,this.mt[t.N-1]=this.mt[t.M-1]^e>>>1^r[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0}},{key:"nextInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._nextInt32();return null==t?e:e%(t[1]-t[0])+t[0]}},{key:"nextInt31",value:function(){return this._nextInt32()>>>1}},{key:"nextNumber",value:function(){return this._nextInt32()*(1/4294967295)}},{key:"nextNumber53",value:function(){return(67108864*(this._nextInt32()>>>5)+(this._nextInt32()>>>6))*(1/9007199254740992)}}]),t}();o.N=624,o.M=397,o.MATRIX_A=2567483615,o.UPPER_MASK=2147483648,o.LOWER_MASK=2147483647},115:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));var n,i,o,a=r(57),s=r(9),u=r(14);(i=n||(n={}))[i.left=0]="left",i[i.right=1]="right",function(t){t[t.left=0]="left",t[t.right=1]="right",t[t.both=2]="both"}(o||(o={}));var l=r(16),c=r(31),h=r(29),f=r(5),d=function(){function t(e,r,n,i,a){Object(s.a)(this,t),this.strForm=void 0,this.placement=void 0,this.assoc=void 0,this.prec=void 0,this.numArgs=void 0,this.function=void 0,this.placement=e,this.assoc=r,this.prec=n,e===o.both?this.numArgs=2:this.numArgs=1,this.strForm=i,this.function=a}return Object(u.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm&&this.placement===t.placement&&this.assoc===t.assoc&&this.prec===t.prec&&this.numArgs===t.numArgs&&this.function===t.function}}]),t}(),p=function(){function t(e){Object(s.a)(this,t),this.strForm=void 0,this.strForm=e}return Object(u.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm}}]),t}(),g=r(40),y=function(){function t(){var e=this;Object(s.a)(this,t),this.optRequireRightPars=!1,this.optIncludeUnknowns=!0,this.optUnknownDefault=null,this.Fsin=new c.a("sin",1,(function(t){if(t[0]instanceof f.a){var e=t[0];return new f.a(Math.sin(e.value))}return null})),this.Fcos=new c.a("cos",1,(function(t){if(t[0]instanceof f.a){var e=t[0];return new f.a(Math.cos(e.value))}return null})),this.Ftan=new c.a("tan",1,(function(t){if(t[0]instanceof f.a){var e=t[0];return new f.a(Math.tan(e.value))}return null})),this.Frnd=new c.a("round",1,(function(t){if(t[0]instanceof f.a){var e=t[0];return new f.a(Math.round(e.value))}return null})),this.Frnd2=new c.a("round",2,(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new f.a(Math.round(e.value/r.value)*r.value)}return null})),this.Add=new d(o.both,n.left,6,"+",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new f.a(e.value+r.value)}return null})),this.Sub=new d(o.both,n.left,6,"-",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new f.a(e.value-r.value)}return null})),this.Mlt=new d(o.both,n.left,7,"*",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new f.a(e.value*r.value)}return null})),this.Div=new d(o.both,n.left,7,"/",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];if(0===r.value)throw new Error("Parser: The expression ".concat(e.strForm," / ").concat(r.strForm," causes division by zero."));return new f.a(e.value/r.value)}return null})),this.Mod=new d(o.both,n.left,7,"%",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];if(0===r.value)throw new Error("Parser: The expression ".concat(e.strForm," % ").concat(r.strForm," causes division by zero."));return new f.a(e.value%r.value)}return null})),this.Neg=new d(o.right,n.right,8,"-",(function(t){if(t[1]instanceof f.a){var e=t[1];return new f.a(-e.value)}return null})),this.Exp=new d(o.both,n.right,8,"^",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new f.a(Math.pow(e.value,r.value))}return null})),this.Fac=new d(o.left,n.left,9,"!",(function(t){if(t[0]instanceof f.a){for(var e=t[0],r=e.value,n=1;e.value>1;)n*=r--;return new f.a(n)}return null})),this.Eq=new d(o.both,n.left,4,"=",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value===r.value)}if(t[0]instanceof l.a&&t[1]instanceof l.a){var n=t[0],i=t[1];return new l.a(n.value===i.value)}return null})),this.NotEq=new d(o.both,n.left,4,"!=",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value!==r.value)}if(t[0]instanceof l.a&&t[1]instanceof l.a){var n=t[0],i=t[1];return new l.a(n.value!==i.value)}return null})),this.Gt=new d(o.both,n.left,5,">",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value>r.value)}return null})),this.Gte=new d(o.both,n.left,5,">=",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value>=r.value)}return null})),this.Lt=new d(o.both,n.left,5,"<",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value<r.value)}return null})),this.Lte=new d(o.both,n.left,5,"<=",(function(t){if(t[0]instanceof f.a&&t[1]instanceof f.a){var e=t[0],r=t[1];return new l.a(e.value<=r.value)}return null})),this.LogNot=new d(o.right,n.left,3,"!",(function(t){if(t[1]instanceof l.a){var e=t[1];return new l.a(!e.value)}return null})),this.LogAnd=new d(o.both,n.left,1,"&",(function(t){if(t[0]instanceof l.a&&t[1]instanceof l.a){var e=t[0],r=t[1];return new l.a(e.value&&r.value)}return null})),this.LogOr=new d(o.both,n.left,2,"|",(function(t){if(t[0]instanceof l.a&&t[1]instanceof l.a){var e=t[0],r=t[1];return new l.a(e.value||r.value)}return null})),this.varFalse=new h.a("false",!1),this.varTrue=new h.a("true",!0),this.varPi=new h.a("pi",Math.PI),this.lPar=new p("("),this.rPar=new p(")"),this.argSep=new p(","),this.tokens=[],this.evalNoPar=function(t,r){for(var i=e.tokens.filter((function(t){return t instanceof d})),s=[],u="",h=0;h<t.length;h++)u+=t[h].strForm;if(e.optRequireRightPars&&t[0]===e.lPar&&t[t.length-1]!==e.rPar)throw new Error("Parser: The expression '"+u+"' is missing a right parenthesis at the end.");if(t.filter((function(t){return t===e.lPar||t===e.rPar})),0===t.length)throw new Error("Parser: an empty parenthesis group was provided; there is nothing to process within it.");if(null!==r){var p=e.split(t,e.argSep),g=[];if(r.numArgs!==p.length)throw new Error("Parser: In expression '"+u+"', the number of arguments for "+r.strForm+" should be "+r.numArgs+", but "+p.length+" arguments were given.");for(var y=0;y<p.length;y++){var m=e.evalNoPar(p[y],null);if(!(m[0]instanceof f.a||m[0]instanceof l.a))throw new Error("Parser: In expression '"+u+"', a boolean argument was provided instead of a decimal value.");g[y]=m[0]}var v=r.function(g);if(null===v)throw new Error("Parser: In expression '"+u+"', arguments do not match parameter types used.");return s.push(v),s}t[0]===e.Sub&&(t[0]=e.Neg);for(var b=1;b<t.length;b++)(t[b]===e.Sub&&t[b-1]instanceof d&&(t[b-1].numArgs>1||t[b-1]===e.Neg)||t[b-1]instanceof c.a)&&(t[b]=e.Neg);var S=t.filter((function(t){return t instanceof d})),O=0;S.forEach((function(t){t.prec>O&&(O=t.prec)}));for(var k=function(){for(var e=i.some((function(t){return O===t.prec&&t.assoc===n.right})),r=e?t.length-1:0;e&&r>=0||!e&&r<t.length;){if(t[r]instanceof d&&t[r].prec===O){var a,s,l,c=t[r],h=[null!==(a=t[r-1])&&void 0!==a?a:null,null!==(s=t[r+1])&&void 0!==s?s:null];if(null===h[0]&&(c.placement===o.both||c.placement===o.left))throw new Error("Parser: In '"+u+"', the '"+t[r].strForm+"' operator is missing a lefthand operand.");if(null===h[1]&&(c.placement===o.both||c.placement===o.right))throw new Error("Parser: In '"+u+"', the '"+t[r].strForm+"' operator is missing a righthand operand.");if(null===(l=c.function(h)))throw new Error("In expression '"+u+"', operand type(s) do not match operator.");t[r]=l,c.placement===o.left?(t.splice(r-1,1),r+=e?0:-1):c.placement===o.right?(t.splice(r+1,1),r+=e?1:0):c.placement===o.both&&(t.splice(r+1,1),t.splice(r-1,1),r+=e?0:-1)}e?r--:r++}S=t.filter((function(t){return t instanceof d}));var f=0;S.forEach((function(t){t.prec>f&&(f=t.prec)}))};O>0;)k();return s.push.apply(s,Object(a.a)(t)),s},this.resetTokens()}return Object(u.a)(t,[{key:"addFunction",value:function(t){this.tokens.push(new c.a(t.strForm.toLowerCase(),t.numArgs,t.function)),this.tokens=this.tokens.sort((function(t,e){return t.strForm<e.strForm?1:-1}))}},{key:"addIdentifier",value:function(t){this.tokens.push(new h.a(t.strForm.toLowerCase(),t.value)),this.tokens=this.tokens.sort((function(t,e){return t.strForm<e.strForm?1:-1}))}},{key:"addOperator",value:function(t){this.tokens.push(new d(t.placement,t.assoc,t.prec,t.strForm.toLowerCase(),t.function)),this.tokens=this.tokens.sort((function(t,e){return t.strForm<e.strForm?1:-1}))}},{key:"eval",value:function(t){return this.evalTokens(this.tokenize(t))}},{key:"evalTokens",value:function(t){for(var e=this,r=0;r<t.length;r++)if(t[r]instanceof h.a){var n=t[r];if(null!==n.value)"number"===typeof n.value?t[r]=new f.a(n.value):"boolean"===typeof n.value&&(t[r]=new l.a(n.value));else{if(null===this.optUnknownDefault)throw new Error("Parser: The identifier '"+t[r].strForm+"' is unknown and can't be computed.");t[r]=this.optUnknownDefault}}for(var i=this.tokens.filter((function(t){return t instanceof c.a}));;){var o,s,u=t.indexOf(this.rPar)+1,d=u>=1?u:t.length,p=t.slice(0,d).lastIndexOf(this.lPar),g=p>=0?p:0,y=t.slice(0,g),m=t.slice(d,t.length),v=t.slice(g,d),b=null;if(y[y.length-1]instanceof c.a&&function(){var t,r=y[y.length-1];y.splice(y.length-1,1);var n=1;v.forEach((function(t){t===e.argSep&&n++})),b=null!==(t=i.find((function(t){return t.numArgs===n&&t.strForm===r.strForm})))&&void 0!==t?t:null}(),(o=t=y).push.apply(o,Object(a.a)(this.evalNoPar(v,b))),(s=t).push.apply(s,Object(a.a)(m)),0===y.length&&0===m.length){for(var S="",O=0;O<t.length;O++)S+=t[O].strForm;return S}}}},{key:"getTokens",value:function(){return this.tokens}},{key:"removeToken",value:function(t){for(var e=this.tokens.length;e>0;e--)if(t.equals(this.tokens[e]))return this.tokens.splice(e,1),!0;return!1}},{key:"resetTokens",value:function(){this.tokens=[this.Exp,this.Neg,this.Mod,this.Div,this.Mlt,this.Sub,this.Add,this.LogNot,this.LogOr,this.LogAnd,this.Eq,this.Gt,this.Gte,this.Lt,this.Lte,this.NotEq,this.Fsin,this.Fcos,this.Ftan,this.Frnd,this.Frnd2,this.varFalse,this.varTrue,this.varPi,this.lPar,this.rPar,this.argSep],this.tokens=this.tokens.sort((function(t,e){return t.strForm<e.strForm?1:-1}))}},{key:"split",value:function(t,e){for(var r=[],n=[],i=0;i<t.length;i++)t[i]===e?r.push([].concat(n)):n.push(t[i]);return n.length>0&&r.push(n),r}},{key:"tokenize",value:function(t){var e=[],r="";if(""===t.trim())throw new Error("Parser: No expression provided.");t=t.replace(/\s/gm,"").toLowerCase();for(var n=null,i=null,o=null,a=0;a<t.length;a++){var s,u;if(r+=t[a],n=this.tokens.filter((function(t){return t.strForm===r}))[0],a!==t.length-1&&(null===(s=n)||void 0===s?void 0:s.strForm.length)>r.length)(null===(u=i=this.tokens.filter((function(t){return t.strForm===r}))[0])||void 0===u?void 0:u.strForm)===r&&(o=i,a===t.length-1&&(e.push(i),r="",o=null));else if(null===n||a===t.length-1&&n.strForm.length!==r.length)if(null!==o)a-=r.length-o.strForm.length,e.push(o),r="",o=null;else if(g.a.test(r)){var l=parseFloat(r);a!==t.length-1&&g.a.test(r+t[a+1])||(e.push(new f.a(l)),r="")}else{if(!this.optIncludeUnknowns)throw new Error("Parser: token '"+r+"' is not a recognized symbol.");e.push(new h.a(r[0].toString(),null)),a-=r.length-1,r=""}else e.push(n),r="",o=null}for(var c=[],y="",m=0;m<e.length;m++){if(m===e.length-1||e[m+1]instanceof d||e[m+1]instanceof p){if(""!==y){if(y+=e[m].strForm,this.optIncludeUnknowns){c.push(new h.a(y,null)),y="";continue}throw new Error("Parser: token '"+y+"' is not a recognized symbol.")}}else if(!(e[m]instanceof d||e[m]instanceof p)&&(""!==y||!(e[m]instanceof f.a))){y+=e[m].strForm;continue}e[m]===this.Neg?c.push(this.Sub):c.push(e[m])}return c}}]),t}()},12:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=Number.MIN_SAFE_INTEGER,i=function(){return(++n).toString()}},138:function(t,e,r){},15:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return h})),r.d(e,"h",(function(){return f})),r.d(e,"i",(function(){return d})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return g})),r.d(e,"l",(function(){return y})),r.d(e,"m",(function(){return m})),r.d(e,"n",(function(){return v}));var n=r(18),i=r(2),o=function(){return{root:{alignSelf:"stretch"}}},a=function(t){return{root:{borderColor:t.semanticColors.menuDivider,borderRightStyle:"solid",borderWidth:"1px"}}},s=function(t,e){return{caretDownWrapper:Object(i.D)({alignSelf:"center",position:"relative",right:"20px",width:"0px"},null===e||void 0===e?void 0:e.caretDownWrapper),dropdown:Object(i.D)({display:"flex",height:"100%"},null===e||void 0===e?void 0:e.dropdown),dropdownItem:Object(i.D)(Object(n.a)({},t.fonts.large),null===e||void 0===e?void 0:e.dropdownItem),dropdownItemSelected:Object(i.D)(Object(n.a)({},t.fonts.large),null===e||void 0===e?void 0:e.dropdownItemSelected),root:Object(i.D)({alignSelf:"stretch"},null===e||void 0===e?void 0:e.root),title:Object(i.D)({height:"100%",border:"0",borderRadius:"unset",display:"flex",alignItems:"center"},null===e||void 0===e?void 0:e.title)}},u=function(t,e){return e?Object(i.D)(t.fonts.large,{paddingLeft:"12px",paddingRight:"12px",borderColor:t.semanticColors.menuDivider,borderRightStyle:"solid",borderWidth:"1px"}):Object(i.D)(t.fonts.large,{paddingLeft:"12px",paddingRight:"12px"})},l={root:{alignItems:"center",height:"4vh",padding:"0px"},primarySet:{alignSelf:"stretch"},secondarySet:{alignSelf:"stretch"}},c=function(t){return{backgroundColor:t.semanticColors.bodyStandoutBackground,borderStyle:"solid",borderWidth:"1px",boxSizing:"border-box",color:t.semanticColors.bodyText,height:"90vh",padding:"0.25vh 0.25vw 0.25vh 0.25vw",resize:"none",width:"100%"}},h="Calibri; Times New Roman; Courier New; sans-serif",f=Object(i.D)({display:"none"}),d={root:{marginRight:"8px"}},p=Object(i.D)({boxSizing:"border-box",height:"90vh",margin:"0 0.25vw 0 0",width:"49.75vw"}),g=function(t){return{borderColor:t.semanticColors.menuDivider,borderStyle:"solid",borderWidth:"1px",boxSizing:"border-box",height:"90vh",margin:"0 0 0 0.25vw",width:"49.75vw"}},y=Object(i.D)({display:"flex",alignItems:"stretch",margin:"4px"}),m=Object(i.D)({paddingLeft:"0.5vw",paddingRight:"0.5vw",paddingTop:"0.5vw"}),v=Object(i.D)({display:"flex",flexDirection:"column",height:"90vh"})},16:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(9),i=r(14),o=function(){function t(e){Object(n.a)(this,t),this.strForm=void 0,this.value=void 0,this.strForm=e.toString(),this.value=e}return Object(i.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm&&this.value===t.value}}]),t}()},161:function(t,e,r){"use strict";r.r(e);var n=r(4),i=r(0),o=r(53),a=r.n(o),s=(r(138),r(27)),u=r(210),l=r(2),c=r(17),h=r(116),f=r(48),d=r.n(f),p=r(64),g=r(9),y=r(14),m=r(35),v=r(34),b=r(54),S=r(52),O=r(21),k=r(20),j=r(12),w={setLocale:Object(j.a)(),setTheme:Object(j.a)()},x=function(t){return{localeId:t,type:w.setLocale}},L=function(t){return function(){var e=Object(p.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.style.backgroundColor=r.theme.semanticColors.bodyBackground,t({theme:r,type:w.setTheme});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(t){return function(){var e=Object(p.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(x(r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=Object(O.c)({locale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.b)(),e=arguments.length>1?arguments[1]:void 0;return e.type===w.setLocale?e.localeId:t},theme:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.c[k.b.DefaultLight],e=arguments.length>1?arguments[1]:void 0;return e.type===w.setTheme&&t.theme!==e.theme.theme?(Object(l.B)(e.theme.theme),e.theme):t}}),F="JoshuaTree",E=function(t){if(t.persistence.userConsentProvided){var e=k.b.DefaultLight;Object.keys(k.c).forEach((function(r){k.c[r].localizedName===t.settings.theme.localizedName&&(e=r)}));var r={localeId:t.settings.locale,saveFormatVersion:1,theme:e};localStorage.setItem(F,JSON.stringify(r))}},D=function(){var t=localStorage.getItem(F);if(null===t)return null;var e={};try{e=JSON.parse(t)}catch(r){return null}return e.localeId&&e.theme&&e.saveFormatVersion?e:null},A={setCustomizationApplied:Object(j.a)(),setUserConsentProvided:Object(j.a)()},P=function(t){return function(e){t({consentProvided:e,type:A.setUserConsentProvided})}},M=Object(O.c)({customizationApplied:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===A.setCustomizationApplied?e.isApplied:t},userConsentProvided:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===A.setUserConsentProvided?e.consentProvided:t}}),R=r(15),C=r(18),N=r(120),W=r(113),z=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){return Object(g.a)(this,r),e.apply(this,arguments)}return Object(y.a)(r,[{key:"render",value:function(){var t=this.props.dropdown,e=t.styles,r=Object(N.a)(t,["styles"]),i=e;return Object(n.jsx)(W.a,Object(C.a)(Object(C.a)({},r),{},{styles:Object(R.c)(this.props.theme.theme,i)}))}}]),r}(i.Component),q=Object(s.b)((function(t){return{theme:t.settings.theme}}))(z),H=r(43),B=r(112),_=r(118);var K,U=i.createRef(),G=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){var t;Object(g.a)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).applyLocalStorage=function(){var e=D();null!==e&&(e.localeId in S.a&&t.props.setLocale(e.localeId),null!==k.c[e.theme]&&t.props.setTheme(k.c[e.theme]))},t.getLocaleDropdownOptionKey=function(t){return"userSettingsLocaleOptions".concat(t)},t.renderLocaleDropdown=function(){var e=[];Object.keys(S.a).forEach((function(r){e.push({data:r,key:t.getLocaleDropdownOptionKey(r),text:S.a[r].LanguageCodeName})}));return Object(n.jsx)(q,{dropdown:{defaultSelectedKey:t.getLocaleDropdownOptionKey(t.props.locale),onRenderTitle:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_.a,{iconName:"LocaleLanguage",styles:R.i}),Object(n.jsx)("span",{style:{fontSize:"".concat(t.props.wholeTheme.fonts.large)},children:S.a[t.props.locale].LanguageCodeName})]})},options:e,onChange:function(e,r){if(void 0!==r){var n=r.data;t.props.setLocale(n).then((function(){E(t.props.reduxState)}))}}}})},t.getThemeDropdownOptionKey=function(t){return"userSettingsThemeOptions".concat(t)},t.renderThemeDropdown=function(){var e=[];Object.keys(k.c).forEach((function(r){var n=k.c[r];e.push({data:n,key:t.getThemeDropdownOptionKey(n.localizedName),text:n.localizedName})}));return Object(n.jsx)(q,{dropdown:{defaultSelectedKey:t.getThemeDropdownOptionKey(t.props.themeName),onRenderTitle:function(){return Object(n.jsx)("span",{style:{fontSize:"".concat(t.props.wholeTheme.fonts.large)},children:t.props.strings.ThemeDropdownText(t.props.themeName)})},options:e,onChange:function(e,r){if(void 0!==r){var n=r.data;t.props.setTheme(n).then((function(){E(t.props.reduxState)}))}},styles:Object(R.b)(t.props.wholeTheme)}})},t}return Object(y.a)(r,[{key:"componentDidMount",value:function(){this.props.userConsentProvided&&this.applyLocalStorage()}},{key:"render",value:function(){var t=this,e=[{className:Object(R.d)(this.props.wholeTheme,!0),data:K.mainMenuFileNew,key:"userSettingsCommandBarFileMenuNew",name:this.props.strings.MenuFileNew,iconProps:{iconName:"FabricNewFolder"},onClick:function(){return $(K.mainMenuFileNew)}},{className:Object(R.d)(this.props.wholeTheme,!0),data:K.mainMenuFileOpen,key:"userSettingsCommandBarFileMenuOpen",name:this.props.strings.MenuFileOpen,iconProps:{iconName:"OpenFolderHorizontal"},onClick:function(){return $(K.mainMenuFileOpen)}},{className:Object(R.d)(this.props.wholeTheme),data:K.mainMenuFileSave,key:"userSettingsCommandBarFileMenuSave",name:this.props.strings.MenuFileSave,iconProps:{iconName:"Save"},onClick:function(){return $(K.mainMenuFileSave)}}],r=[{ariaLabel:this.props.strings.TipTheme,key:"userSettingsCommandBarChosenTheme",onRender:this.renderThemeDropdown,buttonStyles:Object(R.a)()},{ariaLabel:this.props.strings.TipLanguage,key:"userSettingsCommandBarChosenLocale",onRender:this.renderLocaleDropdown}],i=function(){var e=Object(p.a)(d.a.mark((function e(r){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r.target.files)&&((i=new FileReader).onloadend=function(){var e=i.result;t.props.setStory(e)},i.readAsText(n[0]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{className:R.h,onChange:i,ref:U,type:"file"}),Object(n.jsx)(B.a,{ariaLabel:this.props.strings.TipNavigateCommandBar,items:e,farItems:r,styles:R.e})]})}}]),r}(i.Component),Q=Object(s.b)((function(t){return{locale:t.settings.locale,reduxState:t,strings:Object(b.a)(t.settings.locale),themeName:t.settings.theme.localizedName,userConsentProvided:t.persistence.userConsentProvided,wholeTheme:Object(l.z)()}}),(function(t){return{setConsent:P(t),setLocale:T(t),setStory:Object(H.c)(t),setTheme:L(t)}}))(G);!function(t){t.mainMenuFileNew="mainMenuFileNew",t.mainMenuFileOpen="mainMenuFileOpen",t.mainMenuFileSave="mainMenuFileSave"}(K||(K={}));var J={function:function(){!function(){var t;null===(t=U.current)||void 0===t||t.click()}()}},V={function:function(){alert("Invoked file -> save.")}},X={mainMenuFileNew:{functionsToInvoke:[{function:function(){alert("Invoked file -> new.")}}],guid:K.mainMenuFileNew,shortcuts:[{originalSequence:[{key:"N",usesShift:!0}]}]},mainMenuFileOpen:{functionsToInvoke:[J],guid:K.mainMenuFileOpen,shortcuts:[{originalSequence:[{key:"O",usesShift:!0}]}]},mainMenuFileSave:{functionsToInvoke:[V],guid:K.mainMenuFileSave,shortcuts:[{originalSequence:[{key:"S",usesShift:!0}]}]}},$=function(t,e){var r,n;!0!==X[t].enableWhileTyping&&("textarea"===(null===(r=document.activeElement)||void 0===r?void 0:r.nodeName.toLowerCase())||"input"===(null===(n=document.activeElement)||void 0===n?void 0:n.nodeName.toLowerCase())&&"text"===document.activeElement.getAttribute("type"))||!0!==X[t].disabled&&X[t].functionsToInvoke.forEach((function(t){!0!==t.disabled&&t.function(e)}))},Y=r(19),Z=r(117),tt=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){var t;Object(g.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).runStory=function(){var e=document.getElementById(Y.a).value;t.props.saveAndRunStory(e)},t.updateStory=function(e){t.props.story!==e.currentTarget.value&&t.props.setStory(e.currentTarget.value)},t}return Object(y.a)(r,[{key:"componentDidUpdate",value:function(t){var e;this.props.story!==t.story&&(null===(e=document.getElementById(Y.a))||void 0===e||e.setAttribute("value",this.props.story))}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("textarea",{style:Object(R.f)(this.props.theme.theme),id:Y.a,onBlur:this.updateStory}),Object(n.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(n.jsx)(Z.a,{styles:{root:{display:"block"}},text:"play",onClick:this.runStory})})]})}}]),r}(i.Component),et=Object(s.b)((function(t){return{story:t.viewEdit.story,theme:t.settings.theme}}),(function(t){return{saveAndRunStory:Object(H.b)(t),setStory:Object(H.c)(t)}}))(tt),rt=r(108),nt=function t(){Object(g.a)(this,t),this.condition=void 0,this.text=void 0,this.parent=void 0,this.children=void 0,this.condition="",this.text="",this.parent=null,this.children=[]},it=/\/\//g,ot=/\bif\b/g,at=/\bendif\b/g;function st(t,e){var r=t.substring(0,e).lastIndexOf("\n");-1===r&&(r=0);var n=t.substring(e).indexOf("\n");return-1===n&&(n=t.length-1),n+=e,t.substring(r,n).includes("@")}function ut(t,e){var r=t.substring(0,e),n=r.lastIndexOf("{");return!(n<r.lastIndexOf("}")||-1===n)}var lt=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(t){var n;return Object(g.a)(this,r),(n=e.call(this,t)).interpreterRef=void 0,n.interpreterRef=i.createRef(),n}return Object(y.a)(r,[{key:"componentDidUpdate",value:function(){try{!function(t,e,r){var n,i,o={},a={},s=[],u=t.split("\n");0===u.length&&(null===(i=e.current)||void 0===i||i.setEntries({}),e.current&&e.current.setErrorMessage("Parser: Story is blank. The story must not be blank to parse it."));for(var l=0;l<u.length;l++)u[l]=u[l].replace("\r","").trim(),u[l].startsWith("@")&&s.push(l);var c="";if(s.length>0){for(var h,f=0;f<s[0];f++)c+=u[f]+"\n";null===(h=e.current)||void 0===h||h.processHeaderOptions(c)}for(var d=0;d<s.length;d++)if(u[s[d]].length<2)e.current&&e.current.setErrorMessage("Parser: Entry"+u[s[d]]+"must be at least 1 character long.");else{var p=u[s[d]].substring(1),g=[],y="";g=d===s.length-1?u.slice(s[d],u.length):u.slice(s[d],s[d+1]);for(var m=1;m<g.length;m++)y+=g[m]+"\n";void 0!==o[p=p.replace(/\s+/g,"").toLowerCase()]?e.current&&e.current.setErrorMessage("Parser: Entry called '".concat(p,"' already exists.")):o[p]=y}for(var v=Object.keys(o),b=0;b<v.length;b++){var S=void 0,O=o[v[b]];do{S=!0;for(var k=null;null!==(k=it.exec(O));){var j=k.index;if(!ut(O,j)&&!st(O,j)){O=O.slice(j,O.substring(j).indexOf("\n")),S=!1;break}}}while(!S);o[v[b]]=O}for(var w=0;w<v.length;w++){for(var x=new nt,L=x,T=0,I=o[v[w]],F=[],E=[],D=null,A=[],P=[];null!==(D=ot.exec(I));)F.push(D);for(;null!==(D=at.exec(I));)E.push(D);for(var M=0;M<F.length;M++)ut(I,F[M].index)||st(I,F[M].index)||A.push(F[M].index);for(var R=0;R<E.length;R++)ut(I,E[R].index)||st(I,E[R].index)||P.push(E[R].index);A.length!==P.length&&e.current&&e.current.setErrorMessage("Parser: found ".concat(A.length," if tokens, but ").concat(P.length," ")+"endif tokens. Ifs and endifs must match in number.");for(var C=[],N=0;N<A.length;N++)C.push({item1:A[N],item2:0});for(var W=0;W<P.length;W++)C.push({item1:P[W],item2:1});C=C.sort((function(t,e){return t.item1>e.item1?1:-1}));for(var z=0;z<C.length;z++){var q=C[z].item1,H=C[z].item2,B=I.substring(q);B=B.slice(0,B.indexOf("\n"));for(var _=-1,K="",U=z-1;U>=0;U--)if(0===C[U].item2){_=C[U].item1,K=(K=I.substring(_)).slice(0,K.indexOf("\n"));break}for(var G=-1,Q="",J=z-1;J>=0;J--)if(1===C[J].item2){G=C[J].item1,Q=(Q=I.substring(G)).slice(0,Q.indexOf("\n"));break}var V=G>_?G:_,X=V===G?Q:K;if(0===H){if(0!==z&&-1!==_){var $=new nt;$.parent=L;var Y=V+X.length;if(q-Y<0){e.current&&e.current.setErrorMessage("Parser: In '".concat(I.substring(V),"', cannot specify multiple if tokens on one line."));continue}$.text+=I.substring(Y,q),0===$.children.length&&""===$.condition.trim()&&""===$.text.trim()||L.children.push($)}else if(q>0){var Z=new nt;Z.parent=L,Z.text+=I.substring(0,q),0===Z.children.length&&""===Z.condition.trim()&&""===Z.text.trim()||L.children.push(Z)}var tt=new nt;tt.parent=L,tt.condition=B,0===tt.children.length&&""===tt.condition.trim()&&""===tt.text.trim()||L.children.push(tt),L=tt,T++}else if(1===H){var et;if(T<0)return null===(et=e.current)||void 0===et||et.setEntries({}),void(e.current&&e.current.setErrorMessage("Parser: an extra endif token was encountered (if/endif # "+(z+1)+")."));var rt=new nt;rt.parent=L;var lt,ct=V+X.length;if(q-ct<0){e.current&&e.current.setErrorMessage("Parser: In '"+I.substring(V)+"', cannot specify multiple endif tokens on one line.");continue}if(rt.text+=I.substring(ct,q),0===rt.children.length&&""===rt.condition.trim()&&""===rt.text.trim()||L.children.push(rt),null===L.parent)return null===(lt=e.current)||void 0===lt||lt.setEntries({}),void(e.current&&e.current.setErrorMessage("Parser: an extra endif token was encountered (endif #"+z+")."));L=L.parent}}if(C.length>0){var ht=C[C.length-1].item1,ft=I.substring(ht).indexOf("\n");if(-1!==ft){var dt=new nt;dt.parent=x,dt.text+=I.substring(ht+ft),0===dt.children.length&&""===dt.condition.trim()&&""===dt.text.trim()||x.children.push(dt)}}else x.text+=I;a[v[w]]=x}null===(n=e.current)||void 0===n||n.setEntriesWithFork(a,null!==r&&void 0!==r?r:"")}(this.props.storyToParse,this.interpreterRef)}catch(t){this.interpreterRef.current&&"string"===typeof t?this.interpreterRef.current.setErrorMessage(t):this.interpreterRef.current&&t instanceof Error?this.interpreterRef.current.setErrorMessage(t.message):(console.error("Reference to interpreter element was undefined. An additional error follows."),console.error(t))}}},{key:"render",value:function(){return Object(n.jsx)(rt.a,{ref:this.interpreterRef})}}]),r}(i.Component),ct=Object(s.b)((function(t){return{renderTrigger:t.viewEdit.storyReparseToken,storyToParse:t.viewEdit.storyToParse}}))(lt),ht=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){return Object(g.a)(this,r),e.apply(this,arguments)}return Object(y.a)(r,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Q,{}),Object(n.jsxs)("div",{className:R.l,children:[Object(n.jsx)("div",{id:Y.b,className:R.j,children:Object(n.jsx)(et,{})}),Object(n.jsx)("div",{id:Y.k,style:Object(R.k)(this.props.theme.theme),children:Object(n.jsx)(ct,{})})]})]})}}]),r}(i.Component),ft=Object(s.b)((function(t){return{theme:t.settings.theme}}))(ht),dt=r(111),pt=r(76),gt={setPlayerStoryInputStyles:Object(j.a)(),setPlayerStoryLogSeparatorStyles:Object(j.a)(),setPlayerStoryOptionStyles:Object(j.a)(),setPlayerStoryOptionHighlightStyles:Object(j.a)(),setPlayerStoryOutputStyles:Object(j.a)(),setPlayerStoryRunnerOptions:Object(j.a)(),setPlayerStoryRunnerStyles:Object(j.a)()},yt=Object(O.c)({playerStoryInputStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryInputStyles?e.style:t},playerStoryLogSeparatorStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryLogSeparatorStyles?e.style:t},playerStoryOptionStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryOptionStyles?e.style:t},playerStoryOptionHighlightStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryOptionHighlightStyles?e.style:t},playerStoryOutputStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryOutputStyles?e.style:t},playerStoryRunnerOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryRunnerOptions?e.options:t},playerStoryRunnerStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{background:{type:"plain"}},e=arguments.length>1?arguments[1]:void 0;return e.type===gt.setPlayerStoryRunnerStyles?e.style:t}}),mt=r(75),vt=Object(O.c)({persistence:M,settings:I,viewEdit:H.d,authorStorySettings:pt.a,currentRunnerSettings:mt.a,playerStorySettings:yt}),bt=Object(O.d)(vt,void 0,Object(O.a)(dt.a));Object(u.a)(),function(){var t=Object.keys(X),e={};t.forEach((function(t){e[t]=X[t].shortcuts.map((function(t){return{shortcut:t,step:0}}))})),window.addEventListener("keypress",(function(r){t.forEach((function(t){for(var n=e[t],i=0;i<n.length;i++){var o=n[i];if(!0!==o.shortcut.disabled){var a=void 0!==o.shortcut.customSequence?o.shortcut.customSequence:o.shortcut.originalSequence;if(0!==a.length)if(a[o.step].key!==r.key.toUpperCase()||Boolean(a[o.step].usesAlt)!==r.altKey||Boolean(a[o.step].usesCtrl)!==r.ctrlKey||Boolean(a[o.step].usesShift)!==r.shiftKey)o.step=0;else{if(o.step===a.length-1)return $(t),void(o.step=0);o.step++}}}}))}))}(),Object(l.B)(k.c[k.b.DefaultLight].theme);var St=Object(n.jsx)(c.c,{children:Object(n.jsx)(c.a,{path:"/",component:ft})});a.a.render(Object(n.jsx)(s.a,{store:bt,children:Object(n.jsx)(h.a,{children:St})}),document.getElementById("root"))},19:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return s})),r.d(e,"i",(function(){return u})),r.d(e,"h",(function(){return l})),r.d(e,"k",(function(){return c})),r.d(e,"d",(function(){return h})),r.d(e,"g",(function(){return f})),r.d(e,"j",(function(){return d}));var n="editor-inputfield",i="editor-wrapper",o="runner-content",a="runner-inputfield",s="runner-log",u="runner-options",l="runner-option-restart",c="runner-wrapper",h="runner-input",f="runner-option",d="runner-output"},20:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return c}));var n,i,o,a=r(23),s=r(54),u=r(2);!function(t){t[t.Light=0]="Light",t[t.Dark=1]="Dark"}(i||(i={})),function(t){t[t.DefaultLight=0]="DefaultLight",t[t.EarthAndSky=1]="EarthAndSky",t[t.Lucky=2]="Lucky",t[t.ContrastLight=3]="ContrastLight",t[t.DefaultDark=4]="DefaultDark",t[t.DeepSea=5]="DeepSea",t[t.MidnightEarth=6]="MidnightEarth",t[t.ContrastDark=7]="ContrastDark"}(o||(o={}));var l=Object(s.a)(),c=(n={},Object(a.a)(n,o.ContrastDark,{localizedName:l.ThemeContrastDark,themeId:o.ContrastDark,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#ffea00",themeLighterAlt:"#0a0900",themeLighter:"#292500",themeLight:"#4d4600",themeTertiary:"#998c00",themeSecondary:"#e0ce00",themeDarkAlt:"#ffec19",themeDark:"#ffef3d",themeDarker:"#fff370",neutralLighterAlt:"#0b0b0b",neutralLighter:"#151515",neutralLight:"#252525",neutralQuaternaryAlt:"#2f2f2f",neutralQuaternary:"#373737",neutralTertiaryAlt:"#595959",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#000000"}})}),Object(a.a)(n,o.ContrastLight,{localizedName:l.ThemeContrastLight,themeId:o.ContrastLight,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#000080",themeLighterAlt:"#f0f0fa",themeLighter:"#c5c5eb",themeLight:"#9898d9",themeTertiary:"#4747b3",themeSecondary:"#11118f",themeDarkAlt:"#000073",themeDark:"#000061",themeDarker:"#000047",neutralLighterAlt:"#f8f8f8",neutralLighter:"#f4f4f4",neutralLight:"#eaeaea",neutralQuaternaryAlt:"#dadada",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c8c8",neutralTertiary:"#595754",neutralSecondary:"#373534",neutralPrimaryAlt:"#2f2d2c",neutralPrimary:"#000000",neutralDark:"#151413",black:"#0b0b0a",white:"#ffffff"}})}),Object(a.a)(n,o.DeepSea,{localizedName:l.ThemeDeepSea,themeId:o.DeepSea,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#e8a63c",themeLighterAlt:"#090702",themeLighter:"#251b0a",themeLight:"#463212",themeTertiary:"#8b6424",themeSecondary:"#cc9235",themeDarkAlt:"#eaaf4e",themeDark:"#eeba68",themeDarker:"#f2cc8e",neutralLighterAlt:"#02132b",neutralLighter:"#041833",neutralLight:"#092141",neutralQuaternaryAlt:"#0e274a",neutralQuaternary:"#122c51",neutralTertiaryAlt:"#27456f",neutralTertiary:"#e8f6f6",neutralSecondary:"#ebf8f7",neutralPrimaryAlt:"#eff9f9",neutralPrimary:"#dcf2f1",neutralDark:"#f7fcfc",black:"#fbfdfd",white:"#000e21"}})}),Object(a.a)(n,o.DefaultDark,{localizedName:l.ThemeDefaultDark,themeId:o.DefaultDark,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#00c8ff",themeLighterAlt:"#00080a",themeLighter:"#002029",themeLight:"#003c4d",themeTertiary:"#007899",themeSecondary:"#00b0e0",themeDarkAlt:"#19cdff",themeDark:"#3dd5ff",themeDarker:"#70e0ff",neutralLighterAlt:"#323130",neutralLighter:"#31302f",neutralLight:"#2f2e2d",neutralQuaternaryAlt:"#2c2b2a",neutralQuaternary:"#2a2928",neutralTertiaryAlt:"#282726",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#323130"}})}),Object(a.a)(n,o.DefaultLight,{localizedName:l.ThemeDefaultLight,themeId:o.DefaultLight,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#0078d4",themeLighterAlt:"#eff6fc",themeLighter:"#deecf9",themeLight:"#c7e0f4",themeTertiary:"#71afe5",themeSecondary:"#2b88d8",themeDarkAlt:"#106ebe",themeDark:"#005a9e",themeDarker:"#004578",neutralLighterAlt:"#faf9f8",neutralLighter:"#f3f2f1",neutralLight:"#edebe9",neutralQuaternaryAlt:"#e1dfdd",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c6c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#ffffff"}})}),Object(a.a)(n,o.EarthAndSky,{localizedName:l.ThemeEarthAndSky,themeId:o.EarthAndSky,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#8f4700",themeLighterAlt:"#fbf6f0",themeLighter:"#eddac7",themeLight:"#ddbc9b",themeTertiary:"#bc834b",themeSecondary:"#9c5813",themeDarkAlt:"#814000",themeDark:"#6d3600",themeDarker:"#502800",neutralLighterAlt:"#e9f6f8",neutralLighter:"#e5f2f4",neutralLight:"#dce8ea",neutralQuaternaryAlt:"#cdd8da",neutralQuaternary:"#c4cfd0",neutralTertiaryAlt:"#bcc7c8",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#f0fdff"}})}),Object(a.a)(n,o.Lucky,{localizedName:l.ThemeLucky,themeId:o.Lucky,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#00570e",themeLighterAlt:"#cfebd3",themeLighter:"#a7d8af",themeLight:"#83c68e",themeTertiary:"#63b370",themeSecondary:"#47a156",themeDarkAlt:"#2f8e3f",themeDark:"#1b7c2b",themeDarker:"#0c691b",neutralLighterAlt:"#f3f3f3",neutralLighter:"#efefef",neutralLight:"#e5e5e5",neutralQuaternaryAlt:"#d6d6d6",neutralQuaternary:"#cccccc",neutralTertiaryAlt:"#c4c4c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#fafafa"}})}),Object(a.a)(n,o.MidnightEarth,{localizedName:l.ThemeMidnightEarth,themeId:o.MidnightEarth,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#d1ad7d",themeLighterAlt:"#080705",themeLighter:"#211c14",themeLight:"#3f3426",themeTertiary:"#7d684b",themeSecondary:"#b8986e",themeDarkAlt:"#d6b489",themeDark:"#dcbf99",themeDarker:"#e5cfb2",neutralLighterAlt:"#0b0b0b",neutralLighter:"#151515",neutralLight:"#252525",neutralQuaternaryAlt:"#2f2f2f",neutralQuaternary:"#373737",neutralTertiaryAlt:"#595959",neutralTertiary:"#e0e0e0",neutralSecondary:"#e5e5e5",neutralPrimaryAlt:"#eaeaea",neutralPrimary:"#d1d1d1",neutralDark:"#f4f4f4",black:"#f9f9f9",white:"#000000"}})}),n)},29:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(9),i=r(14),o=function(){function t(e,r){Object(n.a)(this,t),this.strForm=void 0,this.value=void 0,this.strForm=e,this.value=r}return Object(i.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm&&this.value===t.value}}]),t}()},31:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(9),i=r(14),o=function(){function t(e,r,i){Object(n.a)(this,t),this.strForm=void 0,this.numArgs=void 0,this.function=void 0,this.strForm=e,this.numArgs=r,this.function=i}return Object(i.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm&&this.numArgs===t.numArgs&&this.function===t.function}}]),t}()},40:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=/^-?(\d+\.?\d*|\d*\.?\d+)$/g},43:function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return c}));var n=r(21),i=r(12),o={rerenderStory:Object(i.a)(),saveAndRunStory:Object(i.a)(),updateStory:Object(i.a)()},a={type:o.rerenderStory},s=function(t){return function(e){t(function(t){return{story:t,type:o.updateStory}}(e))}},u=function(t){return function(e){t(function(t){return{story:t,type:o.saveAndRunStory}}(e))}},l=function(t){return function(){t(a)}},c=Object(n.c)({story:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e.type===o.updateStory||e.type===o.saveAndRunStory?e.story:t},storyReparseToken:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return e.type===o.saveAndRunStory?t+1:t},storyRerenderToken:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return e.type===o.rerenderStory?t+1:t},storyToParse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e.type===o.saveAndRunStory?e.story:t}})},45:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s}));var n,i=r(23),o=r(20),a=r(15);!function(t){t[t.input=0]="input",t[t.option=1]="option",t[t.optionHighlight=2]="optionHighlight",t[t.output=3]="output"}(n||(n={}));var s=function(t,e,r,s,u){var l=function(t){var e;return e={},Object(i.a)(e,n.input,{color:t.theme.semanticColors.errorText,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"inherit"}),Object(i.a)(e,n.option,{color:t.theme.palette.blue,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"underline"}),Object(i.a)(e,n.optionHighlight,{color:t.theme.palette.blueDark,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"underline"}),Object(i.a)(e,n.output,{color:t.theme.semanticColors.bodyText,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"inherit"}),e}(t)[u],c=t.themeType===o.a.Light?e.colorLight||r.colorLight||s.colorLight||l.color:e.colorDark||r.colorDark||s.colorDark||l.color,h=e.font||r.font||s.font||l.fontFamily,f=e.fontSize||r.fontSize||s.fontSize||l.fontSize,d="normal",p="normal",g="inherit";return e.fontStyle?d=e.fontStyle.includes("i")?"italic":l.fontStyle:r.fontStyle?d=r.fontStyle.includes("i")?"italic":l.fontStyle:s.fontStyle&&(d=s.fontStyle.includes("i")?"italic":l.fontStyle),e.fontStyle?p=e.fontStyle.includes("b")?"bold":l.fontWeight:r.fontStyle?p=r.fontStyle.includes("b")?"bold":l.fontWeight:s.fontStyle&&(p=s.fontStyle.includes("b")?"bold":l.fontWeight),e.fontStyle?g=e.fontStyle.includes("u")?"underline":l.textDecoration:r.fontStyle?g=r.fontStyle.includes("u")?"underline":l.textDecoration:s.fontStyle&&(g=s.fontStyle.includes("u")?"underline":l.textDecoration),{color:c,fontFamily:h,fontSize:f,fontStyle:d,fontWeight:p,textDecoration:g,whiteSpace:"pre-wrap"}}},5:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(9),i=r(14),o=r(40),a=function(){function t(e){if(Object(n.a)(this,t),this.strForm=void 0,this.value=void 0,"string"===typeof e){if(this.strForm=e,!o.a.test(e))throw new Error("Parser: The expression '"+e+"' is not a valid number.");this.value=parseFloat(e)}else this.strForm=e.toString(),this.value=e}return Object(i.a)(t,[{key:"equals",value:function(t){return this.strForm===t.strForm&&this.value===t.value}}]),t}()},52:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={"en-us":{ApplicationName:"Joshua Tree",ApplicationNameAndVersion:function(t,e){return"".concat(t," version ").concat(e)},LanguageCodeName:"English (United States)",MenuFile:"File",MenuFileNew:"New",MenuFileOpen:"Open",MenuFileSave:"Save",ThemeContrastDark:"\ud83c\udf11 Contrast Dark",ThemeContrastLight:"\u2600\ufe0f Contrast Light",ThemeDefaultDark:"\ud83c\udf11 Default Dark",ThemeDefaultLight:"\u2600\ufe0f Default Light",ThemeDeepSea:"\ud83c\udf11 Deep Sea",ThemeEarthAndSky:"\u2600\ufe0f Earth and Sky",ThemeLucky:"\u2600\ufe0f Lucky",ThemeMidnightEarth:"\ud83c\udf11 Midnight Earth",ThemeDropdownText:function(t){return"".concat(t," theme")},TipLanguage:"Language",TipNavigateCommandBar:"Use left and right arrow keys to navigate between commands.",TipTheme:"Theme"}}},54:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return a}));var n=r(96),i=r(52),o=function(){var t="en-us";if(void 0!==navigator.languages){var e,r=Object(n.a)(navigator.languages);try{for(r.s();!(e=r.n()).done;){var i=e.value.toLowerCase().split("-"),o=i[0],a=i.length>1?i[1]:"";if("".concat(o,"-").concat(a)in s){t="".concat(o,"-").concat(a);break}if("".concat(o)in s){t="".concat(o);break}}}catch(l){r.e(l)}finally{r.f()}}else{var u=navigator.language.toLowerCase();u in s&&(t=u)}return s[t]},a=function(t){return i.a[s[t||o()]]},s={en:"en-us","en-us":"en-us"}},75:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return s}));var n=r(21),i=r(12),o={clearAllTempSettings:Object(i.a)(),setCurrentRunnerOptions:Object(i.a)()},a=function(t){return function(e){t(function(t){return{type:o.setCurrentRunnerOptions,options:t}}(e))}},s=Object(n.c)({currentRunnerOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setCurrentRunnerOptions?e.options:e.type===o.clearAllTempSettings?{}:t}})},76:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return s}));var n=r(21),i=r(12),o={setAuthorStoryInputStyles:Object(i.a)(),setAuthorStoryLogSeparatorStyles:Object(i.a)(),setAuthorStoryOptionStyles:Object(i.a)(),setAuthorStoryOptionHighlightStyles:Object(i.a)(),setAuthorStoryOutputStyles:Object(i.a)(),setAuthorStoryRunnerOptions:Object(i.a)(),setAuthorStoryRunnerStyles:Object(i.a)(),setAuthorStoryStrings:Object(i.a)()},a=function(t){return function(e){t(function(t){return{type:o.setAuthorStoryRunnerStyles,style:t}}(e))}},s=Object(n.c)({authorStoryInputStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryInputStyles?e.style:t},authorStoryLogSeparatorStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryLogSeparatorStyles?e.style:t},authorStoryOptionStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryOptionStyles?e.style:t},authorStoryOptionHighlightStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryOptionHighlightStyles?e.style:t},authorStoryOutputStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryOutputStyles?e.style:t},authorStoryRunnerOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryRunnerOptions?e.options:t},authorStoryRunnerStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{background:{type:"plain"}},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryRunnerStyles?e.style:t},authorStoryStrings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===o.setAuthorStoryStrings?e.strings:t}})}},[[161,1,2]]]);
//# sourceMappingURL=main.a3924225.chunk.js.map