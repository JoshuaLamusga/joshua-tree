(this["webpackJsonpjoshua-tree"]=this["webpackJsonpjoshua-tree"]||[]).push([[0],{11:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return y})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return b}));var n=r(23),i=r(2),o=function(){return{root:{alignSelf:"stretch"}}},a=function(e){return{root:{borderColor:e.semanticColors.menuDivider,borderRightStyle:"solid",borderWidth:"1px"}}},s=function(e,t){return{caretDownWrapper:Object(i.D)({alignSelf:"center",position:"relative",right:"20px",width:"0px"},null===t||void 0===t?void 0:t.caretDownWrapper),dropdown:Object(i.D)({display:"flex",height:"100%"},null===t||void 0===t?void 0:t.dropdown),dropdownItem:Object(i.D)(Object(n.a)({},e.fonts.large),null===t||void 0===t?void 0:t.dropdownItem),dropdownItemSelected:Object(i.D)(Object(n.a)({},e.fonts.large),null===t||void 0===t?void 0:t.dropdownItemSelected),root:Object(i.D)({alignSelf:"stretch"},null===t||void 0===t?void 0:t.root),title:Object(i.D)({height:"100%",border:"0",borderRadius:"unset",display:"flex",alignItems:"center"},null===t||void 0===t?void 0:t.title)}},u=function(e,t){return t?Object(i.D)(e.fonts.large,{paddingLeft:"12px",paddingRight:"12px",borderColor:e.semanticColors.menuDivider,borderRightStyle:"solid",borderWidth:"1px"}):Object(i.D)(e.fonts.large,{paddingLeft:"12px",paddingRight:"12px"})},l={root:{alignItems:"center",height:"4vh",padding:"0px"},primarySet:{alignSelf:"stretch"},secondarySet:{alignSelf:"stretch"}},c=function(e){return{backgroundColor:e.semanticColors.bodyStandoutBackground,borderStyle:"solid",borderWidth:"1px",boxSizing:"border-box",color:e.semanticColors.bodyText,height:"90vh",padding:"0.25vh 0.25vw 0.25vh 0.25vw",resize:"none",width:"100%"}},h="Calibri; Times New Roman; Courier New; sans-serif",f=Object(i.D)({display:"none"}),d={root:{marginRight:"8px"}},p=Object(i.D)({boxSizing:"border-box",height:"90vh",margin:"0 0.25vw 0 0",width:"49.75vw"}),g=function(e){return{borderColor:e.semanticColors.menuDivider,borderStyle:"solid",borderWidth:"1px",boxSizing:"border-box",height:"90vh",margin:"0 0 0 0.25vw",width:"49.75vw"}},y=Object(i.D)({display:"flex",alignItems:"stretch",margin:"4px"}),m=Object(i.D)({flexGrow:1,overflowY:"auto",paddingLeft:"0.5vw",paddingRight:"0.5vw",paddingTop:"0.5vw"}),v=Object(i.D)({display:"flex",flexDirection:"column",height:"90vh"}),b=function(e){return{root:[e.fonts.large,{margin:"2rem",padding:"2rem"}]}}},110:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return G}));var n,i=r(41),o=r(23),a=r(7),s=r(9),u=r(21),l=r(20),c=r(3),h=r(0),f=r(24),d=r(19),p=r(39),g=r(11),y=r(22),m=r(81),v=r(8),b=r(119),S=r(44),O=r(116),j=r(18),k=r(35),w=r(33),x=r(5),P=r(77),T=r(78),I=r(111),L=r(48),E=r(115),C=r(31),F=Number.MIN_SAFE_INTEGER,A=/\s+/gm,M=/^[0-9|a-f]+$/g,D=/[0-9]/g,R=/\\at|\\lb|\\rb|\\n|\\s/g,N=/\\at|\\n|\\s/g,W=new O.a,z=function(t){Object(u.a)(h,t);var r=Object(l.a)(h);function h(e){var t;return Object(a.a)(this,h),(t=r.call(this,e)).actions=[],t.content=[],t.contentCached=[],t.currentOptionStyles={},t.currentOptionHighlightStyles={},t.currentOutputStyles={},t.entries={},t.errorMessage="",t.fork="",t.log=[],t.logCached=[],t.options=[],t.optionsCached=[],t.stopEvaluation=!1,t.textboxHidden=!0,t.timers=[],t.variables={},t.variablesPrev={},t.getRestartLink=function(){var e=t.props;return t.addOption(e.authorStorySettings.authorStoryStrings.restartLinkText||e.strings.RunnerRestart,t.restartGame,f.h)},t.onTextboxKeyPress=function(e){13===e.charCode&&(t.actions.forEach((function(t){t(e.currentTarget.value)})),e.currentTarget.value="")},t.restartGame=function(){t.refreshInterpreter();var e=Object.keys(t.entries);t.setFork(e[0])},t.refreshInterpreter(),t}return Object(s.a)(h,[{key:"shouldComponentUpdate",value:function(e){var t=e;return n&&t.authorStorySettings.authorStoryRunnerOptions.randomSeed===n.seed||(n=new I.a(t.authorStorySettings.authorStoryRunnerOptions.randomSeed)),this.contentCached=this.content.map((function(e){return e(t)})),this.logCached=this.log.map((function(e){return e(t)})),this.optionsCached=this.options.map((function(e){return e(t)})),!0}},{key:"addInput",value:function(e,t){return function(r){var n=t?r.authorStorySettings.authorStoryStrings.inputOptionPrefixText||"\u2022 ":r.authorStorySettings.authorStoryStrings.inputTextboxPrefixText||"\u2192 ";return Object(c.jsx)("p",{style:Object(L.b)(r.theme,r.debugging?{}:r.playerStorySettings.playerStoryInputStyles,{},r.authorStorySettings.authorStoryInputStyles,L.a.input),children:n+e},"".concat(f.d,"-").concat(F++))}}},{key:"addOption",value:function(e,t,r,n){var i=this,a=Object.assign({},this.currentOptionStyles),s=this.props,u="function"===typeof t?t:function(){s.authorStorySettings.authorStoryRunnerOptions.hideLog||s.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(s.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||i.content.push(i.addInput(e,!0)),i.setFork(t)};return function(t){var i=Object(L.b)(t.theme,t.debugging?{}:t.playerStorySettings.playerStoryOptionStyles,a,t.authorStorySettings.authorStoryOptionStyles,L.a.option),s=Object(L.b)(t.theme,t.debugging?{}:t.playerStorySettings.playerStoryOptionHighlightStyles,a,t.authorStorySettings.authorStoryOptionHighlightStyles,L.a.optionHighlight);return Object(c.jsx)(m.a,{onClick:u,styles:{root:Object(o.a)(Object(o.a)({},i),{},{border:"none",display:n?"inline":"block",fontSize:"16px",height:"unset",marginBottom:n?"0px":"4px",marginTop:n?"0px":"4px",paddingLeft:"0px",marginLeft:"0px"}),rootFocused:Object(o.a)({},s),rootHovered:Object(o.a)({},s),label:{marginLeft:"0px"}},text:e},r||"".concat(f.g,"-").concat(F++))}}},{key:"addOutput",value:function(e){var t=Object.assign({},this.currentOutputStyles);return function(r){var n=Object(L.b)(r.theme,r.debugging?{}:r.playerStorySettings.playerStoryOutputStyles,t,r.authorStorySettings.authorStoryOutputStyles,L.a.output);return Object(c.jsx)("span",{style:n,children:e},"".concat(f.j,"-").concat(F++))}}},{key:"loadFile",value:function(){}},{key:"loadFork",value:function(){var e;if(this.updateLog(),this.content=[],this.options=[],this.textboxHidden=!0,this.timers.forEach((function(e){clearTimeout(e)})),this.timers=[],this.actions=[],void 0!==(e=this.entries[this.fork])){this.variablesPrev={};for(var t=Object.keys(this.variables),r=0;r<t.length;r++)this.variablesPrev[t[r]]=this.variables[t[r]];this.preorderProcess(e,""),this.stopEvaluation||(this.visitFork(),this.refreshInterpreterGui())}else this.setErrorMessage("Interpreter: fork '"+this.fork+"' not found.")}},{key:"processHeaderOptions",value:function(e){var t=this.props;this.refreshInterpreter();for(var r=e.split("\n"),n=0;n<r.length;n++){for(var i=r[n],a=i.split(" "),s="",u=1;u<a.length;u++)s+=a[u]+" ";if(s=s.trim(),i.startsWith("link-style-text"))t.dispatchSetTempStoryRunnerOptions(Object(o.a)(Object(o.a)({},t.currentStorySettings.currentRunnerSettings),{},{discreteInlineLinks:!0}));else if(i.startsWith("option-default-disable"))t.dispatchSetTempStoryRunnerOptions(Object(o.a)(Object(o.a)({},t.currentStorySettings.currentRunnerSettings),{},{hideRestartLink:!0}));else if(i.startsWith("option-color")||i.startsWith("option-hover-color")||i.startsWith("background-color")){var l="";M.test(s)?6!==s.length&&3!==s.length?this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):3!==s.length&&6!==s.length||(l=s.substring(0,s.length)):this.setErrorMessage("Interpreter: In the line '"+i+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),i.startsWith("option-color")?(this.currentOptionStyles.colorDark=l,this.currentOptionStyles.colorLight=l):i.startsWith("option-color-light")?this.currentOptionStyles.colorLight=l:i.startsWith("option-color-dark")?this.currentOptionStyles.colorDark=l:i.startsWith("option-hover-color")?(this.currentOptionHighlightStyles.colorDark=l,this.currentOptionHighlightStyles.colorLight=l):i.startsWith("option-hover-color-light")?this.currentOptionHighlightStyles.colorLight=l:i.startsWith("option-hover-color-dark")?this.currentOptionHighlightStyles.colorDark=l:i.startsWith("background-color")?t.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},t.authorStorySettings.authorStoryRunnerStyles),{},{colorDark:l,colorLight:l,type:"plain"})}):i.startsWith("background-color-light")?t.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},t.authorStorySettings.authorStoryRunnerStyles),{},{colorLight:l,type:"plain"})}):i.startsWith("background-color-dark")&&t.dispatchSetAuthorStoryRunnerStyles({background:Object(o.a)(Object(o.a)({},t.authorStorySettings.authorStoryRunnerStyles),{},{colorDark:l,type:"plain"})})}else if(i.startsWith("output-font-size")||i.startsWith("option-font-size")){if(!S.a.test(s)){this.setErrorMessage("Interpreter: In line '"+i+"', a number must be specified after the option.");continue}var c=parseFloat(s);if(c<=0){this.setErrorMessage("Interpreter: In line '"+i+"', numbers must be greater than zero.");continue}i.startsWith("output-font-size")?this.currentOutputStyles.fontSize=c.toString():i.startsWith("option-font-size")&&(this.currentOptionStyles.fontSize=c.toString())}else i.startsWith("option-font")?this.currentOptionStyles.font="".concat(s,"; ").concat(g.g):i.startsWith("output-font")&&(this.currentOutputStyles.font="".concat(s,"; ").concat(g.g))}}},{key:"refreshInterpreterGui",value:function(){this.refreshInterpreterGuiStyles(),this.props.dispatchRerenderStory()}},{key:"render",value:function(){this.refreshInterpreterGuiStyles();var e=this.props,t=0!==this.options.length||e.authorStorySettings.authorStoryRunnerOptions.hideRestartLink?[]:[this.getRestartLink()],r=[Object(c.jsx)("div",{id:f.f,children:this.logCached},f.f),Object(c.jsx)("div",{id:f.c,children:this.contentCached},f.c),Object(c.jsxs)("div",{id:f.i,style:{marginTop:"24px"},children:[this.optionsCached,t]},f.i)],n=this.props.debugging&&""!==this.errorMessage?Object(c.jsx)(b.a,{messageBarType:v.a.error,children:this.errorMessage}):void 0,i=this.textboxHidden?void 0:Object(c.jsx)(E.a,{autoComplete:"nah",name:"textfield",id:f.e,onKeyPress:this.onTextboxKeyPress,type:"text"},f.e);return Object(c.jsxs)("div",{className:g.n,children:[Object(c.jsx)("div",{className:g.m,children:r}),n,i]})}},{key:"saveFile",value:function(){}},{key:"setEntries",value:function(e){this.entries=e}},{key:"setEntriesWithFork",value:function(e,t){this.content=[],this.log=[],this.options=[],this.entries=e,this.errorMessage="";var r=Object.keys(this.entries);0===r.length?this.setErrorMessage("Interpreter: cannot play story. It contains no forks. Use @ at the beginning of a line to denote an fork."):""!==t&&r.includes(t)?this.setFork(t):this.setFork(r[0])}},{key:"setErrorMessage",value:function(e){this.errorMessage=null!==e&&void 0!==e?e:"",this.refreshInterpreterGui()}},{key:"setFork",value:function(e){this.fork=e,this.stopEvaluation=!1,this.loadFork()}},{key:"escapeText",value:function(e,t){return t?e.replace(R,(function(e){switch(e){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\";case"\\lb":return"{";case"\\rb":return"}"}return e})):e.replace(N,(function(e){switch(e){case"\\at":return"@";case"\\n":return"\n";case"\\s":return"\\"}return e}))}},{key:"preorderProcess",value:function(e,t){if(this.processIf(e,t)){this.processText(e);for(var r=0;r<e.children.length;r++){if(this.stopEvaluation)return;this.preorderProcess(e.children[r],t)}}}},{key:"processIf",value:function(t,r){var n=this,i=this.props;if(""===t.condition.trim())return!0;var o=t.condition.substring(2).trim(),a=o.split(" ");if(0===a.length)return this.setErrorMessage("The line if '"+o+"' is incorrectly formatted."),!1;if(a.length>1&&"timer"===a[0]&&"is"===a[1]){if(a.length<2)return this.setErrorMessage("The timer must be set with a time specified in seconds."),!1;if(!S.a.test(a[2]))return this.setErrorMessage("Interpreter: In line '"+o+"', the third word must be numeric."),!1;var s=parseFloat(a[2]);if(isNaN(s)||!isFinite(s))return this.setErrorMessage("Interpreter: In line '"+o+"', the time must be numeric and not too large."),!1;if(s<=0)return this.setErrorMessage("Interpreter: In line '"+o+"', the time must be positive and non-zero."),!1;var u=e.setTimeout((function(){n.processText(t);for(var e=0;e<t.children.length;e++)n.preorderProcess(t.children[e],r)}),1e3*s);return this.timers.push(u),!1}if(a.length>1&&"text"===a[0]&&("is"===a[1]||"!is"===a[1]||"has"===a[1]||"!has"===a[1]||"pick"===a[1])){this.textboxHidden=!1;for(var l="",c=2;c<a.length;c++)l+=a[c]+" ";if(""===(l=this.escapeText(l.toLowerCase().trim(),!0))&&this.setErrorMessage("Interpreter: In the line 'if "+o+"', at least one word to look for must be specified after 'pick'."),"pick"===a[1]){for(var h=l.split(","),f=0;f<h.length;f++)h[f]=h[f].replace("\\c",",").trim();if(""===r)this.actions.push((function(e){for(var r=!1,o=0;o<h.length;o++){new RegExp("\\b"+h[o]+"\\b").test(e.toLowerCase().trim())&&(r=!0)}if(r){i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(e)),n.processText(t);for(var a=0;a<t.children.length;a++)n.preorderProcess(t.children[a],e);n.refreshInterpreterGui()}}));else{for(var d=!1,p=0;p<h.length;p++){new RegExp("\\b"+h[p]+"\\b").test(r.toLowerCase().trim())&&(d=!0)}if(!d)return!1;this.processText(t);for(var g=0;g<t.children.length;g++)this.preorderProcess(t.children[g],r)}}else if(a[1].endsWith("is")){if(""===r)this.actions.push((function(e){var r=e.toLowerCase().trim();if("is"===a[1]&&r===l||"!is"===a[1]&&r!==l){i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(e)),n.processText(t);for(var o=0;o<t.children.length;o++)n.preorderProcess(t.children[o],e)}n.refreshInterpreterGui()}));else if("is"===a[1]&&r===l||"!is"===a[1]&&r!==l){this.processText(t);for(var y=0;y<t.children.length;y++)this.preorderProcess(t.children[y],r)}}else if(a[1].endsWith("has")){for(var m=l.split(","),v=0;v<m.length;v++)m[v]=m[v].replace("\\c",",").trim();if(""===r)this.actions.push((function(e){for(var r=0;r<m.length;r++){var o=new RegExp("\\b"+m[r]+"\\b").test(e.toLowerCase().trim());if("has"===a[1]&&!o||"!has"===a[1]&&o)return}i.authorStorySettings.authorStoryRunnerOptions.hideLog||i.authorStorySettings.authorStoryRunnerOptions.logLimit&&!(i.authorStorySettings.authorStoryRunnerOptions.logLimit>0)||n.content.push(n.addInput(e)),n.processText(t);for(var s=0;s<t.children.length;s++)n.preorderProcess(t.children[s],e);n.refreshInterpreterGui()}));else{for(var b=0;b<m.length;b++){var O=new RegExp("\\b"+m[b]+"\\b").test(r);if("has"===a[1]&&!O||"!has"===a[1]&&O)return!1}this.processText(t);for(var x=0;x<t.children.length;x++)this.preorderProcess(t.children[x],r)}}return!1}W.optIncludeUnknowns=!0,W.resetTokens();var P=Object.keys(this.variables),T=this.variables["visited"+this.fork];W.addIdentifier(new w.a("visited",T));for(var I=0;I<P.length;I++){var L=P[I],E=this.variables[P[I]];W.addIdentifier(new w.a(L,E))}W.addFunction(new k.a("exists",1,(function(e){return e[0]instanceof j.a?e[0]:new j.a(!(e[0]instanceof w.a))})));var C="";try{C=W.eval(a.join(" "))}catch(F){return F instanceof Error?this.setErrorMessage(F.message):this.setErrorMessage(F),!1}return"true"===C||"false"===C?"true"===C:(this.setErrorMessage("Interpreter: In the line 'if "+a.join(" ")+"', the expression must be boolean (true or false), but was null instead."),!1)}},{key:"processText",value:function(e){for(var t=this,r=e.text;r.length>0;){var i=r.indexOf("\n"),o=void 0,a=(o=i>=0?r.substring(0,i):r).split(" ");if(""===o.trim())r=r.substring(i+1);else if(o.includes("@@")){var s=o.substring(o.indexOf("@")+2).replace(A,"").toLowerCase(),u=this.escapeText(o.substring(0,o.indexOf("@")).trim(),!1);""===s?this.setErrorMessage("Interpreter: there was no fork name given to option '"+u+"'."):""===u.trim()?this.setErrorMessage("Interpreter: the option linking to '"+s+"' has no displayable text specified."):void 0===this.entries[s]?this.setErrorMessage("Interpreter: the fork in the option '"+u+"@"+s+"' doesn't exist."):this.content.push(this.addOption(u,s,void 0,!0)),r=r.substring(r.indexOf("\n")+1)}else if(o.includes("@")){var l=o.indexOf("@"),c=o.substring(l+1).replace(A,"").toLowerCase(),h=this.escapeText(o.substring(0,l).trim(),!1);""===c?this.setErrorMessage("Interpreter: there was no fork name given to option '"+h+"'."):""===h.trim()?this.setErrorMessage("Interpreter: the option linking to '"+c+"' has no displayable text specified."):this.options.push(this.addOption(h,c)),r=r.substring(r.indexOf("\n")+1)}else if(o.includes("{")){var f=r.indexOf("{"),d=r.indexOf("}"),p=r.substring(f,d+1);if(d<f){this.setErrorMessage("Interpreter: In the line '"+o+"', right braces should follow left braces. "),r=r.substring(r.indexOf("\n")+1);continue}p.includes("***}")?this.currentOutputStyles.fontStyle="ib":p.includes("**}")?this.currentOutputStyles.fontStyle="b":p.includes("*}")?this.currentOutputStyles.fontStyle="i":this.currentOutputStyles.fontStyle=void 0,p=this.escapeText(p.replace("{","").replace("***}","").replace("**}","").replace("*}","").replace("}",""),!0),this.content.push(this.addOutput(p)),r=r.substring(0,f)+r.substring(d+1,r.length)}else if(r.startsWith("set")){W.optIncludeUnknowns=!1,W.resetTokens();for(var g=Object.keys(this.variables),y=0;y<g.length;y++){var m=g[y],v=this.variables[g[y]];("number"===typeof v||"boolean"===typeof v)&&W.addIdentifier(new w.a(m,v))}W.addFunction(new k.a("random",1,(function(e){if(e[0]instanceof x.a){var t=e[0];return new x.a(n.nextNumber()*t.value+1)}return null})));var b=a.indexOf("=");-1!==b?function(){var e=a.slice(1,b),r=a.slice(b+1),n="",i=null;if(1===e.length){try{n=W.eval(r.join(" "))}catch(s){s instanceof Error?t.setErrorMessage("Interpreter: In the line '"+o+"', "+s.message):t.setErrorMessage("Interpreter: In the line '"+o+", "+s)}"true"===n||"false"===n?i="true"===n:S.a.test(n)?i=parseFloat(n):t.setErrorMessage("Interpreter: In the line '"+o+"', the expression "+r.join(" ")+" should be a number, but "+n+" was computed instead."),g.includes(e[0])?t.variables[e[0]]=i:D.test(e[0][0])||W.getTokens().some((function(t){return t.strForm===e[0]}))?t.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+e[0]+"' is a name used for math or is a number."):t.variables[e[0]]=i}else t.setErrorMessage("Interpreter: In the line '"+o+", the phrase "+e.join(" ")+" must be a variable name without spaces.")}():function(){var e=a.slice(1),r="",n=null;if(e.length>0)if(1===e.length)if(e[0].startsWith("!")){var i=e[0].substring(1);g.includes(i)?t.variables[i]=!1:e.length>0&&D.test(e[0][0])||W.getTokens().some((function(e){return e.strForm===i}))?t.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+i+"' is a number or is used for math."):t.variables[i]=!1}else g.includes(e[0])?t.variables[e[0]]=!0:e.length>0&&D.test(e[0][0])||W.getTokens().some((function(t){return t.strForm===e[0]}))?t.setErrorMessage("Interpreter: In the line '"+o+"', the variable '"+e[0]+"' is a number or is used for math."):t.variables[e[0]]=!0;else if(g.includes(e[0])){try{r=W.eval(e.join(" "))}catch(s){s instanceof Error?t.setErrorMessage("Interpreter: In the line '"+o+"', "+s.message):t.setErrorMessage("Interpreter: In the line '"+o+"', "+s)}"true"===r||"false"===r?n="true"===r:S.a.test(r)?n=parseFloat(r):t.setErrorMessage("Interpreter: In the line '"+o+"', the expression "+e.join(" ")+" should be a number, but "+r+" was computed instead."),t.variables[e[0]]=n}else t.setErrorMessage("Interpreter: In the line '"+o+"', the variable "+e[0]+" doesn't exist yet.");else t.setErrorMessage("Interpreter: In the line '"+o+"', you need to provide a variable name to set, using syntax like set a, set !a, or a mathematical expression.")}(),r=i>=0?r.substring(r.indexOf("\n")+1):""}else if(r.startsWith("get"))2===a.length?void 0!==this.variables[a[1]]?this.content.push(this.addOutput(this.variables[a[1]].toString())):this.setErrorMessage("Interpreter: In the line '"+o+"', variable "+a[1]+" does not exist."):this.setErrorMessage("Interpreter: In the line '"+o+"', only one word can follow 'get'."),r=i>=0?r.substring(r.indexOf("\n")+1):"";else if(r.startsWith("goto")){var O=o.substring(4).replace(A,"").toLowerCase();if(void 0!==this.entries[O])return this.visitFork(),this.setFork(O),void(this.stopEvaluation=!0);this.setErrorMessage("Interpreter: In the line '"+r+"', cannot navigate to fork '"+O+"' because it does not exist."),r=i>=0?r.substring(r.indexOf("\n")+1):""}else if(r.startsWith("color")){var j=o.substring(5).trim().toLowerCase();M.test(j)?6!==j.length&&3!==j.length?this.setErrorMessage("Interpreter: In the line '"+o+"', color must be given in hex format using 3 or 6 digits. For example, f00 or 8800f0."):(this.currentOutputStyles.colorDark=j,this.currentOutputStyles.colorLight=j):this.setErrorMessage("Interpreter: In the line '"+o+"', color must be given in hex format. It can only include numbers 1-9 and upper or lowercase a-f."),r=i>=0?r.substring(r.indexOf("\n")+1):""}else this.setErrorMessage("Interpreter: In the line '"+o+"', unexpected symbols encountered. Ensure all output text is wrapped in single braces and there are no extra braces inside."),r=r.substring(r.indexOf("\n")+1)}}},{key:"refreshInterpreter",value:function(){this.actions=[],this.content=[],this.currentOptionStyles={},this.currentOptionHighlightStyles={},this.currentOutputStyles={},this.errorMessage="",this.fork="",this.log=[],this.options=[],this.timers=[],this.variables={},this.variablesPrev={},this.refreshInterpreterGuiStyles()}},{key:"refreshInterpreterGuiStyles",value:function(){var e=this.props,t=document.getElementById(f.k);t&&("plain"===e.playerStorySettings.playerStoryRunnerStyles.background.type?t.style.backgroundColor=e.theme.themeType===y.a.Light?e.playerStorySettings.playerStoryRunnerStyles.background.colorLight||e.theme.theme.semanticColors.bodyBackground:e.playerStorySettings.playerStoryRunnerStyles.background.colorDark||e.theme.theme.semanticColors.bodyBackground:"plain"===e.authorStorySettings.authorStoryRunnerStyles.background.type&&(t.style.backgroundColor=e.theme.themeType===y.a.Light?e.authorStorySettings.authorStoryRunnerStyles.background.colorLight||e.theme.theme.semanticColors.bodyBackground:e.authorStorySettings.authorStoryRunnerStyles.background.colorDark||e.theme.theme.semanticColors.bodyBackground))}},{key:"updateLog",value:function(){var e,t=this.props;t.authorStorySettings.authorStoryRunnerOptions.hideLog||0===t.authorStorySettings.authorStoryRunnerOptions.logLimit?this.log=[]:(e=this.log).push.apply(e,Object(i.a)(this.content))}},{key:"visitFork",value:function(){void 0===this.variables["visited"+this.fork]&&(this.variables["visited"+this.fork]=!0)}}]),h}(h.Component),G=Object(d.b)((function(e){return{authorStorySettings:e.authorStorySettings,currentStorySettings:e.currentRunnerSettings,playerStorySettings:e.playerStorySettings,renderTrigger:e.viewEdit.storyRerenderToken,strings:Object(C.a)(e.settings.locale),theme:e.settings.theme}}),(function(e){return{dispatchRerenderStory:Object(p.a)(e),dispatchSetAuthorStoryRunnerStyles:Object(T.b)(e),dispatchSetTempStoryRunnerOptions:Object(P.b)(e)}}),void 0,{forwardRef:!0})(z)}).call(this,r(69))},111:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(7),i=r(9),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(n.a)(this,e),this.mt=new Array(e.N),this.mti=e.N+1,this.seed=null,this.seed=null==t?(new Date).getTime():t,this.init_genrand(this.seed)}return Object(i.a)(e,[{key:"init_genrand",value:function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<e.N;this.mti++){var r=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&r)>>>16)<<16)+1812433253*(65535&r)+this.mti,this.mt[this.mti]>>>=0}}},{key:"_nextInt32",value:function(){var t,r=[0,e.MATRIX_A];if(this.mti>=e.N){var n;for(this.mti===e.N+1&&this.init_genrand(5489),n=0;n<e.N-e.M;n++)t=this.mt[n]&e.UPPER_MASK|this.mt[n+1]&e.LOWER_MASK,this.mt[n]=this.mt[n+e.M]^t>>>1^r[1&t];for(;n<e.N-1;n++)t=this.mt[n]&e.UPPER_MASK|this.mt[n+1]&e.LOWER_MASK,this.mt[n]=this.mt[n+(e.M-e.N)]^t>>>1^r[1&t];t=this.mt[e.N-1]&e.UPPER_MASK|this.mt[0]&e.LOWER_MASK,this.mt[e.N-1]=this.mt[e.M-1]^t>>>1^r[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0}},{key:"nextInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._nextInt32();return null==e?t:t%(e[1]-e[0])+e[0]}},{key:"nextInt31",value:function(){return this._nextInt32()>>>1}},{key:"nextNumber",value:function(){return this._nextInt32()*(1/4294967295)}},{key:"nextNumber53",value:function(){return(67108864*(this._nextInt32()>>>5)+(this._nextInt32()>>>6))*(1/9007199254740992)}}]),e}();o.N=624,o.M=397,o.MATRIX_A=2567483615,o.UPPER_MASK=2147483648,o.LOWER_MASK=2147483647},116:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,i,o,a=r(41),s=r(7),u=r(9);(i=n||(n={}))[i.left=0]="left",i[i.right=1]="right",function(e){e[e.left=0]="left",e[e.right=1]="right",e[e.both=2]="both"}(o||(o={}));var l=r(18),c=r(35),h=r(33),f=r(5),d=function(){function e(t,r,n,i,a){Object(s.a)(this,e),this.strForm=void 0,this.placement=void 0,this.assoc=void 0,this.prec=void 0,this.numArgs=void 0,this.function=void 0,this.placement=t,this.assoc=r,this.prec=n,t===o.both?this.numArgs=2:this.numArgs=1,this.strForm=i,this.function=a}return Object(u.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.placement===e.placement&&this.assoc===e.assoc&&this.prec===e.prec&&this.numArgs===e.numArgs&&this.function===e.function}}]),e}(),p=function(){function e(t){Object(s.a)(this,e),this.strForm=void 0,this.strForm=t}return Object(u.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm}}]),e}(),g=r(44),y=function(){function e(){var t=this;Object(s.a)(this,e),this.optRequireRightPars=!1,this.optIncludeUnknowns=!0,this.optUnknownDefault=null,this.Fsin=new c.a("sin",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.sin(t.value))}return null})),this.Fcos=new c.a("cos",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.cos(t.value))}return null})),this.Ftan=new c.a("tan",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.tan(t.value))}return null})),this.Frnd=new c.a("round",1,(function(e){if(e[0]instanceof f.a){var t=e[0];return new f.a(Math.round(t.value))}return null})),this.Frnd2=new c.a("round",2,(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new f.a(Math.round(t.value/r.value)*r.value)}return null})),this.Add=new d(o.both,n.left,6,"+",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new f.a(t.value+r.value)}return null})),this.Sub=new d(o.both,n.left,6,"-",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new f.a(t.value-r.value)}return null})),this.Mlt=new d(o.both,n.left,7,"*",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new f.a(t.value*r.value)}return null})),this.Div=new d(o.both,n.left,7,"/",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];if(0===r.value)throw new Error("Parser: The expression ".concat(t.strForm," / ").concat(r.strForm," causes division by zero."));return new f.a(t.value/r.value)}return null})),this.Mod=new d(o.both,n.left,7,"%",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];if(0===r.value)throw new Error("Parser: The expression ".concat(t.strForm," % ").concat(r.strForm," causes division by zero."));return new f.a(t.value%r.value)}return null})),this.Neg=new d(o.right,n.right,8,"-",(function(e){if(e[1]instanceof f.a){var t=e[1];return new f.a(-t.value)}return null})),this.Exp=new d(o.both,n.right,8,"^",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new f.a(Math.pow(t.value,r.value))}return null})),this.Fac=new d(o.left,n.left,9,"!",(function(e){if(e[0]instanceof f.a){for(var t=e[0],r=t.value,n=1;t.value>1;)n*=r--;return new f.a(n)}return null})),this.Eq=new d(o.both,n.left,4,"=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value===r.value)}if(e[0]instanceof l.a&&e[1]instanceof l.a){var n=e[0],i=e[1];return new l.a(n.value===i.value)}return null})),this.NotEq=new d(o.both,n.left,4,"!=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value!==r.value)}if(e[0]instanceof l.a&&e[1]instanceof l.a){var n=e[0],i=e[1];return new l.a(n.value!==i.value)}return null})),this.Gt=new d(o.both,n.left,5,">",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value>r.value)}return null})),this.Gte=new d(o.both,n.left,5,">=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value>=r.value)}return null})),this.Lt=new d(o.both,n.left,5,"<",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value<r.value)}return null})),this.Lte=new d(o.both,n.left,5,"<=",(function(e){if(e[0]instanceof f.a&&e[1]instanceof f.a){var t=e[0],r=e[1];return new l.a(t.value<=r.value)}return null})),this.LogNot=new d(o.right,n.left,3,"!",(function(e){if(e[1]instanceof l.a){var t=e[1];return new l.a(!t.value)}return null})),this.LogAnd=new d(o.both,n.left,1,"&",(function(e){if(e[0]instanceof l.a&&e[1]instanceof l.a){var t=e[0],r=e[1];return new l.a(t.value&&r.value)}return null})),this.LogOr=new d(o.both,n.left,2,"|",(function(e){if(e[0]instanceof l.a&&e[1]instanceof l.a){var t=e[0],r=e[1];return new l.a(t.value||r.value)}return null})),this.varFalse=new h.a("false",!1),this.varTrue=new h.a("true",!0),this.varPi=new h.a("pi",Math.PI),this.lPar=new p("("),this.rPar=new p(")"),this.argSep=new p(","),this.tokens=[],this.evalNoPar=function(e,r){for(var i=t.tokens.filter((function(e){return e instanceof d})),s=[],u="",h=0;h<e.length;h++)u+=e[h].strForm;if(t.optRequireRightPars&&e[0]===t.lPar&&e[e.length-1]!==t.rPar)throw new Error("Parser: The expression '"+u+"' is missing a right parenthesis at the end.");if(e.filter((function(e){return e===t.lPar||e===t.rPar})),0===e.length)throw new Error("Parser: an empty parenthesis group was provided; there is nothing to process within it.");if(null!==r){var p=t.split(e,t.argSep),g=[];if(r.numArgs!==p.length)throw new Error("Parser: In expression '"+u+"', the number of arguments for "+r.strForm+" should be "+r.numArgs+", but "+p.length+" arguments were given.");for(var y=0;y<p.length;y++){var m=t.evalNoPar(p[y],null);if(!(m[0]instanceof f.a||m[0]instanceof l.a))throw new Error("Parser: In expression '"+u+"', a boolean argument was provided instead of a decimal value.");g[y]=m[0]}var v=r.function(g);if(null===v)throw new Error("Parser: In expression '"+u+"', arguments do not match parameter types used.");return s.push(v),s}e[0]===t.Sub&&(e[0]=t.Neg);for(var b=1;b<e.length;b++)(e[b]===t.Sub&&e[b-1]instanceof d&&(e[b-1].numArgs>1||e[b-1]===t.Neg)||e[b-1]instanceof c.a)&&(e[b]=t.Neg);var S=e.filter((function(e){return e instanceof d})),O=0;S.forEach((function(e){e.prec>O&&(O=e.prec)}));for(var j=function(){for(var t=i.some((function(e){return O===e.prec&&e.assoc===n.right})),r=t?e.length-1:0;t&&r>=0||!t&&r<e.length;){if(e[r]instanceof d&&e[r].prec===O){var a,s,l,c=e[r],h=[null!==(a=e[r-1])&&void 0!==a?a:null,null!==(s=e[r+1])&&void 0!==s?s:null];if(null===h[0]&&(c.placement===o.both||c.placement===o.left))throw new Error("Parser: In '"+u+"', the '"+e[r].strForm+"' operator is missing a lefthand operand.");if(null===h[1]&&(c.placement===o.both||c.placement===o.right))throw new Error("Parser: In '"+u+"', the '"+e[r].strForm+"' operator is missing a righthand operand.");if(null===(l=c.function(h)))throw new Error("In expression '"+u+"', operand type(s) do not match operator.");e[r]=l,c.placement===o.left?(e.splice(r-1,1),r+=t?0:-1):c.placement===o.right?(e.splice(r+1,1),r+=t?1:0):c.placement===o.both&&(e.splice(r+1,1),e.splice(r-1,1),r+=t?0:-1)}t?r--:r++}S=e.filter((function(e){return e instanceof d}));var f=0;S.forEach((function(e){e.prec>f&&(f=e.prec)}))};O>0;)j();return s.push.apply(s,Object(a.a)(e)),s},this.resetTokens()}return Object(u.a)(e,[{key:"addFunction",value:function(e){this.tokens.push(new c.a(e.strForm.toLowerCase(),e.numArgs,e.function)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"addIdentifier",value:function(e){this.tokens.push(new h.a(e.strForm.toLowerCase(),e.value)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"addOperator",value:function(e){this.tokens.push(new d(e.placement,e.assoc,e.prec,e.strForm.toLowerCase(),e.function)),this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"eval",value:function(e){return this.evalTokens(this.tokenize(e))}},{key:"evalTokens",value:function(e){for(var t=this,r=0;r<e.length;r++)if(e[r]instanceof h.a){var n=e[r];if(null!==n.value)"number"===typeof n.value?e[r]=new f.a(n.value):"boolean"===typeof n.value&&(e[r]=new l.a(n.value));else{if(null===this.optUnknownDefault)throw new Error("Parser: The identifier '"+e[r].strForm+"' is unknown and can't be computed.");e[r]=this.optUnknownDefault}}for(var i=this.tokens.filter((function(e){return e instanceof c.a}));;){var o,s,u=e.indexOf(this.rPar)+1,d=u>=1?u:e.length,p=e.slice(0,d).lastIndexOf(this.lPar),g=p>=0?p:0,y=e.slice(0,g),m=e.slice(d,e.length),v=e.slice(g,d),b=null;if(y[y.length-1]instanceof c.a&&function(){var e,r=y[y.length-1];y.splice(y.length-1,1);var n=1;v.forEach((function(e){e===t.argSep&&n++})),b=null!==(e=i.find((function(e){return e.numArgs===n&&e.strForm===r.strForm})))&&void 0!==e?e:null}(),(o=e=y).push.apply(o,Object(a.a)(this.evalNoPar(v,b))),(s=e).push.apply(s,Object(a.a)(m)),0===y.length&&0===m.length){for(var S="",O=0;O<e.length;O++)S+=e[O].strForm;return S}}}},{key:"getTokens",value:function(){return this.tokens}},{key:"removeToken",value:function(e){for(var t=this.tokens.length;t>0;t--)if(e.equals(this.tokens[t]))return this.tokens.splice(t,1),!0;return!1}},{key:"resetTokens",value:function(){this.tokens=[this.Exp,this.Neg,this.Mod,this.Div,this.Mlt,this.Sub,this.Add,this.LogNot,this.LogOr,this.LogAnd,this.Eq,this.Gt,this.Gte,this.Lt,this.Lte,this.NotEq,this.Fsin,this.Fcos,this.Ftan,this.Frnd,this.Frnd2,this.varFalse,this.varTrue,this.varPi,this.lPar,this.rPar,this.argSep],this.tokens=this.tokens.sort((function(e,t){return e.strForm<t.strForm?1:-1}))}},{key:"split",value:function(e,t){for(var r=[],n=[],i=0;i<e.length;i++)e[i]===t?r.push([].concat(n)):n.push(e[i]);return n.length>0&&r.push(n),r}},{key:"tokenize",value:function(e){var t=[],r="";if(""===e.trim())throw new Error("Parser: No expression provided.");e=e.replace(/\s/gm,"").toLowerCase();for(var n=null,i=null,o=null,a=0;a<e.length;a++){var s,u;if(r+=e[a],n=this.tokens.filter((function(e){return e.strForm===r}))[0],a!==e.length-1&&(null===(s=n)||void 0===s?void 0:s.strForm.length)>r.length)(null===(u=i=this.tokens.filter((function(e){return e.strForm===r}))[0])||void 0===u?void 0:u.strForm)===r&&(o=i,a===e.length-1&&(t.push(i),r="",o=null));else if(null===n||a===e.length-1&&n.strForm.length!==r.length)if(null!==o)a-=r.length-o.strForm.length,t.push(o),r="",o=null;else if(g.a.test(r)){var l=parseFloat(r);a!==e.length-1&&g.a.test(r+e[a+1])||(t.push(new f.a(l)),r="")}else{if(!this.optIncludeUnknowns)throw new Error("Parser: token '"+r+"' is not a recognized symbol.");t.push(new h.a(r[0].toString(),null)),a-=r.length-1,r=""}else t.push(n),r="",o=null}for(var c=[],y="",m=0;m<t.length;m++){if(m===t.length-1||t[m+1]instanceof d||t[m+1]instanceof p){if(""!==y){if(y+=t[m].strForm,this.optIncludeUnknowns){c.push(new h.a(y,null)),y="";continue}throw new Error("Parser: token '"+y+"' is not a recognized symbol.")}}else if(!(t[m]instanceof d||t[m]instanceof p)&&(""!==y||!(t[m]instanceof f.a))){y+=t[m].strForm;continue}t[m]===this.Neg?c.push(this.Sub):c.push(t[m])}return c}}]),e}()},12:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return u}));var n=r(13),i={newStory:Object(n.a)(),rerenderStory:Object(n.a)(),saveAndRunStory:Object(n.a)(),updateStory:Object(n.a)()},o={type:i.newStory},a={type:i.rerenderStory},s=function(e){return{story:e,type:i.saveAndRunStory}},u=function(e){return{story:e,type:i.updateStory}}},13:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=Number.MIN_SAFE_INTEGER,i=function(){return(++n).toString()}},139:function(e,t,r){},146:function(e,t,r){"use strict";r.r(t);var n=r(3),i=r(0),o=r.n(i),a=r(55),s=r.n(a),u=(r(139),r(19)),l=r(194),c=r(2),h=r(63),f=r(7),d=r(9),p=r(21),g=r(20),y=r(52),m=r.n(y),v=r(65),b=r(39),S=r(17),O=r(117),j=r(11),k=r(31),w=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(f.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onClickPlayProject=function(){Me(be.openProjectOrGame,{data:{data:function(){e.props.history.push(fe.play)}}})},e.onClickEditProject=function(){Me(be.openProjectOrGame,{data:{data:function(){e.props.history.push(fe.edit)}}})},e.onClickNew=function(){Me(be.newProject,{data:e.props.history}),e.props.history.push(fe.edit)},e}return Object(d.a)(r,[{key:"render",value:function(){var e=Object(j.o)(this.props.theme.theme);return Object(n.jsxs)("div",{style:{alignContent:"center",display:"flex",flexDirection:"column",height:"90vh",justifyContent:"center"},children:[Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(O.a,{onClick:this.onClickPlayProject,styles:e,children:this.props.strings.WelcomeButtonOpenPlay})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(O.a,{onClick:this.onClickEditProject,styles:e,children:this.props.strings.WelcomeButtonOpenEdit})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(O.a,{onClick:this.onClickNew,styles:e,children:this.props.strings.WelcomeButtonNew})})]})}}]),r}(i.Component),x=Object(u.b)((function(e){return{strings:Object(k.a)(e.settings.locale),theme:e.settings.theme}}))(Object(S.f)(w)),P=r(24),T=r(109),I=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(f.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).runStory=function(){var t=document.getElementById(P.a).value;e.props.saveAndRunStory(t)},e.updateStory=function(t){e.props.story!==t.currentTarget.value&&e.props.setStory(t.currentTarget.value)},e}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(e){if(this.props.story!==e.story){var t=document.getElementById(P.a);t&&(t.value=this.props.story)}}},{key:"render",value:function(){var e=this.props;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("textarea",{defaultValue:this.props.story,style:Object(j.f)(this.props.theme.theme),id:P.a,onBlur:this.updateStory}),Object(n.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(n.jsx)(T.a,{styles:{root:{display:"block"}},text:e.strings.EditorPlay,onClick:this.runStory})})]})}}]),r}(i.Component),L=Object(u.b)((function(e){return{story:e.viewEdit.story,strings:Object(k.a)(e.settings.locale),theme:e.settings.theme}}),(function(e){return{saveAndRunStory:Object(b.b)(e),setStory:Object(b.c)(e)}}))(I),E=r(110),C=function e(){Object(f.a)(this,e),this.condition=void 0,this.text=void 0,this.parent=void 0,this.children=void 0,this.condition="",this.text="",this.parent=null,this.children=[]},F=/\/\//g,A=/\bif\b/g,M=/\bendif\b/g;function D(e,t){var r=e.substring(0,t).lastIndexOf("\n");-1===r&&(r=0);var n=e.substring(t).indexOf("\n");return-1===n&&(n=e.length-1),n+=t,e.substring(r,n).includes("@")}function R(e,t){var r=e.substring(0,t),n=r.lastIndexOf("{");return!(n<r.lastIndexOf("}")||-1===n)}var N=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(f.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).interpreterRef=null,e.setInterpreterRef=function(t){null!==t&&(e.interpreterRef=t,e.parse())},e}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(){this.parse()}},{key:"render",value:function(){return Object(n.jsx)(E.a,{ref:this.setInterpreterRef})}},{key:"parse",value:function(){if(null!==this.interpreterRef)try{!function(e,t,r){var n={},i={},o=[],a=e.split("\n");0===a.length&&(null===t||void 0===t||t.setEntries({}),null===t||void 0===t||t.setErrorMessage("Parser: Story is blank. The story must not be blank to parse it."));for(var s=0;s<a.length;s++)a[s]=a[s].replace("\r","").trim(),a[s].startsWith("@")&&o.push(s);var u="";if(o.length>0){for(var l=0;l<o[0];l++)u+=a[l]+"\n";null===t||void 0===t||t.processHeaderOptions(u)}for(var c=0;c<o.length;c++)if(a[o[c]].length<2)null===t||void 0===t||t.setErrorMessage("Parser: Entry"+a[o[c]]+"must be at least 1 character long.");else{var h=a[o[c]].substring(1),f=[],d="";f=c===o.length-1?a.slice(o[c],a.length):a.slice(o[c],o[c+1]);for(var p=1;p<f.length;p++)d+=f[p]+"\n";void 0!==n[h=h.replace(/\s+/g,"").toLowerCase()]?null===t||void 0===t||t.setErrorMessage("Parser: Entry called '".concat(h,"' already exists.")):n[h]=d}for(var g=Object.keys(n),y=0;y<g.length;y++){var m=void 0,v=n[g[y]];do{m=!0;for(var b=null;null!==(b=F.exec(v));){var S=b.index;if(!R(v,S)&&!D(v,S)){v=v.slice(S,v.substring(S).indexOf("\n")),m=!1;break}}}while(!m);n[g[y]]=v}for(var O=0;O<g.length;O++){for(var j=new C,k=j,w=0,x=n[g[O]],P=[],T=[],I=null,L=[],E=[];null!==(I=A.exec(x));)P.push(I);for(;null!==(I=M.exec(x));)T.push(I);for(var N=0;N<P.length;N++)R(x,P[N].index)||D(x,P[N].index)||L.push(P[N].index);for(var W=0;W<T.length;W++)R(x,T[W].index)||D(x,T[W].index)||E.push(T[W].index);L.length!==E.length&&(null===t||void 0===t||t.setErrorMessage("Parser: found ".concat(L.length," if tokens, but ").concat(E.length," ")+"endif tokens. Ifs and endifs must match in number."));for(var z=[],G=0;G<L.length;G++)z.push({item1:L[G],item2:0});for(var B=0;B<E.length;B++)z.push({item1:E[B],item2:1});z=z.sort((function(e,t){return e.item1>t.item1?1:-1}));for(var q=0;q<z.length;q++){var H=z[q].item1,_=z[q].item2,U=x.substring(H);U=U.slice(0,U.indexOf("\n"));for(var Q=-1,K="",J=q-1;J>=0;J--)if(0===z[J].item2){Q=z[J].item1,K=(K=x.substring(Q)).slice(0,K.indexOf("\n"));break}for(var V=-1,X="",$=q-1;$>=0;$--)if(1===z[$].item2){V=z[$].item1,X=(X=x.substring(V)).slice(0,X.indexOf("\n"));break}var Y=V>Q?V:Q,Z=Y===V?X:K;if(0===_){if(0!==q&&-1!==Q){var ee=new C;ee.parent=k;var te=Y+Z.length;if(H-te<0){null===t||void 0===t||t.setErrorMessage("Parser: In '".concat(x.substring(Y),"', cannot specify multiple if tokens on one line."));continue}ee.text+=x.substring(te,H),0===ee.children.length&&""===ee.condition.trim()&&""===ee.text.trim()||k.children.push(ee)}else if(H>0){var re=new C;re.parent=k,re.text+=x.substring(0,H),0===re.children.length&&""===re.condition.trim()&&""===re.text.trim()||k.children.push(re)}var ne=new C;ne.parent=k,ne.condition=U,0===ne.children.length&&""===ne.condition.trim()&&""===ne.text.trim()||k.children.push(ne),k=ne,w++}else if(1===_){if(w<0)return null===t||void 0===t||t.setEntries({}),void(null===t||void 0===t||t.setErrorMessage("Parser: an extra endif token was encountered (if/endif # "+(q+1)+")."));var ie=new C;ie.parent=k;var oe=Y+Z.length;if(H-oe<0){null===t||void 0===t||t.setErrorMessage("Parser: In '"+x.substring(Y)+"', cannot specify multiple endif tokens on one line.");continue}if(ie.text+=x.substring(oe,H),0===ie.children.length&&""===ie.condition.trim()&&""===ie.text.trim()||k.children.push(ie),null===k.parent)return null===t||void 0===t||t.setEntries({}),void(null===t||void 0===t||t.setErrorMessage("Parser: an extra endif token was encountered (endif #"+q+")."));k=k.parent}}if(z.length>0){var ae=z[z.length-1].item1,se=x.substring(ae).indexOf("\n");if(-1!==se){var ue=new C;ue.parent=j,ue.text+=x.substring(ae+se),0===ue.children.length&&""===ue.condition.trim()&&""===ue.text.trim()||j.children.push(ue)}}else j.text+=x;i[g[O]]=j}null===t||void 0===t||t.setEntriesWithFork(i,null!==r&&void 0!==r?r:"")}(this.props.storyToParse,this.interpreterRef)}catch(e){"string"===typeof e?this.interpreterRef.setErrorMessage(e):e instanceof Error&&this.interpreterRef.setErrorMessage(e.message)}}}]),r}(i.Component),W=Object(u.b)((function(e){return{renderTrigger:e.viewEdit.storyReparseToken,storyToParse:e.viewEdit.storyToParse}}))(N),z=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:j.l,children:[Object(n.jsx)("div",{id:P.b,className:j.j,children:Object(n.jsx)(L,{})}),Object(n.jsx)("div",{id:P.k,style:Object(j.k)(this.props.theme.theme),children:Object(n.jsx)(W,{})})]})})}}]),r}(i.Component),G=Object(u.b)((function(e){return{theme:e.settings.theme}}))(z),B=r(25),q=r(22),H=r(13),_={setLocale:Object(H.a)(),setTheme:Object(H.a)()},U=function(e){return{localeId:e,type:_.setLocale}},Q=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.body.style.backgroundColor=r.theme.semanticColors.bodyBackground,e({theme:r,type:_.setTheme});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(U(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},J=Object(B.c)({locale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.b)(),t=arguments.length>1?arguments[1]:void 0;return t.type===_.setLocale?t.localeId:e},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q.c[q.b.Default],t=arguments.length>1?arguments[1]:void 0;return t.type===_.setTheme&&e.theme!==t.theme.theme?(Object(c.B)(t.theme.theme),t.theme):e}}),V="JoshuaTree",X=function(){var e=localStorage.getItem(V);if(null===e)return null;var t={};try{t=JSON.parse(e)}catch(r){return null}return t.localeId&&t.theme&&t.saveFormatVersion?t:null},$=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props;e.userConsentProvided===t.userConsentProvided&&function(e){if(e.userConsentProvided){var t=q.b.Default;Object.keys(q.c).forEach((function(r){q.c[r].localizedName===e.theme.localizedName&&(t=r)}));var r={localeId:e.locale,saveFormatVersion:1,theme:t};localStorage.setItem(V,JSON.stringify(r))}}(this.props)}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{})}}]),r}(o.a.Component),Y=Object(u.b)((function(e){return{locale:e.settings.locale,theme:e.settings.theme,userConsentProvided:e.persistence.userConsentProvided}}))(Object(S.f)($)),Z=r(51),ee=r(41),te=r(113),re=r(118),ne=r(23),ie=r(120),oe=r(114),ae=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e=this.props.dropdown,t=e.styles,r=Object(ie.a)(e,["styles"]),i=t;return Object(n.jsx)(oe.a,Object(ne.a)(Object(ne.a)({},r),{},{styles:Object(j.c)(this.props.theme.theme,i)}))}}]),r}(i.Component),se=Object(u.b)((function(e){return{theme:e.settings.theme}}))(ae);function ue(e){return"userSettingsLocaleOptions".concat(e)}function le(e){return"userSettingsThemeOptions".concat(e)}var ce=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e,t,r=this.props,i=[{ariaLabel:(t=r).strings.TipTheme,key:"userSettingsCommandBarChosenTheme",onRender:function(){var e=[];return Object.keys(q.c).forEach((function(t){var r=q.c[t];e.push({data:r,key:le(r.localizedName),text:r.localizedName})})),Object(n.jsx)(se,{dropdown:{defaultSelectedKey:le(t.themeName),onRenderTitle:function(){return Object(n.jsx)("span",{style:{fontSize:"".concat(t.wholeTheme.fonts.large)},children:t.strings.ThemeDropdownText(t.themeName)})},options:e,onChange:function(e,r){if(void 0!==r){var n=r.data;t.setTheme(n)}},styles:Object(j.b)(t.wholeTheme)}})},buttonStyles:Object(j.a)()},{ariaLabel:t.strings.TipLanguage,key:"userSettingsCommandBarChosenLocale",onRender:function(){var e=[];return Object.keys(Z.a).forEach((function(t){e.push({data:t,key:ue(t),text:Z.a[t].LanguageCodeName})})),Object(n.jsx)(se,{dropdown:{defaultSelectedKey:ue(t.locale),onRenderTitle:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(re.a,{iconName:"LocaleLanguage",styles:j.i}),Object(n.jsx)("span",{style:{fontSize:"".concat(t.wholeTheme.fonts.large)},children:Z.a[t.locale].LanguageCodeName})]})},options:e,onChange:function(e,r){if(void 0!==r){var n=r.data;t.setLocale(n)}}}})}}];if(de("edit")){var o=function(e){return{items:[{className:Object(j.d)(e.wholeTheme,!0),data:be.newProject,key:"userSettingsCommandBarFileMenuNew",name:e.strings.MenuFileNew,iconProps:{iconName:"FabricNewFolder"},onClick:function(){return Me(be.newProject)}},{className:Object(j.d)(e.wholeTheme,!0),data:be.openProjectOrGame,key:"userSettingsCommandBarFileMenuOpen",name:e.strings.MenuFileOpen,iconProps:{iconName:"OpenFolderHorizontal"},onClick:function(){return Me(be.openProjectOrGame)}},{className:Object(j.d)(e.wholeTheme),data:be.saveProjectOrGame,key:"userSettingsCommandBarFileMenuSave",name:e.strings.MenuFileSave,iconProps:{iconName:"Save"},onClick:function(){return Me(be.saveProjectOrGame)}}],farItems:[{className:Object(j.d)(e.wholeTheme),data:be.switchMode,key:"userSettingsCommandBarFileMenuSwitchMode",tooltipHostProps:{content:e.strings.MenuFileSwitch},iconOnly:!0,iconProps:{iconName:"Switch"},onClick:function(){return Me(be.switchMode)}}]}}(r);e=o.items,i=[].concat(Object(ee.a)(o.farItems),Object(ee.a)(i))}else if(de("play")){var a=function(e){return{items:[{className:Object(j.d)(e.wholeTheme,!0),data:be.openProjectOrGame,key:"userSettingsCommandBarFileMenuOpen",name:e.strings.MenuFileOpen,iconProps:{iconName:"OpenFolderHorizontal"},onClick:function(){return Me(be.openProjectOrGame)}},{className:Object(j.d)(e.wholeTheme),data:be.saveProjectOrGame,key:"userSettingsCommandBarFileMenuSave",name:e.strings.MenuFileSave,iconProps:{iconName:"Save"},onClick:function(){return Me(be.saveProjectOrGame)}}],farItems:[{className:Object(j.d)(e.wholeTheme),data:be.switchMode,key:"userSettingsCommandBarFileMenuSwitchMode",tooltipHostProps:{content:e.strings.MenuFileSwitch},iconOnly:!0,iconProps:{iconName:"Switch"},onClick:function(){return Me(be.switchMode)}}]}}(r);e=a.items,i=[].concat(Object(ee.a)(a.farItems),Object(ee.a)(i))}else e=[];return Object(n.jsx)(te.a,{ariaLabel:r.strings.TipNavigateCommandBar,items:e,farItems:i,styles:j.e})}}]),r}(i.Component),he=Object(u.b)((function(e){return{locale:e.settings.locale,reduxState:e,strings:Object(k.a)(e.settings.locale),themeName:e.settings.theme.localizedName,userConsentProvided:e.persistence.userConsentProvided,wholeTheme:Object(c.z)()}}),(function(e){return{setLocale:K(e),setTheme:Q(e)}}))(ce),fe={base:"/",play:"/play",edit:"/edit"};function de(e){return fe[e]===window.location.hash.replace(/\?.*/g,"").substring(1).toLowerCase()}function pe(){return window.location.hash.substring(1).toLowerCase().startsWith(fe.play)}function ge(){return window.location.hash.substring(1).toLowerCase().startsWith(fe.edit)}var ye,me=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(f.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).applyLocalStorage=function(){var t=X();null!==t&&(t.localeId in Z.a&&e.props.setLocale(t.localeId),null!==q.c[t.theme]&&e.props.setTheme(q.c[t.theme]))},e}return Object(d.a)(r,[{key:"componentDidMount",value:function(){this.props.userConsentProvided&&this.applyLocalStorage()}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(je,{}),Object(n.jsx)(Y,{}),Object(n.jsx)(Re,{}),Object(n.jsx)(he,{}),Object(n.jsxs)(S.c,{children:[Object(n.jsx)(S.a,{path:fe.base,exact:!0,component:x}),Object(n.jsx)(S.a,{path:fe.edit,component:G}),Object(n.jsx)(S.a,{path:fe.play,component:W})]})]})}}]),r}(i.Component),ve=Object(u.b)((function(e){return{locale:e.settings.locale,strings:Object(k.a)(e.settings.locale),themeName:e.settings.theme.localizedName,userConsentProvided:e.persistence.userConsentProvided,wholeTheme:Object(c.z)()}}),(function(e){return{setLocale:K(e),setTheme:Q(e)}}))(me);var be,Se=i.createRef(),Oe=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e=this,t=function(){var t=Object(v.a)(m.a.mark((function t(r){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=r.target.files)&&((i=new FileReader).onloadend=function(){var t=i.result;pe()?e.props.saveAndRunStory(t):e.props.setStory(t),r.target.value="",ye&&(ye(),ye=void 0)},i.onabort=function(){ye=void 0},n[0]instanceof Blob&&i.readAsText(n[0]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("input",{className:j.h,onChange:t,ref:Se,type:"file"})}}]),r}(i.Component),je=Object(u.b)(null,(function(e){return{reRenderStory:Object(b.a)(e),saveAndRunStory:Object(b.b)(e),setStory:Object(b.c)(e)}}))(Oe),ke=r(112),we={setCustomizationApplied:Object(H.a)(),setUserConsentProvided:Object(H.a)()},xe=Object(B.c)({customizationApplied:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===we.setCustomizationApplied?t.isApplied:e},userConsentProvided:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===we.setUserConsentProvided?t.consentProvided:e}}),Pe=r(78),Te={setPlayerStoryInputStyles:Object(H.a)(),setPlayerStoryLogSeparatorStyles:Object(H.a)(),setPlayerStoryOptionStyles:Object(H.a)(),setPlayerStoryOptionHighlightStyles:Object(H.a)(),setPlayerStoryOutputStyles:Object(H.a)(),setPlayerStoryRunnerOptions:Object(H.a)(),setPlayerStoryRunnerStyles:Object(H.a)()},Ie=r(12),Le=Object(B.c)({playerStoryInputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryInputStyles?t.style:t.type===Ie.b.type?{}:e},playerStoryLogSeparatorStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryLogSeparatorStyles?t.style:t.type===Ie.b.type?{}:e},playerStoryOptionStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryOptionStyles?t.style:t.type===Ie.b.type?{}:e},playerStoryOptionHighlightStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryOptionHighlightStyles?t.style:t.type===Ie.b.type?{}:e},playerStoryOutputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryOutputStyles?t.style:t.type===Ie.b.type?{}:e},playerStoryRunnerOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryRunnerOptions?t.options:t.type===Ie.b.type?{}:e},playerStoryRunnerStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{background:{type:"plain"}},t=arguments.length>1?arguments[1]:void 0;return t.type===Te.setPlayerStoryRunnerStyles?t.style:t.type===Ie.b.type?{background:{type:"plain"}}:e}}),Ee=r(77),Ce=Object(B.c)({persistence:xe,settings:J,viewEdit:b.d,authorStorySettings:Pe.a,currentRunnerSettings:Ee.a,playerStorySettings:Le}),Fe=Object(B.d)(Ce,void 0,Object(B.a)(ke.a));!function(e){e.newProject="newProject",e.openProjectOrGame="openProjectOrGame",e.saveProjectOrGame="saveProjectOrGame",e.switchMode="switchMode"}(be||(be={}));var Ae={newProject:{functionsToInvoke:[],guid:be.newProject,shortcuts:[{originalSequence:[{key:"N",usesShift:!0}]}]},openProjectOrGame:{functionsToInvoke:[],guid:be.openProjectOrGame,shortcuts:[{originalSequence:[{key:"O",usesShift:!0}]}]},saveProjectOrGame:{functionsToInvoke:[],guid:be.saveProjectOrGame,shortcuts:[{originalSequence:[{key:"S",usesShift:!0}]}]},switchMode:{functionsToInvoke:[],guid:be.switchMode,shortcuts:[{originalSequence:[{key:"Q",usesShift:!0}]}]}},Me=function(e,t){var r,n;!0!==Ae[e].enableWhileTyping&&("textarea"===(null===(r=document.activeElement)||void 0===r?void 0:r.nodeName.toLowerCase())||"input"===(null===(n=document.activeElement)||void 0===n?void 0:n.nodeName.toLowerCase())&&"text"===document.activeElement.getAttribute("type"))||Ae[e].functionsToInvoke.forEach((function(e){return e(t)}))},De=function(e){Object(p.a)(r,e);var t=Object(g.a)(r);function r(){var e;Object(f.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).actionSwitchMode=function(){pe()?e.props.history.push(fe.edit):ge()&&e.props.history.push(fe.play)},e}return Object(d.a)(r,[{key:"actionNewProject",value:function(){ge()&&Fe.dispatch(Ie.b)}},{key:"actionOpenProjectOrGame",value:function(e){var t,r;!function(e){var t;ye=e,null===(t=Se.current)||void 0===t||t.click()}(null!==(t=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.callback)&&void 0!==t?t:void 0)}},{key:"actionSaveProjectOrGame",value:function(){pe()?alert("Invoked file -> save game."):ge()&&alert("Invoked file -> save project.")}},{key:"componentDidMount",value:function(){Ae.newProject.functionsToInvoke=[this.actionNewProject],Ae.openProjectOrGame.functionsToInvoke=[this.actionOpenProjectOrGame],Ae.saveProjectOrGame.functionsToInvoke=[this.actionSaveProjectOrGame],Ae.switchMode.functionsToInvoke=[this.actionSwitchMode]}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{})}}]),r}(i.Component),Re=Object(u.b)((function(e){return{}}),(function(e){return{}}))(Object(S.f)(De));Object(l.a)(),function(){var e=Object.keys(Ae),t={};e.forEach((function(e){t[e]=Ae[e].shortcuts.map((function(e){return{shortcut:e,step:0}}))})),window.addEventListener("keypress",(function(r){e.forEach((function(e){for(var n=t[e],i=0;i<n.length;i++){var o=n[i];if(!0!==o.shortcut.disabled){var a=void 0!==o.shortcut.customSequence?o.shortcut.customSequence:o.shortcut.originalSequence;if(0!==a.length)if(a[o.step].key!==r.key.toUpperCase()||Boolean(a[o.step].usesAlt)!==r.altKey||Boolean(a[o.step].usesCtrl)!==r.ctrlKey||Boolean(a[o.step].usesShift)!==r.shiftKey)o.step=0;else{if(o.step===a.length-1)return Me(e),void(o.step=0);o.step++}}}}))}))}(),Object(c.B)(q.c[q.b.Default].theme),s.a.render(Object(n.jsx)(u.a,{store:Fe,children:Object(n.jsx)(h.a,{children:Object(n.jsx)(ve,{})})}),document.getElementById("root"))},18:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(7),i=r(9),o=function(){function e(t){Object(n.a)(this,e),this.strForm=void 0,this.value=void 0,this.strForm=t.toString(),this.value=t}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},22:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c}));var n,i,o,a=r(26),s=r(31),u=r(2);!function(e){e[e.Light=0]="Light",e[e.Dark=1]="Dark"}(i||(i={})),function(e){e[e.Default=0]="Default",e[e.EarthAndSky=1]="EarthAndSky",e[e.ContrastLight=2]="ContrastLight",e[e.Muted=3]="Muted",e[e.Slate=4]="Slate",e[e.DeepSea=5]="DeepSea",e[e.Midnight=6]="Midnight",e[e.ContrastDark=7]="ContrastDark",e[e.Dim=8]="Dim"}(o||(o={}));var l=Object(s.a)(),c=(n={},Object(a.a)(n,o.ContrastDark,{localizedName:l.ThemeContrastDark,themeId:o.ContrastDark,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#ffea00",themeLighterAlt:"#0a0900",themeLighter:"#292500",themeLight:"#4d4600",themeTertiary:"#998c00",themeSecondary:"#e0ce00",themeDarkAlt:"#ffec19",themeDark:"#ffef3d",themeDarker:"#fff370",neutralLighterAlt:"#0b0b0b",neutralLighter:"#151515",neutralLight:"#252525",neutralQuaternaryAlt:"#2f2f2f",neutralQuaternary:"#373737",neutralTertiaryAlt:"#595959",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#000000"}})}),Object(a.a)(n,o.ContrastLight,{localizedName:l.ThemeContrastLight,themeId:o.ContrastLight,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#000080",themeLighterAlt:"#f0f0fa",themeLighter:"#c5c5eb",themeLight:"#9898d9",themeTertiary:"#4747b3",themeSecondary:"#11118f",themeDarkAlt:"#000073",themeDark:"#000061",themeDarker:"#000047",neutralLighterAlt:"#f8f8f8",neutralLighter:"#f4f4f4",neutralLight:"#eaeaea",neutralQuaternaryAlt:"#dadada",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c8c8",neutralTertiary:"#595754",neutralSecondary:"#373534",neutralPrimaryAlt:"#2f2d2c",neutralPrimary:"#000000",neutralDark:"#151413",black:"#0b0b0a",white:"#ffffff"}})}),Object(a.a)(n,o.DeepSea,{localizedName:l.ThemeDeepSea,themeId:o.DeepSea,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#e8a63c",themeLighterAlt:"#090702",themeLighter:"#251b0a",themeLight:"#463212",themeTertiary:"#8b6424",themeSecondary:"#cc9235",themeDarkAlt:"#eaaf4e",themeDark:"#eeba68",themeDarker:"#f2cc8e",neutralLighterAlt:"#02132b",neutralLighter:"#041833",neutralLight:"#092141",neutralQuaternaryAlt:"#0e274a",neutralQuaternary:"#122c51",neutralTertiaryAlt:"#27456f",neutralTertiary:"#e8f6f6",neutralSecondary:"#ebf8f7",neutralPrimaryAlt:"#eff9f9",neutralPrimary:"#dcf2f1",neutralDark:"#f7fcfc",black:"#fbfdfd",white:"#000e21"}})}),Object(a.a)(n,o.Default,{localizedName:l.ThemeDefault,themeId:o.Default,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#5f609e",themeLighterAlt:"#f7f7fb",themeLighter:"#e0e0ef",themeLight:"#c7c7e2",themeTertiary:"#9696c5",themeSecondary:"#6e6faa",themeDarkAlt:"#55568e",themeDark:"#484978",themeDarker:"#353659",neutralLighterAlt:"#e4e4e4",neutralLighter:"#e1e1e1",neutralLight:"#d7d7d7",neutralQuaternaryAlt:"#c9c9c9",neutralQuaternary:"#bfbfbf",neutralTertiaryAlt:"#b8b8b8",neutralTertiary:"#595959",neutralSecondary:"#373737",neutralPrimaryAlt:"#2f2f2f",neutralPrimary:"#000000",neutralDark:"#151515",black:"#0b0b0b",white:"#ebebeb"}})}),Object(a.a)(n,o.Dim,{localizedName:l.ThemeDim,themeId:o.Dim,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#784600",themeLighterAlt:"#050300",themeLighter:"#130b00",themeLight:"#241500",themeTertiary:"#482a00",themeSecondary:"#693e00",themeDarkAlt:"#85530d",themeDark:"#986825",themeDarker:"#b3894f",neutralLighterAlt:"#000b01",neutralLighter:"#021502",neutralLight:"#052506",neutralQuaternaryAlt:"#092f0a",neutralQuaternary:"#0c370d",neutralTertiaryAlt:"#1f5921",neutralTertiary:"#222222",neutralSecondary:"#454443",neutralPrimaryAlt:"#656463",neutralPrimary:"#737270",neutralDark:"#949392",black:"#b0afae",white:"#000000"}})}),Object(a.a)(n,o.EarthAndSky,{localizedName:l.ThemeEarthAndSky,themeId:o.EarthAndSky,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#8f4700",themeLighterAlt:"#fbf6f0",themeLighter:"#eddac7",themeLight:"#ddbc9b",themeTertiary:"#bc834b",themeSecondary:"#9c5813",themeDarkAlt:"#814000",themeDark:"#6d3600",themeDarker:"#502800",neutralLighterAlt:"#e9f6f8",neutralLighter:"#e5f2f4",neutralLight:"#dce8ea",neutralQuaternaryAlt:"#cdd8da",neutralQuaternary:"#c4cfd0",neutralTertiaryAlt:"#bcc7c8",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#f0fdff"}})}),Object(a.a)(n,o.Midnight,{localizedName:l.ThemeMidnight,themeId:o.Midnight,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#d1ad7d",themeLighterAlt:"#080705",themeLighter:"#211c14",themeLight:"#3f3426",themeTertiary:"#7d684b",themeSecondary:"#b8986e",themeDarkAlt:"#d6b489",themeDark:"#dcbf99",themeDarker:"#e5cfb2",neutralLighterAlt:"#0b0b0b",neutralLighter:"#151515",neutralLight:"#252525",neutralQuaternaryAlt:"#2f2f2f",neutralQuaternary:"#373737",neutralTertiaryAlt:"#595959",neutralTertiary:"#e0e0e0",neutralSecondary:"#e5e5e5",neutralPrimaryAlt:"#eaeaea",neutralPrimary:"#d1d1d1",neutralDark:"#f4f4f4",black:"#f9f9f9",white:"#000000"}})}),Object(a.a)(n,o.Muted,{localizedName:l.ThemeMuted,themeId:o.Muted,themeType:i.Light,theme:Object(u.q)({palette:{themePrimary:"#23295c",themeLighterAlt:"#f2f3f8",themeLighter:"#ced0e5",themeLight:"#a8acce",themeTertiary:"#63689d",themeSecondary:"#33396f",themeDarkAlt:"#1f2553",themeDark:"#1b1f46",themeDarker:"#141733",neutralLighterAlt:"#bdbdbb",neutralLighter:"#bfc0be",neutralLight:"#c4c4c2",neutralQuaternaryAlt:"#c6c7c5",neutralQuaternary:"#c9c9c7",neutralTertiaryAlt:"#d2d2d1",neutralTertiary:"#595959",neutralSecondary:"#373737",neutralPrimaryAlt:"#2f2f2f",neutralPrimary:"#000000",neutralDark:"#151515",black:"#0b0b0b",white:"#babab8"}})}),Object(a.a)(n,o.Slate,{localizedName:l.ThemeSlate,themeId:o.Slate,themeType:i.Dark,theme:Object(u.q)({palette:{themePrimary:"#9798bd",themeLighterAlt:"#060608",themeLighter:"#18181e",themeLight:"#2d2e39",themeTertiary:"#5b5b71",themeSecondary:"#8586a6",themeDarkAlt:"#a0a1c3",themeDark:"#aeafcd",themeDarker:"#c1c2da",neutralLighterAlt:"#303736",neutralLighter:"#373f3e",neutralLight:"#434c4b",neutralQuaternaryAlt:"#4b5453",neutralQuaternary:"#515b5a",neutralTertiaryAlt:"#6c7775",neutralTertiary:"#dfdfdf",neutralSecondary:"#e4e4e4",neutralPrimaryAlt:"#e9e9e9",neutralPrimary:"#cfcfcf",neutralDark:"#f4f4f4",black:"#f9f9f9",white:"#272e2d"}})}),n)},24:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"f",(function(){return s})),r.d(t,"i",(function(){return u})),r.d(t,"h",(function(){return l})),r.d(t,"k",(function(){return c})),r.d(t,"d",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"j",(function(){return d}));var n="editor-inputfield",i="editor-wrapper",o="runner-content",a="runner-inputfield",s="runner-log",u="runner-options",l="runner-option-restart",c="runner-wrapper",h="runner-input",f="runner-option",d="runner-output"},31:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(99),i=r(51),o=function(){var e="en-us";if(void 0!==navigator.languages){var t,r=Object(n.a)(navigator.languages);try{for(r.s();!(t=r.n()).done;){var i=t.value.toLowerCase().split("-"),o=i[0],a=i.length>1?i[1]:"";if("".concat(o,"-").concat(a)in s){e="".concat(o,"-").concat(a);break}if("".concat(o)in s){e="".concat(o);break}}}catch(l){r.e(l)}finally{r.f()}}else{var u=navigator.language.toLowerCase();u in s&&(e=u)}return s[e]},a=function(e){return i.a[s[e||o()]]},s={en:"en-us","en-us":"en-us"}},33:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(7),i=r(9),o=function(){function e(t,r){Object(n.a)(this,e),this.strForm=void 0,this.value=void 0,this.strForm=t,this.value=r}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},35:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(7),i=r(9),o=function(){function e(t,r,i){Object(n.a)(this,e),this.strForm=void 0,this.numArgs=void 0,this.function=void 0,this.strForm=t,this.numArgs=r,this.function=i}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.numArgs===e.numArgs&&this.function===e.function}}]),e}()},39:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return u}));var n=r(25),i=r(12),o=function(e){return function(t){e(Object(i.e)(t))}},a=function(e){return function(t){e(Object(i.d)(t))}},s=function(e){return function(){e(i.c)}},u=Object(n.c)({story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===i.a.updateStory||t.type===i.a.saveAndRunStory?t.story:t.type===i.a.newStory?"":e},storyReparseToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===i.a.saveAndRunStory?e+1:e},storyRerenderToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===i.a.rerenderStory?e+1:e},storyToParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===i.a.saveAndRunStory?t.story:t.type===i.a.newStory?"":e}})},44:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=/^-?(\d+\.?\d*|\d*\.?\d+)$/g},48:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s}));var n,i=r(26),o=r(22),a=r(11);!function(e){e[e.input=0]="input",e[e.option=1]="option",e[e.optionHighlight=2]="optionHighlight",e[e.output=3]="output"}(n||(n={}));var s=function(e,t,r,s,u){var l=function(e){var t;return t={},Object(i.a)(t,n.input,{color:e.theme.semanticColors.errorText,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"inherit"}),Object(i.a)(t,n.option,{color:e.theme.palette.blue,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"underline"}),Object(i.a)(t,n.optionHighlight,{color:e.theme.palette.blueDark,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"underline"}),Object(i.a)(t,n.output,{color:e.theme.semanticColors.bodyText,fontFamily:a.g,fontSize:"1.2 rem",fontStyle:"normal",fontWeight:"normal",textDecoration:"inherit"}),t}(e)[u],c=e.themeType===o.a.Light?t.colorLight||r.colorLight||s.colorLight||l.color:t.colorDark||r.colorDark||s.colorDark||l.color,h=t.font||r.font||s.font||l.fontFamily,f=t.fontSize||r.fontSize||s.fontSize||l.fontSize,d="normal",p="normal",g="inherit";return t.fontStyle?d=t.fontStyle.includes("i")?"italic":l.fontStyle:r.fontStyle?d=r.fontStyle.includes("i")?"italic":l.fontStyle:s.fontStyle&&(d=s.fontStyle.includes("i")?"italic":l.fontStyle),t.fontStyle?p=t.fontStyle.includes("b")?"bold":l.fontWeight:r.fontStyle?p=r.fontStyle.includes("b")?"bold":l.fontWeight:s.fontStyle&&(p=s.fontStyle.includes("b")?"bold":l.fontWeight),t.fontStyle?g=t.fontStyle.includes("u")?"underline":l.textDecoration:r.fontStyle?g=r.fontStyle.includes("u")?"underline":l.textDecoration:s.fontStyle&&(g=s.fontStyle.includes("u")?"underline":l.textDecoration),{color:c,fontFamily:h,fontSize:f,fontStyle:d,fontWeight:p,textDecoration:g,whiteSpace:"pre-wrap"}}},5:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(7),i=r(9),o=r(44),a=function(){function e(t){if(Object(n.a)(this,e),this.strForm=void 0,this.value=void 0,"string"===typeof t){if(this.strForm=t,!o.a.test(t))throw new Error("Parser: The expression '"+t+"' is not a valid number.");this.value=parseFloat(t)}else this.strForm=t.toString(),this.value=t}return Object(i.a)(e,[{key:"equals",value:function(e){return this.strForm===e.strForm&&this.value===e.value}}]),e}()},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={"en-us":{ApplicationName:"Joshua Tree",ApplicationNameAndVersion:function(e,t){return"".concat(e," version ").concat(t)},EditorPlay:"Play",LanguageCodeName:"English (United States)",MenuFile:"File",MenuFileNew:"New",MenuFileOpen:"Open",MenuFileSave:"Save",MenuFileSwitch:"Switch between play and edit",RunnerRestart:"Restart",ThemeContrastDark:"\ud83c\udf11 Contrast Dark",ThemeContrastLight:"\u2600\ufe0f Contrast Light",ThemeDefault:"\u2600\ufe0f Default",ThemeDeepSea:"\ud83c\udf11 Deep Sea",ThemeDim:"\ud83c\udf11 Dim",ThemeEarthAndSky:"\u2600\ufe0f Earth and Sky",ThemeMidnight:"\ud83c\udf11 Midnight",ThemeMuted:"\u2600\ufe0f Muted",ThemeSlate:"\ud83c\udf11 Slate",ThemeDropdownText:function(e){return"".concat(e," theme")},TipLanguage:"Language",TipNavigateCommandBar:"Use left and right arrow keys to navigate between commands.",TipTheme:"Theme",WelcomeButtonOpenPlay:"Open & Play",WelcomeButtonOpenEdit:"Open & Edit",WelcomeButtonNew:"New"}}},77:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u}));var n=r(25),i=r(13),o={clearAllTempSettings:Object(i.a)(),setCurrentRunnerOptions:Object(i.a)()},a=r(12),s=function(e){return function(t){e(function(e){return{type:o.setCurrentRunnerOptions,options:e}}(t))}},u=Object(n.c)({currentRunnerOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setCurrentRunnerOptions?t.options:t.type===o.clearAllTempSettings||t.type===a.b.type?{}:e}})},78:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u}));var n=r(25),i=r(13),o={setAuthorStoryInputStyles:Object(i.a)(),setAuthorStoryLogSeparatorStyles:Object(i.a)(),setAuthorStoryOptionStyles:Object(i.a)(),setAuthorStoryOptionHighlightStyles:Object(i.a)(),setAuthorStoryOutputStyles:Object(i.a)(),setAuthorStoryRunnerOptions:Object(i.a)(),setAuthorStoryRunnerStyles:Object(i.a)(),setAuthorStoryStrings:Object(i.a)()},a=r(12),s=function(e){return function(t){e(function(e){return{type:o.setAuthorStoryRunnerStyles,style:e}}(t))}},u=Object(n.c)({authorStoryInputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryInputStyles?t.style:t.type===a.b.type?{}:e},authorStoryLogSeparatorStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryLogSeparatorStyles?t.style:t.type===a.b.type?{}:e},authorStoryOptionStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryOptionStyles?t.style:t.type===a.b.type?{}:e},authorStoryOptionHighlightStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryOptionHighlightStyles?t.style:t.type===a.b.type?{}:e},authorStoryOutputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryOutputStyles?t.style:t.type===a.b.type?{}:e},authorStoryRunnerOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryRunnerOptions?t.options:t.type===a.b.type?{}:e},authorStoryRunnerStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{background:{type:"plain"}},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryRunnerStyles?t.style:t.type===a.b.type?{background:{type:"plain"}}:e},authorStoryStrings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o.setAuthorStoryStrings?t.strings:t.type===a.b.type?{}:e}})}},[[146,1,2]]]);
//# sourceMappingURL=main.f7149441.chunk.js.map